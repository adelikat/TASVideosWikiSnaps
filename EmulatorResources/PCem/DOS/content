76
[div class=p 
	"This page will give you specific instructions and tips for using DOS in PCem. The entirety of the 
	(__wikiLink|displaytext=main guide|href=/EmulatorResources/PCem)
	" applies here too.
	$LF
]div
[div class=card mb-2 
	[div class=card-header 
		[strong 
			"Table of contents
		]strong
	]div
	[div class=card-body 
		[ul 
			[li 
				[a href=#WhatYouLlNeed 
					" What you'll need
					$LF
				]a
			]li
			[li 
				[a href=#PremadeConfigurations 
					" Premade configurations
					$LF
				]a
			]li
			[li 
				[a href=#UsingWithLibtas 
					" Using with libTAS
					$LF
				]a
				[ul 
					[li 
						[a href=#CdDriverIssues 
							" CD driver issues
							$LF
						]a
					]li
					[li 
						[a href=#FlashBin 
							" flash.bin
							$LF
						]a
					]li
					[li 
						[a href=#LibtasSettings 
							" libTAS Settings
							$LF
						]a
					]li
				]ul
			]li
		]ul
	]div
]div
[h2 id=WhatYouLlNeed 
	" What you'll need
	$LF
]h2
[ul 
	[li 
		" 
		(__wikiLink|displaytext=libTAS and PCem (with ROM files)|href=/EmulatorResources/PCem#WhatYouLlNeed)
		$LF
	]li
]ul
[h2 id=PremadeConfigurations 
	" Premade configurations
	$LF
]h2
[div class=p 
	"To make setup as easy as possible, you can just pick one of these premade configurations. They represent machines compatible with DOS games, based on era they were released in, and specs they were intended for.
	$LF
]div
[ul 
	[li 
		" 
		(__wikiLink|displaytext=Early '80s config|href=/UserFiles/Info/638254751623856814)
		" - for 1980s games that don't require a hard drive - ones that can boot or run directly from a floppy disk
		$LF
	]li
	[li 
		" 
		[a href=https://files.tasvideos.org/common/Wiki/pcem/dos/PCem-Late80s.7z rel=noopener external nofollow 
			"Late '80s package
		]a
		" - for games released until 1989-12-31.
		$LF
	]li
	[li 
		" 
		[a href=https://files.tasvideos.org/common/Wiki/pcem/dos/PCem-Early90s.7z rel=noopener external nofollow 
			"Early '90s package
		]a
		" - for games released from 1990-01-01 to 1994-12-31.
		$LF
	]li
	[li 
		" 
		[a href=https://files.tasvideos.org/common/Wiki/pcem/dos/PCem-Late90s.7z rel=noopener external nofollow 
			"Late '90s package
		]a
		" - for games released after 1995-01-01.
		$LF
	]li
]ul
[div class=p 
	"Here's how we created them:
	$LF
]div
[ul 
	[li 
		" 
		(__wikiLink|href=/EmulatorResources/PCem/DOS/Configurations|implicitdisplaytext=Emulator Resources / PCem / DOS / Configurations)
		$LF
	]li
]ul
[h2 id=UsingWithLibtas 
	" Using with libTAS
	$LF
]h2
[div class=p 
	"This section will be focusing on setting up a configuration to make tool-assisted speedruns. These guidelines will help you make a TAS that people will be able to sync on other machines. If nobody else can sync your run, then it will probably not get accepted!
	$LF
]div
[div class=p 
	"Be aware of our Movie Rules for 
	(__wikiLink|displaytext=libTAS movies|href=/EmulatorResources/LibTAS#MovieSubmissions)
	" and especially for running 
	(__wikiLink|displaytext=DOS in PCem in libTAS|href=/EmulatorResources/PCem#MovieSubmissions)
	".
	$LF
]div
[h3 id=CdDriverIssues 
	" CD driver issues
	$LF
]h3
[div class=p 
	"The FreeDOS CD driver, 
	[code 
		"udvd2.sys
	]code
	", is known to have some bugs, especially with CD audio playback, and some games do not even work with it at all, such as Fallout. If you're trying to run a game that requires a CD and it's not working quite right, you should try swapping out the CD driver as part of your movie. 
	[code 
		"oakcdrom.sys
	]code
	" is known to work well with PCem. To swap out the CD driver:
	$LF
]div
[ul 
	[li 
		" Do all of the following actions within your movie or verification movie, starting from fresh files.
		$LF
	]li
	[li 
		" Include the CD driver with your game files or make an ISO with just the driver on it. (For info on how to use multiple CDs in a config, check 
		(__wikiLink|displaytext=here|href=/EmulatorResources/PCem#SwappingDisks)
		")
		$LF
	]li
	[li 
		" Within libTAS, boot up the config and get to the 
		[code 
			"C:\>
		]code
		" prompt. Copy the driver to the appropriate place with the command 
		[code 
			"copy d:\path\to\oakcdrom.sys c:\fdos\bin\
		]code
		", substituting in the proper driver path.
		$LF
	]li
	[li 
		" Open the editor with the command 
		[code 
			"edit autoexec.bat
		]code
		". Go down to the line that says 
		[code 
			"DEVLOAD /H /Q %dosdir%\BIN\UDVD2.SYS /D:FDCD0001
		]code
		" and replace 
		[code 
			"UDVD2.SYS
		]code
		" with 
		[code 
			"OAKCDROM.SYS
		]code
		". Do File -> Save to save it.
		$LF
	]li
	[li 
		" Reboot the PC by using the built-in Restart input for libTAS.
		$LF
	]li
]ul
[div class=p 
	"You can then install your game and continue.
	$LF
]div
[h3 id=FlashBin 
	" flash.bin
	$LF
]h3
[div class=p 
	[code 
		"flash.bin
	]code
	" is a file that contains the flash memory of the system. Because the ROM gets written into it, we can't distribute it. This file may also contain custom system parameters from previous configs using the chipset.
	$LF
]div
[div class=p 
	"For these reasons, 
	[b 
		[code 
			"flash.bin
		]code
		" should be deleted before starting a TAS
	]b
	". Failure to do this may result in desyncs. The Late 80s setup does not use this, but 
	[code 
		"flash.bin
	]code
	" can be found in 
	[code 
		"~/.pcem/roms/pb570/
	]code
	" for the Early 90s setup and in 
	[code 
		"~/.pcem/roms/ga686bx/
	]code
	" for the Late 90s setup.
	$LF
]div
[div class=p 
	"If you use a verification movie to install your game, you can use the 
	[code 
		"flash.bin
	]code
	" that is generated from it, as long as we will be able to reproduce it.
	$LF
]div
[h3 id=LibtasSettings 
	" libTAS Settings
	$LF
]h3
[div class=p 
	"All settings from the 
	(__wikiLink|displaytext=general PCem guide|href=/EmulatorResources/PCem#UsingLibtasWithPcem)
	" apply
]div
