62
[div class=p 
	[b 
		"Screenshots
	]b
	" are arguably second only to 
	[a class=intlink href=/EncoderGuidelines 
		"encodes
	]a
	" in importance for a site publication - they are generally the first thing a viewer sees of a particular publication, well before watching it. As such, assigning quality screenshots to our publications is essential.
	$LF
]div
[div class=p 
	"This page explains how to:
	$LF
]div
[ul 
	[li 
		" Take screenshots from site-accepted emulators;
		$LF
	]li
	[li 
		" Convert them to the PNG file format, normally used for our screenshots; and
		$LF
	]li
	[li 
		" Make the resulting file as small as possible.
		$LF
	]li
]ul
[div class=toc 
	[ul 
		[li 
			[ul 
				[li 
					[a href=#SnapshotswhenusingWindows 
						" Snapshots when using Windows
						$LF
					]a
				]li
				[li 
					[a href=#SnapshotswhenusingLinux 
						" Snapshots when using Linux
						$LF
					]a
				]li
				[li 
					[a href=#SnapshotsfromdumpedAVI 
						" Snapshots from dumped AVI
						$LF
					]a
				]li
				[li 
					[a href=#ConverttoPNG 
						" Convert to PNG
						$LF
					]a
				]li
				[li 
					[a href=#Resolution 
						" Resolution
						$LF
					]a
				]li
				[li 
					[a href=#Minimizingthefilesize 
						" Minimizing the file size
						$LF
					]a
					[ul 
						[li 
							[a href=#General 
								" General
								$LF
							]a
						]li
						[li 
							[a href=#Windows 
								" Windows
								$LF
							]a
						]li
						[li 
							[a href=#Linux 
								" Linux
								$LF
							]a
						]li
						[li 
							[a href=#JPG 
								" JPG
								$LF
							]a
						]li
					]ul
				]li
			]ul
		]li
	]ul
]div
[h3 id=SnapshotswhenusingWindows 
	" Snapshots when using Windows
	$LF
]h3
[div class=p 
	[em 
		(__wikiLink|/TODO|TODO)
		": For each emulator specify what on screen items need to be taken off before taking the shot (frame counter, lag counter, messages, etc)
	]em
	$LF
]div
[div class=p 
	"Note: This information applies only to latest version of each emulator.  Make sure you acquire the 
	[a class=intlink href=/EmulatorResources 
		"latest version
	]a
	".
	$LF
]div
[div class= 
	[ul class=nav nav-tabs role=tablist 
		[li class=nav-item 
			[a class=active nav-link data-toggle=tab href=#tabs-836-0 
				"FCEU/FCEUX
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-1 
				"Snes9x
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-2 
				"Mupen64-rr
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-3 
				"Visual Boy Advance
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-4 
				"Desmume
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-5 
				"Gens
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-6 
				"FBA-rr
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-7 
				"Mednafen-rr
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-8 
				"PCEjin
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-9 
				"PCSX
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-10 
				"Dega
			]a
		]li
		[li class=nav-item 
			[a class=nav-link data-toggle=tab href=#tabs-836-11 
				"JPC-RR
			]a
		]li
	]ul
	[div class=tab-content 
		[div class=tab-pane active id=tabs-836-0 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey:  
					[em 
						"F12
					]em
					" 
					$LF
				]li
				[li 
					" Default directory 
					[em 
						".\snaps
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-1 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: 
					[em 
						"F12
					]em
					$LF
				]li
				[li 
					" Default directory: same directory as the ROM
					$LF
				]li
			]ul
			[div class=p 
				"There is a frame delay when pressing F12 and when Snes9x actually takes the screenshot. So if you want a screenshot on frame N, it must be paused displaying frame N-1 and polling for frame N. Then press F12, then frame advance, to capture the screenshot.
				$LF
			]div
		]div
		[div class=tab-pane fade id=tabs-836-2 
			[ul 
				[li 
					" JPG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".\ScreenShots
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-3 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: same directory as the ROM
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-4 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: none, you will have to specify when making the screenshot.
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-5 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: SHIFT + Backspace
					$LF
				]li
				[li 
					" Default directory: Same as the .exe
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-6 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".\screenshots
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-7 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".\snaps
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-8 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: same location as the .exe
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-9 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".\snap
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-10 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: F12
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".\shots
					]em
					$LF
				]li
				[li 
					" On-screen items to take off: uncheck menu items 
					[em 
						"Graphics->Show Button States
					]em
					" and 
					[em 
						"Graphics->Show Movie Frame Counter
					]em
					$LF
				]li
			]ul
		]div
		[div class=tab-pane fade id=tabs-836-11 
			[ul 
				[li 
					" PNG format
					$LF
				]li
				[li 
					" Default hotkey: p
					$LF
				]li
				[li 
					" Default directory: 
					[em 
						".
					]em
					$LF
				]li
			]ul
		]div
	]div
]div
[h3 id=SnapshotswhenusingLinux 
	" Snapshots when using Linux
	$LF
]h3
[div class=p 
	"In Linux, when you install Imagemagick, you can use 
	[tt 
		"import
	]tt
	" to
	$LF
	"take screenshots of any window. Example:
	$LF
]div
[pre 
	"import tmp.png
	$LF
]pre
[div class=p 
	"Then click the window to take screenshot from, and it beeps twice
	$LF
	"when the file is ready.
	$LF
	"You can also select a region from screen by pressing the button
	$LF
	"somewhere and dragging the cursor to mark the corners of the region.
	$LF
]div
[div class=p 
	"If you use KDE, there is a program which comes with most KDE installs called KSnapshot. It can take images from any window or area, take images on a timer, and remove window decorations automatically. Simply open it, and have it take a snapshot of the active window with the remove decorations box checked.
	$LF
]div
[div class=p 
	"The Gimp can also take screenshots (File -> Create -> Screenshot). Select "take screenshot of a single window" and uncheck "include window decoration".
	$LF
]div
[div class=p 
	"If your snapshots contains menubars and other irrelevant things,
	$LF
	"use an image manipulation program such as 
	[a class=extlink href=http://www.gimp.org/ rel=nofollow 
		"The GIMP
	]a
	$LF
	"to remove them.
	$LF
]div
[div class=p 
	"Note that the programs mentioned in this chapter can be used in Windows too.
	$LF
]div
[h3 id=SnapshotsfromdumpedAVI 
	" Snapshots from dumped AVI
	$LF
]h3
[div class=p 
	"This is a more unusual version of obtaining a screenshot and depends on the video codec you used to obtain your video dump; however, done right it is the easiest method of doing so, especially in cases where you are preparing to, or have, encoded the video.
	$LF
]div
[div class=p 
	"It is suggested that you dump the AVI to a lossless RGB based codec (Windows users can use the 
	[a class=extlink href=http://camstudio.org/CamStudioCodec14.exe rel=nofollow 
		"CamStudio
	]a
	" or 
	[a class=extlink href=http://lags.leetcode.net/codec.html rel=nofollow 
		"Lagarith
	]a
	" codecs, frequently used by our encoders; FFV1 can also be used if set to the BGR32 colorspace) and open the file in any player that can show the video in its original native resolution (for Windows users, VirtualDub is suggested).  Find a frame that is publishable quality, screencap the screen (or the frame if the player supports it), crop the result properly and save it as a PNG in your favorite image editor.
	$LF
]div
[hr 
]hr
[h3 id=ConverttoPNG 
	" Convert to PNG
	$LF
]h3
[div class=p 
	"BMP files should be converted into PNG format.  You can use 
	[tt 
		"bmp2png
	]tt
	" downloadable at: 
	[a class=extlink href=http://hp.vector.co.jp/authors/VA010446/b2p-home/index.html rel=nofollow 
		"http://hp.vector.co.jp/authors/VA010446/b2p-home/index.html
	]a
	", or you can use an image manipulation program such as 
	[a class=extlink href=http://www.gimp.org/ rel=nofollow 
		"The GIMP
	]a
	".
	$LF
]div
[div class=p 
	"If you are going to optimise your screenshot, however, leave it as a BMP; PNGOUT is perfectly capable of reading BMP files (see below).
	$LF
]div
[hr 
]hr
[h3 id=Resolution 
	" Resolution
	$LF
]h3
[div class=p 
	"The screenshots must be of certain resolution (depending on the system).
	$LF
]div
[div class=p 
	"Admin-level users have an option to override these resolution limits (for games that have odd resolutions, for multi-runs, etc...)
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"System
			]th
			[th 
				"Resolution
			]th
			[th 
				"Alternative
			]th
		]tr
		[tr 
			[td 
				"NES/FDS/SNES/SGB
			]td
			[td 
				"256*224
			]td
			[td 
				"256*240
			]td
		]tr
		[tr 
			[td 
				"N64
			]td
			[td 
				"320*240
			]td
			[td 
				"320*224
			]td
		]tr
		[tr 
			[td 
				"GC/Wii
			]td
			[td 
				"320*240
			]td
			[td 
				"384x216
			]td
		]tr
		[tr 
			[td 
				"VBoy
			]td
			[td 
				"384*224
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"GB/GBC
			]td
			[td 
				"160*144
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"GBA
			]td
			[td 
				"240*160
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"DS
			]td
			[td 
				"256*384
			]td
			[td 
				"256*192
			]td
		]tr
		[tr 
			[td 
				"SMS
			]td
			[td 
				"256*192
			]td
			[td 
				"256*224
			]td
		]tr
		[tr 
			[td 
				"Genesis/SegaCD/32X
			]td
			[td 
				"320*224
			]td
			[td 
				"320*240
			]td
		]tr
		[tr 
			[td 
				"Saturn
			]td
			[td 
				"320*240
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"GG
			]td
			[td 
				"160*144
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"PSX
			]td
			[td 
				"320*240
			]td
			[td 
				"320*224
			]td
		]tr
		[tr 
			[td 
				"PCE/PCECD/PCFX
			]td
			[td 
				"256*224
			]td
			[td 
				"256*240
			]td
		]tr
		[tr 
			[td 
				"Lynx/WSWAN/NGP
			]td
			[td 
				"256*224
			]td
			[td 
				"256*240
			]td
		]tr
		[tr 
			[td 
				"Arcade
			]td
			[td 
				"384*224
			]td
			[td 
				"-
			]td
		]tr
		[tr 
			[td 
				"DOS
			]td
			[td 
				"320*200
			]td
			[td 
				"320*240
			]td
		]tr
		[tr 
			[td 
				"MSX/Windows
			]td
			[td 
				"320*240
			]td
			[td 
				"-
			]td
		]tr
	]tbody
]table
[hr 
]hr
[h3 id=Minimizingthefilesize 
	" Minimizing the file size
	$LF
]h3
[div class=p 
	"Presently, there is a limit of 45k for screenshot files - this is primarily because there are some movie list pages which display large numbers of screenshots, and those can take a long time and a large amount of bandwidth to display as it is.
	$LF
]div
[div class=p 
	"We generally prefer lossless screenshots, and the below techniques are usually sufficient to achieve file sizes well within the target range. For some systems (particularly 3D systems such as N64 and PSX) the images may be more complex than this; in those cases, we accept a certain degree of lossiness in screenshots. Historically, this has been in the form of JPEG screenshots saved with no subsampling and as high a quality setting as can be used while staying within that limit; more recently there has been an effort to use tools such as 
	[a class=extlink href=http://bisqwit.iki.fi/source/animmerger.html rel=nofollow 
		"Animmerger
	]a
	" to reduce the colour palette of the image while still preserving the benefits of PNG as an image format. It is recommended that you contact a publisher before resorting to these means.
	$LF
]div
[h4 id=General 
	" General
	$LF
]h4
[div class=p 
	"We use 
	[a class=extlink href=http://optipng.sourceforge.net/ rel=nofollow 
		"OptiPNG
	]a
	" (to ensure the minimum amount of colours are stored in the PNG's palette)  followed by 
	[a class=extlink href=http://advsys.net/ken/utils.htm#pngout rel=nofollow 
		"PNGOUT
	]a
	" to compress our PNG files.
	$LF
	"This algorithm outperforms programs such as 
	[a class=extlink href=http://advancemame.sourceforge.net/comp-readme.html rel=nofollow 
		"AdvPNG
	]a
	" in almost all cases.
	$LF
]div
[div class=p 
	"To get optimal compression, use several random trials (-r) and choose whichever result yields the smallest compression; the scripts and utilities below employ this approach.  Alternatively, you can try using the first 15 powers of 2 in the block split threshold (-b) option for your trials; however in practice this has yielded worse results.
	$LF
]div
[div class=p 
	[a class=extlink href=https://web.archive.org/web/20131208161446/http://walbeehm.com/download/index.html rel=nofollow 
		"DeflOpt
	]a
	" (
	[a class=extlink href=http://www.jonof.id.au/forum/index.php?topic=1400 rel=nofollow 
		"Linux/i386 version
	]a
	") can be used optionally at the end to reduce the file just those few bytes more (it almost always does).
	$LF
]div
[h4 id=Windows 
	" Windows
	$LF
]h4
[div class=p 
	"Download the 
	[a class=extlink href=http://adelikat.tasvideos.org/emulatordownloads/tastools/ScreenshotCompress.zip rel=nofollow 
		"ScreenshotCompressor
	]a
	" from our 
	[a class=extlink href=http://code.google.com/p/tastools/ rel=nofollow 
		"TASTools project page
	]a
	", in addition to OptiPNG, PNGOUT and DeflOpt.  Run your image through OptiPNG first, then follow the instructions packaged with the tool (it is as simple as drag and drop).  This will use a configurable number of random trials in the spirit of the script in the Linux section below.
	$LF
]div
[div class=p 
	"Optional reading:
	$LF
	"There exists a 
	[a class=extlink href=http://advsys.net/ken/util/pngout.htm rel=nofollow 
		"tutorial about PNGOUT
	]a
	$LF
	"for Windows users.
	$LF
]div
[h4 id=Linux 
	" Linux
	$LF
]h4
[div class=p 
	"Assuming you have 
	[tt 
		"optipng
	]tt
	", 
	[tt 
		"pngout
	]tt
	", and 
	[tt 
		"deflopt
	]tt
	" in your $PATH, you can run this shell script to compress pngs under Linux.  Utilizes several random trials to get the best possible compression, more trials = more compression, works best on 
	[b 
		"uncompressed
	]b
	" source bmps or png.):
	$LF
]div
[div class=p 
	"Run as:
	$LF
]div
[blockquote 
	" ./nameofscript.sh screenshot.png 100
	$LF
]blockquote
[div class=p 
	"where:
	$LF
]div
[ul 
	[li 
		" "screenshot.png" is the name of the screenshot you want to compress, and
		$LF
	]li
	[li 
		" "100" is the number of random trials you want to test.
		$LF
	]li
]ul
[pre 
	"#!/bin/bash
	$LF
	$LF
	"name=${1%.*}
	$LF
	"cp $name.png $name-best.png
	$LF
	"optipng $name-best.png
	$LF
	"for (
	[em 
	]em
	"(i=1; i<=$2; i++)
	[em 
	]em
	") 
	$LF
	"do
	$LF
	"  pngout -r -y $name.png $name-trial.png
	$LF
	"  DeflOpt $name-trial.png
	$LF
	"  du --bytes $name-best.png $name-trial.png | sort -n | awk 'BEGIN {ORS=" "} {print $2}' | xargs cp
	$LF
	"done 
	$LF
]pre
[div class=p 
	"Note that PNGOUT can read BMP files directly. You don't need to convert them first.  Also note that in some cases PNGOUT produces PNG files that don't work on all platforms (due to broken zlib implementations on those platforms); this is rare in practice.
	$LF
]div
[h4 id=JPG 
	" JPG
	$LF
]h4
[div class=p 
	"3D and other modern games usually have too complicated picture to fit into the 45kB limit allocated for a publication screenshot. This forces us to use JPG format instead of PNG, but still do some work to minimize the color loss.
	$LF
]div
[div class=p 
	"Load up the image in GIMP, export it to JPEG. Then set preview to on, chroma to 4:4:4 and DCT to floating-point and adjust the quality (usually to the maximum that gives under 45kB).
]div
