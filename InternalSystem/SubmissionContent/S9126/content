9
[div class=p 
	"Super Mario 64 DS is a remake of the original Super Mario 64. It features 30 new stars, redesigned courses, 4 unlockable characters and a complete visual overhaul.
	$LF
]div
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: DeSmuME 0.9.9
		$LF
	]li
	[li 
		" Advanced Bus-Level Timing OFF and Dynamic Recompiler OFF
		$LF
	]li
	[li 
		" Aims for fastest time
		$LF
	]li
	[li 
		" Uses death to save time
		$LF
	]li
	[li 
		" Takes damage to save time
		$LF
	]li
	[li 
		" Major skip glitch
		$LF
	]li
	[li 
		" Heavy glitch abuse
		$LF
	]li
	[li 
		" Genre: Platform
		$LF
	]li
]ul
[h3 id=GeneralComments 
	" General comments
	$LF
]h3
[div class=p 
	"This run is an improvement of 2 minutes and 30.65 seconds (9013 frames) over the previous published run. This TAS features a significant reroute caused by a glitch known as quantum tunneling, which allows the game to be beaten with 0 stars. When quantum tunneling was first discovered in 2021, a less optimized TAS was created with a time of 6:17.3, which was then gradually remade in the following years to create this TAS.
	$LF
]div
[div class=p 
	"Frame counts when comparing strategies will be given at 60 frames per second, although most of the important addresses for the game almost always update every 2 frames, giving a visual rate of 30 frames.
	$LF
]div
[div class=p 
	"Read the 
	(__wikiLink|displaytext=game resources page|href=/GameResources/DS/SuperMario64DS#GlitchesAndTricks)
	" for information about the glitches used.
	$LF
]div
[h3 id=QuantumTunneling 
	" Quantum Tunneling
	$LF
]h3
[div class=p 
	"The new glitch takes advantage of small gaps between collision triangles. These typically exist due to imprecise values for triangle coordinates. If the raycast for collision checking falls in a space between two triangles, the game can usually still detect the collision, by applying a 2-unit-wide buffer region around each triangle. However, if the raycast end is exactly inside the plane of both triangles, then collision won’t be detected because the ray end check is exclusive. Position for collision is rounded to 1/64 of a unit, so this glitch is precise up to at least 1/64 of a unit in the direction perpendicular to the surface. In extreme cases, there may be only a few points in the plane of both triangles where all three coordinates are a multiple of 1/64. This is the case for the first clip of the run, where there is exactly one working position.
	$LF
]div
[div class=p 
	"The game also checks for any collision within a 50 unit radius from the center of the player’s model. Therefore we need to have a speed of at least 50 units per frame perpendicular to the surface in order to successfully clip through. For clipping through floors, this means falling for long enough to build up -50 vertical speed (or ground pounding, but this restricts where you can land after clipping and wouldn’t work for any application in this run.) You can also clip through walls with high speed from a long jump. Mario’s top long jump speed is 54, but Yoshi’s is only 48, though fortunately this run only needs to clip through walls as Mario.
	$LF
]div
[div class=p 
	"Watch this video for a more detailed explanation:
	$LF
	(youtube|v=eZTXjn23XDs)
	$LF
]div
[h3 id=Routing 
	" Routing
	$LF
]h3
[div class=p 
	"The discovery of a useful out of bounds clip in the castle lobby allows both the character room and the 2nd key door to be accessed with no stars, removing the last remaining star requirements from this run. Quantum tunneling can also be used in other areas throughout the castle to quickly clip out of bounds, so can be used in other locations to further disrespect the game’s intended progression.
	$LF
]div
[div class=p 
	"This run features only two primary objectives: Unlocking Mario, and entering Bowser in the Sky to complete the game. Because neither Bowser in the Fire Sea or any of the basement’s quick stars are needed, this is the first Any% TAS of the game not to feature moat skip. Instead, tunneling is used to enter the castle’s locked front door from behind. Tunneling is then used to skip the 1 star door to enter the character room, followed by 8 star door skip, performed similarly to previous runs of this game. After unlocking Mario, 1 star door skip must be performed again to re-enter the character room to switch to Mario. The 1 star door locks from both sides, so we use the run’s first wall tunnel to perform reverse 1 star door skip, which is several seconds faster than entering and exiting the course from the Princess’ Secret Slide. The tunneling location used for 1 star door can then be used again to quickly perform 2nd key door skip. Another wall tunnel can be used to quickly clip out of bounds upstairs, from which a heaven's portal is used to quickly warp to the top of the endless staircase, and complete the run. 
	$LF
]div
[h3 id=StageByStageComparison 
	" Stage by stage comparison
	$LF
]h3
[table 
	[tbody 
		[tr 
			[th 
				"Stage
			]th
			[th 
				"Frames Saved
			]th
			[th 
				"Accumulated Frames Saved
			]th
		]tr
		[tr 
			[td 
				"Up to 1 Star Door
			]td
			[td 
				"6529
			]td
			[td 
				"6529
			]td
		]tr
		[tr 
			[td 
				"8 Star Door Skip
			]td
			[td 
				"26
			]td
			[td 
				"6555
			]td
		]tr
		[tr 
			[td 
				"Goomboss Battle
			]td
			[td 
				"22
			]td
			[td 
				"6577
			]td
		]tr
		[tr 
			[td 
				"Re-entering 1 Star Door
			]td
			[td 
				"-268
			]td
			[td 
				"6309
			]td
		]tr
		[tr 
			[td 
				"Characters’ Room
			]td
			[td 
				"550
			]td
			[td 
				"6859
			]td
		]tr
		[tr 
			[td 
				"2nd Key Door Skip
			]td
			[td 
				"806
			]td
			[td 
				"7665
			]td
		]tr
		[tr 
			[td 
				"Endless Stairs Skip
			]td
			[td 
				"1014
			]td
			[td 
				"8679
			]td
		]tr
		[tr 
			[td 
				"Bowser in the Sky (stage)
			]td
			[td 
				"288
			]td
			[td 
				"8967
			]td
		]tr
		[tr 
			[td 
				"Bowser in the Sky (fight)
			]td
			[td 
				"46
			]td
			[td 
				"9013
			]td
		]tr
	]tbody
]table
[h3 id=StageByStageComments 
	" Stage by stage comments
	$LF
]h3
[h4 id=EnteringTheCastle 
	" Entering the Castle
	$LF
]h4
[div class=p 
	"Hayashi found the tunneling spot on the roof of the castle. The fastest way to get there is to perform the same glitch as moat skip but then warp upwards instead of downwards. In 2020, Adeal found a faster moat skip method, by slidekicking from the top of the slope to the left of the waterfall instead of on the waterfall itself. In 2024, Rupa TASed the movement to reach this slope, and Adeal TASed the slidekick and upwarp. Adeal wrote a bruteforcer to achieve the perfect position to perform the clip, and TASed the movement afterwards. You need to have enough horizontal speed when clipping to reach the seam near the castle doors, but you need to have very low speed to land on the seam, since it is very narrow. Therefore, we ground pound to get 0 speed, and then long jump to the loading zone behind the doors.
	$LF
]div
[h4 id=1StarDoorSkip 
	" 1 Star Door Skip
	$LF
]h4
[div class=p 
	"Bobbybob was the first to prove 1 star door skip was possible in 2021. In 2022 he optimized the full segment. A sideflip from a particular point on the stairs is used to reach the exact Y position to perform the clip. Again we ground pound to land on the seam between the lobby and the Whomp’s Fortress room, and double jump to reach the loading zone behind the 1 star door, which Migu optimized. So far, 6521 frames are saved from skipping collecting 3 stars.
	$LF
]div
[h4 id=8StarDoorSkip 
	" 8 Star Door Skip
	$LF
]h4
[div class=p 
	"Rupa saved 26 frames by using Y run.
	$LF
]div
[h4 id=GoombossBattleStage 
	" Goomboss Battle (stage)
	$LF
]h4
[div class=p 
	"In 2021, Bobbybob suggested eating the lakitu to perform an egg reset and climb the vine faster, and use this egg in the fight instead of a goomba egg. Sharkey91 TASed this but it was not faster. Soon after, Really_Tall found the Sideways Long Jump technique in hopes of saving time with this strategy. It is most useful on slopes that you can’t long jump on when facing up the slope, but can long jump on when facing down the slope. There aren’t many of these in the game, but the bridge after the vine satisfies this condition. Migu TASed it and saved 14 frames, and Sharkey91 improved it by another 8 frames.
	$LF
]div
[h4 id=GoombossBattleFight 
	" Goomboss Battle (fight)
	$LF
]h4
[div class=p 
	"No time was saved, but Adeal added entertainment.
	$LF
]div
[h4 id=1StarDoorSkipAgain 
	" 1 Star Door Skip (again)
	$LF
]h4
[div class=p 
	"Time is lost compared to the previous run because we have to perform 1 star door skip again. The same technique is used and was TASed again by Bobbybob and Migu.
	$LF
]div
[h4 id=CharactersRoom 
	" Characters’ Room
	$LF
]h4
[div class=p 
	"We save time from not talking to the Toad, since the new Endless Stairs Skip doesn’t need a rabbit clip. The tunnel spot for Reverse 1 Star Door Skip was found by Hayashi, and Adeal’s bruteforcer found inputs to achieve the clip.
	$LF
]div
[h4 id=2ndKeyDoorSkip 
	" 2nd Key Door Skip
	$LF
]h4
[div class=p 
	"The tunnel spot for 1 star door skip is also best to use for the 2nd key door skip. Mario can reach the required Y position with a double jump, and can reduce speed to 0 by landing from a kick. Bobbybob TASed this section.
	$LF
]div
[h4 id=EndlessStairsSkip 
	" Endless Stairs Skip
	$LF
]h4
[div class=p 
	"In 2021, Really_Tall found that it was faster to do long jumps up the stairs instead of just running. This also made it faster to charge Y run at the beginning. Migu TASed the spiral staircase movement. Hayashi found the tunnel spot in the pillar wall. Bobbybob found a Heaven’s Portal out of bounds behind the Wet-Dry World painting which warps you up to the stairway to Bowser in the Sky, past the teleporter that checks if you have 80 stars. Hayashi theorized combining the wall tunnel with this Heaven’s Portal to perform Endless Stairs Skip. There is only a small area of floor out of bounds behind the pillar, so the tunnel needs to be performed late in the long jump, almost before landing. Bobbybob found the setup to do this tunnel, and it was improved by Adeal with the bruteforcer. Sharkey91 and Bobbybob TASed the Heaven’s Portal and movement to enter Bowser in the Sky.
	$LF
]div
[h4 id=BowserInTheSkyStage 
	" Bowser in the Sky (stage)
	$LF
]h4
[div class=p 
	"In 2021, Adeal and Really_Tall discovered that it is barely possible to do a triple jump with Y run speed off the box, dive at the peak of the jump, and wall jump the wall of the platform above. The box first needs to be pushed because this moves the box up slightly. The starting vertical velocity of a jump is proportional to your speed, but if there is a large difference between your motion and facing angles when starting a jump, your horizontal speed is dramatically reduced, which is done here. Sharkey91 and Migu TASed the triple jump. Migu and Rupa TASed the movement up the rotating elevator. This saved 96 frames in total.
	$LF
]div
[div class=p 
	"Coming from this direction, it became faster to activate the staircase which makes it possible to do a strat that was theorized while making the previous run. We can do another low-speed triple jump from the top of the stairs and dive and wall jump off the side of the arrow platform, instead of landing on the checkerboard platform as in the previous run. This was TASed by Migu and saved an additional 182 frames. Afterwards, Migu found a way to land and double jump immediately after the first jump on the stone walkway, which was 10 frames faster than the previous method of cutting the double jump short.
	$LF
]div
[h4 id=BowserInTheSkyFight 
	" Bowser in the Sky (fight)
	$LF
]h4
[div class=p 
	"In 2021, Really_Tall managed to initially grab Bowser 16 frames faster than before. In 2023, Migu saved an additional 28 frames by optimizing the rest of the fight. In 2024, Adeal saved 2 frames at the end by minimizing the amount of time it takes for Mario to look at Bowser.
	$LF
]div
[h3 id=SpecialThanks 
	" Special Thanks
	$LF
]h3
[div class=p 
	"Extra special thanks to Hayashi for figuring out the details of tunneling, helping us understand it, and finding tunneling spots.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/nymx 
		"nymx
	]a
	": Claiming for judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/nymx 
		"nymx
	]a
	": Wow...I have to join in with all the others and agree that this was a fantastic effort. So the deal with the delay on this came from finishing up my review on 
	(__wikiLink|href=/9122S|implicitdisplaytext=9122S)
	". Sorry about that...but here I am! :)
	$LF
]div
[div class=p 
	"So, this doesn't disappoint and has a lot of tech involved. All I can say is that a 2 minutes and 30 seconds is a shocking cut over the previous TAS. It was quite enjoyable to watch all the craziness in trying to bypass doors and gaining access to areas that were intended so early. Congratulations on this effort!
	$LF
]div
[div class=p 
	"In all my judging time, I have only suggested a "Start" for one other game... 
	(__wikiLink|href=/5656M|implicitdisplaytext=5656M)
	", which was accepted. I'm going to make the same suggestion for this TAS, for our senior staff to consider. Zero stars? Nah...it deserves one. :P
	$LF
]div
[div class=p 
	"Accepting over 
	(__wikiLink|href=/3370M|implicitdisplaytext=3370M)
	", with hopes of a Star!
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Processing...
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": 
	(__wikiLink|displaytext=Replacing the movie|href=/Forum/Posts/530039)
	".
]div
