4
[div class=p 
	[a class=intlink href=/Users/Profile/sobble_p 
		"sobble_p
	]a
	" completes the Flash version of A Koopa's Revenge as fast as possible in 09:26.800s. "For years the Mario Bros. & company have been stepping on koopas and goombas. Now it's time for one koopa to get revenge. Play through 16 intense levels to achieve your goal of rescuing your goomba friends and getting revenge on Mario."
	$LF
]div
[h3 id=EmulatorAndSwfInformation 
	" Emulator and SWF Information
	$LF
]h3
[ul 
	[li 
		" 
		[b 
			"Emulator used:
		]b
		" Ruffle nightly-2022_11_19-linux-x86_64 (through libTAS v1.4.4)
		$LF
	]li
	[li 
		" 
		[b 
			"Emulator operating system:
		]b
		" Ubuntu 22.04 LTS (libTAS ran through the terminal.)
		$LF
	]li
	[li 
		" 
		[b 
			"Emulator configuration:
		]b
		" libTAS > General options > Frames per second > 
		[b 
			"set to 20 / 1
		]b
		". Runtime > Time Tracking > 
		[b 
			"enable only clock_gettime() monotonic
		]b
		". Use this URL Spoof in the command-line to bypass site-lock: --spoof-url 
		[a href=https://lambta.co/shareswfs/sharekoopa1.swf rel=noopener external nofollow 
			"https://lambta.co/shareswfs/sharekoopa1.swf
		]a
		$LF
	]li
	[li 
		" 
		[b 
			"SWF MD5 hash:
		]b
		" 6fc67e06690d66fd98f49b61642cb28b
		$LF
	]li
	[li 
		" 
		[b 
			"SWF Source:
		]b
		" Download link to the game provided by the lambta.co webiste.
		$LF
	]li
]ul
[h3 id=GameObjectives 
	" Game Objectives
	$LF
]h3
[ul 
	[li 
		" Complete all 16 levels and make it to the end screen as fast as possible.
		$LF
	]li
]ul
[h3 id=Comments 
	" Comments
	$LF
]h3
[div class=p 
	"A Koopa's Revenge is a Flash game released in 2006 by Lambta.co to Newgrounds. You play as a Koopa in a mario-like platforming game. The game uses basic controls such as holding CTRL to run (or to shoot fire), pressing SPACE to jump (or hold with the feather power-up to fall slower), using ARROW KEYS to move, and UP to go through a door. The Koopa has no momentum in his movement, as soon as you stop moving, Koopa completely stops. The game also runs at a solid 20 FPS, which means frame-perfect inputs are easier to perform for humans. Generally, this is a pretty simple game to TAS with a few glitches and exploits that save a little time. They are provided in more detail in the stage by stage comments below. Significant details will be elaborated on.
	$LF
]div
[h3 id=StageByStageComments 
	" Stage by stage comments
	$LF
]h3
[h4 id=BowserSCastleLevel1 
	" Bowser's Castle, Level 1
	$LF
]h4
[ul 
	[li 
		" First thing you will notice is a jump at the beginning. This is because every level starts with a jump input automatically. You will see in the same room I break through a breakable block a little weirdly to make it through a door. This is not a glitch and is intended to reach that location, the TAS just performs it very fast. 
		$LF
	]li
]ul
[h4 id=BowserSCastleLevel2 
	" Bowser's Castle, Level 2
	$LF
]h4
[ul 
	[li 
		" I damage boost through a thwomp to recollect a fire-flower so I don't have to wait for the thwomp. I jump in the door entrance leading to the last room with the three thwomps to jump over the wall and over them. This saves a little time as you don't have to wait for the fall at the beginning.
		$LF
	]li
]ul
[h4 id=BowserSCastleLevel3 
	" Bowser's Castle, Level 3
	$LF
]h4
[ul 
	[li 
		" Wario boss fight. I get in four hits on the first run cycle he does. Each boss takes five hits to defeat (not including the re-fights. Those takes three). After his fireball cycle I get in the last hit as fast as possible.
		$LF
	]li
]ul
[h4 id=MushroomForestLevel1 
	" Mushroom Forest, Level 1
	$LF
]h4
[ul 
	[li 
		" We get the feather powerup in this level. We wanna keep this for a very long time. The feather power-up makes you jump higher and fall slower (the slow falling amount can be controlled by how long you hold SPACE).
		$LF
	]li
]ul
[h4 id=MushroomForestLevel2 
	" Mushroom Forest, Level 2
	$LF
]h4
[ul 
	[li 
		" At the end for one frame, I die but still keep my power-up and life. This is because you can't lose your power-ups or lives after touching the flagpole at the end of a level, so I do it for entertainment.
		$LF
	]li
]ul
[h4 id=MushroomForestLevel3 
	" Mushroom Forest, Level 3
	$LF
]h4
[ul 
	[li 
		" Peach boss fight. First hit cycle, I get two hits on peach real quick. This fight is easier with the feather but its easy to lose it so we hit peach in certain ways to avoid getting hit. Second hit cycle, I get the first hit as early as possible to get three hits in, defeating her boss fight within two cycles.
		$LF
	]li
]ul
[h4 id=SkyMountainLevel1 
	" Sky Mountain, Level 1
	$LF
]h4
[ul 
	[li 
		" Nothing particularly significant to mention here. Pretty standard level besides skipping the bit wit the walls and moving platforms with the feather to save a few seconds.
		$LF
	]li
]ul
[h4 id=SkyMountainLevel2 
	" Sky Mountain, Level 2
	$LF
]h4
[ul 
	[li 
		" Very short level. That's it.
		$LF
	]li
]ul
[h4 id=SkyMountainLevel3 
	" Sky Mountain, Level 3
	$LF
]h4
[ul 
	[li 
		" I enter the first door by holding UP in front of it, allowing me to enter it without waiting for the moving platform. This saves a few seconds. Waluigi boss fight. I wait for an ice platform it to hit him. I bounce off him five times to chain hits. This can only be done with the feather power-up. At the end, I do a glitch where I jump over an invisible wall by getting the last jump off of Waluigi and using the height of the jump from him with the jump of the feather to make it over it, going out of bounds. You can see the sky mountain background if you fly long enough. Pretty funny. You don't die since the level ends automatically a little after the last hit.
		$LF
	]li
]ul
[h4 id=DryDesertLevel1 
	" Dry Desert, Level 1
	$LF
]h4
[ul 
	[li 
		" Nothing significant to mention here. Standard gameplay with things I've previously mentioned.
		$LF
	]li
]ul
[h4 id=DryDesertLevel2 
	" Dry Desert, Level 2
	$LF
]h4
[ul 
	[li 
		" In the room with the blue coin bridge that must be activated with a switch, I use a frame-perfect jump with the Feather to bypass the coin bridge. This saves I'd guess about 10 seconds.
		$LF
	]li
]ul
[h4 id=DryDesertLevel3 
	" Dry Desert, Level 3
	$LF
]h4
[ul 
	[li 
		" Luigi boss fight. Jump on him until he dies.
		$LF
	]li
]ul
[h4 id=MarioSCastleLevel1 
	" Mario's Castle, Level 1
	$LF
]h4
[ul 
	[li 
		" Nothing significant to mention here besides waiting for lava or obstacles to move.
		$LF
	]li
]ul
[h4 id=MarioSCastleLevel2 
	" Mario's Castle, Level 2
	$LF
]h4
[ul 
	[li 
		" Boss re-fights! Wario re-fight. I get all of my hits in the first cycle... even though his death animation plays in the first cycle, you still have to wait for his fireball attack. Damn. Peach re-fight. I get the two first hits on peach in the first cycle like last time. I finish her off in the second cycle. Waluigi re-fight. I bounce on his head until he dies... again. I go OOB again for the swag, the wall pushes you back in anyways. Luigi boss fight. Again, bounce on head 'til dead.
		$LF
	]li
]ul
[h4 id=MarioSCastleLevel3 
	" Mario's Castle, Level 3
	$LF
]h4
[ul 
	[li 
		" Mario. The final boss. First phase. This is mostly waiting for his hand animations so that you can hit his hands. Each hand takes five hits. Second Phase. Hit robot Mario's monster stomach. I nearly was able to get a two-cycle second phase fight but couldn't get the last hit on him unfortunately.
		$LF
	]li
]ul
[h3 id=OtherComments 
	" Other comments
	$LF
]h3
[div class=p 
	"I enjoyed TASing this game over the (roughly) week I was working on it. I hope you all enjoy watching it too! I was also glad to get a sub-10 run. I feel kinda embarrassed that I may have missed a few seconds wait for Waluigi in his first fight. This is mentioned in the possible improvements below. Besides that, I think it's a solid TAS.
	$LF
]div
[h3 id=PossibleImprovements 
	" Possible Improvements
	$LF
]h3
[ul 
	[li 
		" 
		[b 
			"The only big oopsie I possibly made is at the Waluigi boss fight where you don't have to wait for the ice platform. I noticed you could reach the hitbox for Waluigi in the re-fight without the platform but I'm not sure if you can in the original fight. Unfortunately by the time I noticed, it was already too late. It saves a couple seconds.
		]b
		$LF
	]li
	[li 
		" 
		[b 
			"Possibly getting a two-cycle second phase Mario boss fight.
		]b
		$LF
	]li
]ul
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Samsara 
		"Samsara
	]a
	": Claiming for judging. I've removed the "Current Patch" branch, as it isn't necessary with our game version system.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Samsara 
		"Samsara
	]a
	": Overall, the optimization looks good within the constraints of the game engine. The only thing that stood out to me was the final boss fight, which is slower than 
	[a href=https://www.speedrun.com/koopasrevenge1/run/yodx69dm rel=noopener external nofollow 
		"the RTA record
	]a
	" by a number of seconds, primarily due to the RTA run only needing two cycles of hits on the second phase as opposed to the TAS's three. This seems odd, as the TAS noticeably gets more hits on the body, but the RTA run still finishes faster. I won't claim to understand how Flash and Ruffle work, but I'll make an educated guess as to why this is happening: Ruffle.
	$LF
]div
[div class=p 
	"Out of curiosity, I also took a look at the fight in 
	[a href=https://www.speedrun.com/koopasrevenge1/run/zn8j77vz rel=noopener external nofollow 
		"the old patch WR
	]a
	", which also uses the same strategy and functions identically to the other RTA record (albeit with significantly better RNG). Other runs on SRC in both categories are identical in terms of the total number of hits on the body: 8. Even the runs that need 3 cycles still add up to a total of 8 hits on the body. Weirdly, there are a total of 12 hits in the TAS (judging from the number of jump sounds), so something is amiss here. Ruffle is known to have differences in collision detection from base Flash, and in 
	(__wikiLink|displaytext=at least one case|href=/7873S)
	" it makes RTA strategies in Flash impossible in Ruffle. Given that the main difference between the old and current patch seems to be the game's own collision detection being improved, this looks like the most likely case for the RTA WRs achieving a two cycle kill while the TAS can't. In that sense, I think this is acceptable. The """"worst case"""" scenario here is that this is proven wrong by an improvement, which is so far from actually being bad that it needs at least four sets of quotes around """"worst case"""" in order to accurately convey how """"bad"""" it is.
	$LF
]div
[div class=p 
	"There's also the matter of the RNG. The old patch WR gets a perfect second phase, resulting in a fight nearly 50 seconds faster than the TAS. I asked sobble_p if it was possible to manipulate the RNG mid run in any way, and 
	(__wikiLink|displaytext=the response was a resounding and wonderfully explained "no"|href=/Forum/Posts/518269)
	", saying the only known way of changing the RNG is to change the system time prior to starting the run, meaning the entire game would need to be replayed over and over with different system time settings to check whether or not the RNG lines up for the final fight, clearly the place where it matters the most. To me, this is far too much to require of any TASer. While it could save a full minute on a long fight, there's no guarantee that any randomly chosen system time will even guarantee a better result to begin with, and there's no way of knowing that this is the only 
	[em 
		"actual
	]em
	" way of changing the RNG. Once again, an improvement could prove this wrong, and once again, there is absolutely nothing wrong with that.
	$LF
]div
[div class=p 
	"With everything else in the run being as solid as it is, I see no reason to throw it to the wolves over the possible improvements. One may not even be possible on Ruffle, and the other looks unlikely to be realized without significantly more effort than we would ever require a TASer to go through. In my eyes, it's better to have this run than to not have it, so I think we're gonna have it. Accepting!
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/despoa 
		"despoa
	]a
	": Processing...
]div
