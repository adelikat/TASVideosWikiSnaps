7
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: BizHawk-2.8
		$LF
	]li
	[li 
		" Pay Moneybags
		$LF
	]li
	[li 
		" Get your money back
		$LF
	]li
]ul
[h3 id=AboutTheGame 
	" About the game
	$LF
]h3
[div class=p 
	"Spyro is trying his best to help a poor bear in need of money.
	$LF
]div
[h3 id=Comments 
	" Comments
	$LF
]h3
[h4 id=Moneybags 
	" Moneybags
	$LF
]h4
[div class=p 
	"Moneybags appears at 12 different locations, spread between 3 homeworlds and 4 realms, and he is asking between 100 and 1000 gems to unlock more or less useful things for Spyro. The total amount he asks for is 4100 gems, out of the 10000 available in the game. Once you defeat the final boss, you get back all the gems you gave him and he disappears from any of the 12 locations where you didn't pay him already (with all the things related to him unlocked).
	$LF
]div
[h4 id=Movement 
	" Movement
	$LF
]h4
[table 
	[tbody 
		[tr 
			[td 
				"Movement
			]td
			[td 
				"Speed
			]td
		]tr
		[tr 
			[td 
				"Proxy
			]td
			[td 
				"Up to 1000+
			]td
		]tr
		[tr 
			[td 
				"Charging
			]td
			[td 
				"243
			]td
		]tr
		[tr 
			[td 
				"Swiming
			]td
			[td 
				"222
			]td
		]tr
		[tr 
			[td 
				"Gliding
			]td
			[td 
				"199
			]td
		]tr
		[tr 
			[td 
				"Charging (in the air)
			]td
			[td 
				"191
			]td
		]tr
		[tr 
			[td 
				"Walking
			]td
			[td 
				"143
			]td
		]tr
	]tbody
]table
[h4 id=SpeedConservationAkaDoubleJumpProxySceneryProxy 
	" Speed conservation (aka double jump, proxy, scenery proxy, ...)
	$LF
]h4
[div class=p 
	"Under most circumstances, charging while in the air will keep Spyro's vertical speed at the moment of the charge with a slow deceleration. Other movements like jumping and hovering can also preserve horizontal speed. This is the basis of several glitches, including:
	$LF
]div
[div class=p 
	"Double jump: Charging at the top of a jump
	$LF
]div
[div class=p 
	"Proxy: Charging at the same frame Spyro is forcefully ejected from an object (usually a dead body) which he can't cross except when charging. The closer to the object, the faster the ejection
	$LF
]div
[div class=p 
	"Scenery proxy: Charging when the game reposition Spyro after he crosses a solid surface from out of bounds
	$LF
]div
[div class=p 
	"Sproderman: Charging when glidding close to a wall is giving you a positive vertical speed (right before the glide is forcefully interrupted because you gained too much height from it) to gain even more height and start gliding again
	$LF
]div
[h4 id=GemRoute 
	" The gem route
	$LF
]h4
[div class=p 
	"Each level contains 400 gems, and entering a new level has a loading times cost of 20-30 seconds, so the number of levels visited should be limited. There are 2800 total gems in the levels where Moneybags appears. The 4 speedways are by far the fastest levels to gather gems, as you can easilly get all 400 of them in under a minute. One of them is locked under a 6 orbs requirement, but there are enough of them close to our path for it to not be an issue.
	$LF
]div
[div class=p 
	"While these levels alone make the total gems available equal to 4400, missing only 300 of them would require to get a lot of out of the way gems, to the point where it is better to add an extra level instead of going for them. I chose Breeze Harbor for this as it is the level with the highest concentration of high value gems (35 blue, 15 yellow) while it also has a swim in the air glitch available.
	$LF
]div
[div class=p 
	"Picking the level in the first homeworld instead would have been great to not have to revisit it later, but I could not find an efficient way to do so.
	$LF
]div
[h3 id=StageByStageComments 
	" Stage by stage comments
	$LF
]h3
[h4 id=Glimmer 
	" Glimmer
	$LF
]h4
[div class=p 
	"Nothing special here, I went for the most direct route that didn't involve backtracking.
	$LF
]div
[h4 id=SummerForest 
	" Summer Forest
	$LF
]h4
[div class=p 
	"Sproderman to reach the first orb, followed by a scenery proxy to barely reach the Ocean Speedway portal.
	$LF
]div
[h4 id=OceanSpeedway 
	" Ocean Speedway
	$LF
]h4
[div class=p 
	"Final time is 42.53, best known time without superflame is 45.35 (RTA).
	$LF
]div
[h4 id=SummerForest_2 
	" Summer Forest
	$LF
]h4
[div class=p 
	"Second orb then out of bound into Crush.
	$LF
]div
[h4 id=Crush 
	" Crush
	$LF
]h4
[div class=p 
	"While the fight seems pretty straight forward, Crush angle was manipulated for him to do as little rotation as possible before moving to his next spot, saving a few frames ervey time, and resulting in a fight ~52 frames faster than in the current any% TAS
	$LF
]div
[h4 id=AutumnPlains 
	" Autumn Plains
	$LF
]h4
[div class=p 
	"With a double proxy (a frog ejecting Spyro into another frog), it's possible to reach an indecent amount of vertical speed, enough to reach the top of the level where some extra gems are waiting. The Gulp skip is very precise (literally pixel perfect on one of the 3 coordinates).
	$LF
]div
[h4 id=SolvingGulp 
	" (Solving) Gulp
	$LF
]h4
[div class=p 
	"Be it in RTA or TAS, Gulp has always been a pain to deal with due to the amount of RNG involved in his fight. 
	$LF
]div
[div class=p 
	"While he has 8 HP or more, 2 birds will drop one egg each at a random location, which will hatch a fixed item (10 HP = barel, 9 HP = bomb, 8 HP = rocket) after a random amount of time. Once his HP drops below 8, the pattern is similar, except that there are 3 birds and the item hatched is random for each egg.
	$LF
]div
[div class=p 
	"The optimal fight is 2 hits in one eggs rotation, then 2, 3 and 3. Since Gulp has some invulnerability frames between hits, so the absolute priority is to do the first hit of an egg rotationas as soon as possible, and then there is some leniency in the time frame you have to do the next ones.
	$LF
]div
[div class=p 
	"So I made a deeper analysis on how all these events are generated and the result are the following:
	$LF
]div
[div class=p 
	"1. Bird #1 (and Bird #3 if HP<8) is generated at a position based solely on camera position (he spawns behind Spyro) and at the same time the location where the egg will be dropped is randomly chosen between 25 different possible locations 
	$LF
]div
[div class=p 
	"2. Two frames later (60 FPS), Bird #2 is generated with the same logic 
	$LF
]div
[div class=p 
	"3. At the moment the bird drops his egg, the time for the egg to hatch is randomly chosen between 120 and 220 frames, and the item is randomly chosen (if HP<8)
	$LF
]div
[div class=p 
	"The time for a bird to drop an egg is deterministic and based only on his initial position (256 possible values), the drop location (25 possible values) and whether it's Bird #2 or not (as he is not following the same paths than Birds #1 and #3) for a total of 256 x 25 x 2 = 12800 different combinations to check. It ends up that among these, there are exactly 2 combinations which allow the egg to be dropped 137 frames after the Bird #1 is generated.
	$LF
]div
[div class=p 
	"Fastest drops for Birds #1 and #3 :
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://i.imgur.com/XVdsflK.png 
	]img
	$LF
]div
[div class=p 
	"Fastest drops for Bird #2 :
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://i.imgur.com/86eHYcb.png 
	]img
	$LF
]div
[div class=p 
	"So I went for this combination, manipulating the egg to hatch after 120 frames, and manipulating the other birds to drop their eggs on other close locations (and fast to reach for them). As such, this fight is more than 5 seconds faster than the current any% TAS.
	$LF
]div
[h4 id=WinterTundra 
	" Winter Tundra
	$LF
]h4
[div class=p 
	"I made a detour to get the superflame power-up in Dragon Shores. In the any% it isn't done because Ripto is still sligthly faster overall without the detour, but here since I have other levels to do (in particular speedways), it is worth to take it.
	$LF
]div
[h4 id=CanyonSpeedway 
	" Canyon Speedway
	$LF
]h4
[div class=p 
	"Final time is 25.30, best known time is 26.70 (RTA).
	$LF
]div
[h4 id=WinterTundraSummerForest 
	" Winter Tundra + Summer Forest
	$LF
]h4
[div class=p 
	"Getting the remaining gems on unexplored areas then warping back to Summer Forest.
	$LF
]div
[h4 id=AquariaTowers 
	" Aquaria Towers
	$LF
]h4
[div class=p 
	"Lot of possible gems routes here, mostly limited by the fact that paying Moneybags teleport you further forward in the level.
	$LF
]div
[h4 id=BreezeHarbor 
	" Breeze Harbor
	$LF
]h4
[div class=p 
	"While in the swim in the air glitch, the game will softlock if Spyro is hit by any enemy.
	$LF
]div
[h4 id=AutumnPlains_2 
	" Autumn Plains
	$LF
]h4
[div class=p 
	"Another double frog proxy to reach the island with the 6th orb and 75 gems.
	$LF
]div
[h4 id=MetroSpeedways 
	" Metro Speedways
	$LF
]h4
[div class=p 
	"Final time is 28.00, best known time is 28.06 (TAS).
	$LF
]div
[h4 id=MagmaCone 
	" Magma Cone
	$LF
]h4
[div class=p 
	"Different routes possible, I went for the one which seemed the faster to get exactly 200 gems, as it's the last moment when I had some leeway about which gem to take or not.
	$LF
]div
[h4 id=IcySpeedway 
	" Icy Speedway
	$LF
]h4
[div class=p 
	"Final time is 30.36, best known time is 37.63 (RTA).
	$LF
]div
[h4 id=WinterTundra_2 
	" Winter Tundra
	$LF
]h4
[div class=p 
	"After unlocking the door with an headbash, you have a short time window when you can get a proxy, I used it to reach the pengouin faster.
	$LF
]div
[h4 id=Ripto 
	" Ripto
	$LF
]h4
[div class=p 
	"Phases 1 and 2 are trivial with the superflame. Phase 3 however is weird and I still can't really figure out what the faster strat is supposed to be. This version of phase 3 is 1.5s faster than the current any% TAS.
	$LF
]div
[h3 id=SpecialThanks 
	" Special thanks
	$LF
]h3
[div class=p 
	"Moneybags for sponsoring this TAS (probably).
	$LF
]div
[h3 id=PossibleImprovements 
	" Possible improvements
	$LF
]h3
[div class=p 
	"Better gem route (I know, shocking).
	$LF
]div
[h3 id=SuggestScreenshot 
	" Suggest screenshot :
	$LF
]h3
[div class=p 
	"frame 4999 or 5006
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": Claiming 
	[del 
		"for judging
	]del
	" money back. Or do I?
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": This is an interesting idea for a new movie goal, and I really like the spirit of innovation of it. The goal set by the author is to pay all the Moneybags services available in the game, and then beating the final boss. It's just as simple as that, and results in middle ground between fastest-completion and full-completion. Really cool!
	$LF
]div
[div class=p 
	"Accepting as a new Alternative branch.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Processing...
]div
