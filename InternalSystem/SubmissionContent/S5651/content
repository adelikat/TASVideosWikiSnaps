7
[p 
	"Pitfall: the Mayan Adventure is a sequel to the Atari Pitfall game. It was ported on several systems, including the Sega Genesis, PC and the Gameboy Advance. It features Harry Pitfall, a sort of Indiana Jones wannabe, who ventures on a quest to rescue his father (who turns out to be none other than the Atari Pitfall himself). 
	$LF
]p
[pre 
	$LF
]pre
[h3 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: BizHawk 1.11.9.1
		$LF
	]li
	[li 
		" Aims for fastest time
		$LF
	]li
	[li 
		" Takes damage to save time
		$LF
	]li
	[li 
		" Abuses programming errors 
		$LF
	]li
	[li 
		" Destroys wildlife to save a pixelated dad
		$LF
	]li
]ul
[p 
	"Here is an encode of the run:
	$LF
	(youtube|v=ArbdGIcQfxw)
	$LF
]p
[h3 
	" Comments
	$LF
]h3
[p 
	"As far as I know, the SNES version is the only one where you can skip two bosses (it is fairly easy to do, even in real-time runs), making it a good candidate for a speedrun. I am an RTA speedrunner of this game and I've come up with some improvements to the currently published movie. This is a really short and fast-paced game so I hope you'll enjoy it!
	$LF
]p
[h4 
	" General knowledge and speed tricks
	$LF
]h4
[ul 
	[li 
		" 
		[b 
			"Frame rate:
		]b
		" This game only accepts input every other frame, so you can only implement 30 inputs per second. Therefore, any timesave will be a multiple of 2 frames most of the time, except if lag is involved.
		$LF
	]li
	[li 
		" 
		[b 
			"Movement:
		]b
		" When running at top speed on the ground, Harry moves by 7 pixels every two frames. But when jumping forward at top speed, his movement will only be 7 the first two frames, then 6 the next two frames, then 7, 6 and so on. It is not obvious at all when watching a run but jumping always wastes a little bit of time compared to running on flat ground, so one of the major speed strategies is to try to limit air time and spend as much time as possible running on the ground. It is also possible to reduce the height of your jumps by using the whip at the right time, which can save frames in some occasions (especially when using the magic pepper). Whipping in mid-air can also prevent landing animations which are quite costly.
		$LF
	]li
	[li 
		" 
		[b 
			"Damage:
		]b
		" There is no knockback of any kind when Harry receives damage from most enemies (a few damage sources do cause knockbacks though, so those have to be avoided). So it is often faster to simply run into an enemy you can't kill rather than jumping over him, because of the movement point discussed above.
		$LF
	]li
	[li 
		" 
		[b 
			"Climbing:
		]b
		" There is a lot of ropes and vines that Harry can climb on. Climbing normally is pretty slow, but if you constantly jump off the rope and catch it again you will climb much faster. I discovered that jumping on the left side enables Harry to catch the rope 2 frames earlier than on the right side, for some reason. That's why I always jump on the left side.
		$LF
	]li
	[li 
		" 
		[b 
			"Diving:
		]b
		" When you press Down, B and the direction Harry is facing (Left or Right), Harry will dive to the ground and start crawling. A few crawlspaces in the game can only be entered this way. However, if you dive just before a cliff, Harry will start rolling in the air and won't crawl upon landing; the dive will grant him an extra boost of forward speed (8 pixels every two frames during several frames). Whenever you have to jump down a cliff, the diving method can be very handy if you need to maximise forward momentum. Although, if you need to favor vertical speed, jumping prior to the cliff might end up being the fastest solution. Diving can also be used before entering any kind of side door (usually to exit a level) and can sometimes save a few frames. Finally, in the levels where Harry starts in mid-air (Tazamul Mines, Yaxchilan Lagoon and Warrior Spirit), you can buffer a dive which will give you a really nice speed boost. 
		$LF
	]li
	[li 
		" 
		[b 
			"Magic Pepper:
		]b
		" This item can be found in a few places. It greatly increases Harry's top speed and jumping height for a short amount of time, which makes it a nice pickup. It is used at the end of Xibalba Falls and Lost City of Copan. Whipping when jumping is often useful when using this item to make sure Harry goes back onto the ground sooner, for maximum movement optimization. Make sure you don't use diving with this item because that would make Harry slower (the pepper improves Harry's jumps and normal running speed, but not the diving speed).
		$LF
	]li
	[li 
		" 
		[b 
			"Health:
		]b
		" Harry's health is represented by the crocodile's animation in the upper right corner of the HUD. He has 150 HP, and hearts give back 25. Enemies will typically deal 10 HP of damage, spiders will do 12, fire hazards will do around 25, and damage can go up to 64 from the rolling minecarts at the end of Tazamul Mines.
		$LF
	]li
	[li 
		" 
		[b 
			"Weapons:
		]b
		" Whip and Stones do 10 points of damage, Boomerangs do 30 and Explosive Stones do 50 to all enemies around. There is also a Super Stone cast attack (performed by holding Y) which does 21 damage, but it is not used in the run. Most small enemies like monkeys or bats can be killed in one stone. The Cheetah in the first level has 250 HP and the final boss has 500.
		$LF
	]li
	[li 
		" 
		[b 
			"Difficulty:
		]b
		" This game has a hard mode which, as far as I know, does only one thing: it makes Harry's attacks do one fewer point of damage. Therefore, in Hard mode, Whip and Stones do 9 damage, Boomerangs do 29, Explosives do 49 and Super Stones do 20. I am not playing Hard mode mostly because the currently published movie doesn't either, and honestly, it would just make the TAS slightly slower without any added value (slightly longer boss fights, monkeys dying in 2 hits instead of one, snakes stunned in 3 hits instead of 2, which wouldn't make much of a difference).
		$LF
	]li
	[li 
		" 
		[b 
			"RNG:
		]b
		" A lot of enemies behave quite randomly, and I'm pretty sure RNG is bound to the frame when decisions are made. The only thing worth manipulating though is the final boss, where I managed (by trial and error) to get some pretty good patterns. 
		$LF
	]li
]ul
[h4 
	" Glitches
	$LF
]h4
[ul 
	[li 
		" 
		[b 
			"Lost City of Copan wallclip:
		]b
		" I discovered that by accident. Just after the first bouncing tongue, there is a spot where you can clip through the floor and save about 26 seconds. It requires a pixel-perfect vertical position and a specific speed to work. It is quite precise but fairly doable in real time. Interestingly, the Genesis TAS also clips through the same wall but with a completely different method.
		$LF
	]li
	[li 
		" 
		[b 
			"Temple of Copan trap doors:
		]b
		" Near the end of the stage, you are supposed to open trap doors on the ground using switches. But if you go fast enough, the final two trap doors can be clipped through without using the corresponding switches. I don't know why this works but it requires to be really fast (I didn't manage to reproduce this in RTA). I suppose that the game didn't have time to load whatever sprite is needed to keep the trap door closed.
		$LF
	]li
	[li 
		" 
		[b 
			"Diving start:
		]b
		" I've mentioned this above in the Diving point. You can buffer the diving inputs at the start of each level, so you can benefit from the dive's speed boost in the levels where you start in mid-air.
		$LF
	]li
	[li 
		" 
		[b 
			"Continue glitch:
		]b
		" This is not used in the run but it is SO STUPID that I can't resist mentioning it. If you lose all your lives, you'll go to the continue screen. If you press Start, you'll continue the game and lose a continue... but you can actually press Start multiple times, which will make you lose several continues; and you can underflow your number of continues (you probably get something like 255 or 65535)! Free unlimited continues!
		$LF
	]li
]ul
[h3 
	" Stage by stage comments
	$LF
]h3
[h4 
	" Level 1: Ceiba Jungle
	$LF
]h4
[p 
	"A few seconds into the run, I get hit by the warthog because I can't kill it fast enough and it is always faster to stay on the ground than to jump (see the Movement point above). At the upper left part I have to wait for a swinging vine cycle because I couldn't make the previous cycle, so I try to be a bit entertaining to pass the time. You can see diving being used in several places to pass doors more quickly, or drop quickly on the last cobweb. I also sometimes use the whip while jumping on the last tree branches which saves a couple frames.
	$LF
	"The Cheetah fight was very interesting to optimise. It is invincible at the start of the fight, so while I wait I damage myself on it so that I don't get knocked out by its first jump attack. I use all three explosives and two boomerangs, as well as several stones. Jumping can reduce the attack cooldown after throwing a boomerang, so I can chain more quickly with an explosive or stones. I'm pretty happy with how quick this fight looks.
	$LF
]p
[h4 
	" Level 2: Xibalba Falls
	$LF
]h4
[p 
	"I had to align myself on the correct pixels to get the two dives on the platforms near the start. I could have killed the monkey on the vine but there was no way to do it without losing time, so I just took the damage. In this level I abuse of two unintended shortcuts. Getting the Magic Pepper at the end costs time, but it gives me so much speed that it is worth the extra time. I do not dive into the ending door because that is slower when you have the Magic Pepper.
	$LF
]p
[h4 
	" Level 3: Tazamul Mines
	$LF
]h4
[p 
	"I start this level with a dive buffer which saves 8 frames.When riding the skateboards, you only need to press forward until you reach top speed; after that you don't need to press anything. I take a hit from a spider because avoiding the damage would have cost at least two frames. After the switch, the jump I do into the final area is pretty precise; I turnaround in mid-air in such a way that I am inside the wall for a brief moment (it is not really visible though). That technique makes the jump better than a dive for this specific part.
	$LF
]p
[h4 
	" Level 4: Lost City of Copan
	$LF
]h4
[p 
	"I glitch through a wall in the beginning, which cuts a large part of the level (about 26 seconds saved). You can see that this messes up the perspective in some cases: Harry passes in front of some foreground objects while he is supposed to pass behind them. Unfortunately, I have to wait quite a bit at the alternating platforms because I didn't get to them on a good cycle (they actually are based on a timer for the whole game, not just a global level timer). The Magic Pepper makes me able to jump over the boss trigger and reach the exit immediately. 
	$LF
]p
[h4 
	" Level 5: Copan Temple
	$LF
]h4
[p 
	"I receive quite a lot of damage in this level; the fire hazards deal a lot especially. There is a lot of places where I had to care about vertical optimization, so I was constantly testing whether a jump or a dive was better. The answer was often surprising. I manage to clip through the last two trap doors which I was supposed to open via the two switches. I didn't know that was possible before I tested it. The Genesis TAS goes through a certain wall, but I didn't find a way to replicate that on the SNES version.
	$LF
]p
[h4 
	" Level 6: Lakamul Rain Forest
	$LF
]h4
[p 
	"Getting the early cycle of the second swinging vine is pretty difficult in RTA, but no problem for a TAS. I cast two stones to stun a snake so I can use it as a rope. I climb the rope just enough so I can get on the tree branches with a jump, by taking advantage of the tiny slopes and bumps of those branches. I have to go far enough to the right before the game lets me get on top of the stump which launches me into the air, that's why I do this little back and forth movement.
	$LF
]p
[h4 
	" Level 7: Yaxchilan Lagoon
	$LF
]h4
[p 
	"The dive buffer saves a lot of time here because it cuts down a lot of slow sliding time. I let go of the red elastic vine at the right time to only have to hook on the top horizontal vine three times instead of four (it is quite precise). After that, I whip during my fall to avoid Harry's landing animation. I take a lot of damage here, but fortunately I have enough health to survive the rest of the game. The currently published TAS goes through a different route and picks up the Magic Pepper, which is a cool-looking route but slower than the simpler, more straightforward route that I use.
	$LF
]p
[h4 
	" Level 8: Runaway Mine Car
	$LF
]h4
[p 
	"Warning: autoscroller! There is no randomness at all in this level. I try to make it entertaining by pressing Select and moving to the music, and by putting Harry in a lot of close call situations. I get hit by a ghost near the end to save a frame of lag; ghosts just put you off-balance for a bit of time, which rarely matters in this level.
	$LF
]p
[h4 
	" Level 9: Tikal Ruins
	$LF
]h4
[p 
	"The swamp ponds are weird: I'm not exactly sure but I think that the higher you fall from, the deeper you go into the swamp, and the more B inputs you need to get out of it. That made it pretty difficult to determine the optimal path through them. I get really lucky with the global timer there and did not have to wait at all at the first set of alternating platforms. And I also managed to be fast enough to barely make the quick cycle of the next set. I had some trouble reducing lag in the part with the tongue jumps. I skip the boss here too, but with a different method than in Lost City of Copan: I just jump into the boss trigger but immediately jump off, onto the last tongue. This is fairly easy to do, even in RTA.
	$LF
]p
[h4 
	" Level 10: Temple of Tikal
	$LF
]h4
[p 
	"This level has a lot of swaying spiked balls which require me to wait a tiny bit, otherwise I get knocked out. On the first river part, I try to take advantage of the moving platforms as much as possible. I also discovered a little skip before the door, which is quite finicky to get. I have to do the opposite in the second river part: this time the platforms are moving the wrong way, so I have to jump as much as possible and walk as little as possible. That part is also quite laggy, but there's not much I can do about that. The last part with the hidden rope has some lag that I managed to avoid though. I quickly dive after hitting the last switch for optimal movement; I don't even take the explosive stones since I don't need them.
	$LF
]p
[h4 
	" Level 11: Warrior Spirit
	$LF
]h4
[p 
	"I am not completely satisfied with what I got here, but there are so many possibilities (with the boss's RNG depending on several factors, including your position and his health) and so much lag going on that I didn't really want to spend too much time testing things out here. I manage to make the boss move very little, and I even despawned one of this fists, so I could just sit there and throw stones longer. I kill him just after receiving his punch, which is a pretty cool ending. The explosives have a lot of cool down time so I cast a few stones in-between. I still feel that this fight could be ideally faster.
	$LF
]p
[h3 
	" Possible improvements
	$LF
]h3
[p 
	"I think the final boss fight is the only potentially important timesave if someone really wants to spend time getting an ideal fight. Apart from that, I probably lost some frames here and there, but I think I did a decent job at general optimization. I also wonder if there are other wallclips or similar large skips we still haven't discovered.
	$LF
]p
[p 
	[em 
		"Suggested screenshots:
	]em
	" 4722, 16824 and 36214
	$LF
]p
[p 
	"Enjoy the run!
	$LF
]p
[hr 
]hr
[p 
	[a class=intlink href=/Users/Profile/Masterjun 
		"Masterjun
	]a
	": Judging.
	$LF
]p
[p 
	[a class=intlink href=/Users/Profile/Masterjun 
		"Masterjun
	]a
	": Wow, this has a lot of optimizations all over the place, and add a lot of entertaining touches here and there. A great TAS for this fast-paced game!
	$LF
]p
[p 
	"Accepting to Moons as an improvement to the 
	[a class=intlink href=/1253M 
		"previous run
	]a
	".
	$LF
]p
[p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Pub.
]p
