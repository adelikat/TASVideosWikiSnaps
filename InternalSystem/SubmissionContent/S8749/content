8
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: BizHawk 2.9.1 (SubNesHawk core)
		$LF
	]li
	[li 
		" Aims for fastest time
		$LF
	]li
	[li 
		" Uses hardest difficulty
		$LF
	]li
	[li 
		" Manipulates luck
		$LF
	]li
]ul
[div class=p 
	"This submission improves 
	(__wikiLink|displaytext=the previous run|href=/4986S)
	" by about 15.8s.
	$LF
]div
[h3 id=Comments 
	" Comments
	$LF
]h3
[div class=p 
	"I saw 
	(__wikiLink|displaytext=MESHUGGAH's post|href=/Forum/Posts/508459)
	" and 
	(__wikiLink|displaytext=his WIP|href=/Userfiles/Info/6679761040043330)
	", and I decided to try improving the previous movie.
	$LF
]div
[div class=p 
	"Every block chunk is determined by the value of address $98, and this value depends on the RNG.
	$LF
	"The RNG depends on CPU cycles, and every frame this game polls input twice (to avoid the 
	[a href=https://www.nesdev.org/wiki/Controller_reading#DPCM_conflict rel=noopener external nofollow 
		"DPCM glitch
	]a
	"). So, you can manipulate the RNG with subframe inputs. That's why I used SubNesHawk core.
	$LF
]div
[div class=p 
	"In this run, basically, block chunk 0x09 and 0x00 appear alternately.
	$LF
	"Block chunk 0x00 doesn't contain any block, but it doesn't appear continuously.
	$LF
]div
[div class=p 
	"I 
	[a href=https://gist.github.com/taotao54321/146d584ce44f4a2e73e50ac7ca4a0717 rel=noopener external nofollow 
		"put
	]a
	" a script for block chunk manipulation.
	$LF
	"This script takes an input sequence (you can copy-paste it from TAStudio), and mutates it to manipulate a block chunk.
	$LF
]div
[div class=p 
	"I made a romhack for route planning. In the romhack, block chunk 0x09 and 0x00 always appear alternately.
	$LF
	"I 
	[a href=https://gist.github.com/taotao54321/a63bcfe4dd09a653de5a3e87711a4888 rel=noopener external nofollow 
		"put
	]a
	" the romhack patch and a testrun on the romhack.
	$LF
]div
[div class=p 
	"There might still be a small room of micro-optimizations, but anyway I did my best.
	$LF
]div
[div class=p 
	"Note about the "E" item:
	$LF
	"I haven't thoroughly analyzed this game, but I think you probably have to erase 3 or more blocks at once 3 times in order to obtain the "E" item. (See the code near $A799)
	$LF
]div
[div class=p 
	"Here is a memory map:
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"addr
			]th
			[th 
				"type
			]th
			[th 
				"description
			]th
		]tr
		[tr 
			[td 
				"$71
			]td
			[td 
				"u8
			]td
			[td 
				"scroll subpixel
			]td
		]tr
		[tr 
			[td 
				"$78
			]td
			[td 
				"u8
			]td
			[td 
				"wait timer for player1 movement
			]td
		]tr
		[tr 
			[td 
				"$79
			]td
			[td 
				"u8
			]td
			[td 
				"wait timer for player2 movement
			]td
		]tr
		[tr 
			[td 
				"$98
			]td
			[td 
				"u8
			]td
			[td 
				"block chunk ID
			]td
		]tr
		[tr 
			[td 
				"$FC
			]td
			[td 
				"u8
			]td
			[td 
				"PPU scroll y
			]td
		]tr
		[tr 
			[td 
				"$0460-$06CF
			]td
			[td 
				"u8[24 * 26]
			]td
			[td 
				"board (24 columns, 26 rows)
			]td
		]tr
	]tbody
]table
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/nymx 
		"nymx
	]a
	": Claiming for judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/nymx 
		"nymx
	]a
	": I checked with our staff, and it appears that there is no problem with the submitted file...even though my first thought appeared so. The time shows correctly, but the frame count is higher....which is not a problem, since they are sub-frames. I have so little experience seeing the result of subframe created TASes, that it was a bit odd.
	$LF
]div
[div class=p 
	"In regards to subframes, I thought it was amazing to see the manipulation difference over the previous submission. NIce job.
	$LF
]div
[div class=p 
	"Accepting over 
	(__wikiLink|href=/3065M|implicitdisplaytext=3065M)
	".
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/despoa 
		"despoa
	]a
	": Processing...
]div
