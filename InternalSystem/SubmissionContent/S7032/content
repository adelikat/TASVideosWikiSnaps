14
[div class=p 
	"California Games is a sport game for the Sega Master System. There are a total of 5 sport events: Half Pipe, Foot Bag, Surfing, Skating, BMX and Flying Disk.
	$LF
]div
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: BizHawk 2.5.2
		$LF
	]li
	[li 
		" Do all the events as fast as possible (“Complete in all events”)
		$LF
	]li
	[li 
		" Beat the high score for each event
		$LF
	]li
]ul
[h3 id=Comments 
	" Comments
	$LF
]h3
[div class=p 
	"For each event, the player has 3 tries, except for Surfing (5 tries) and Foot Bag (time limit). The goal here for each event is to get the minimum high score (if possible) and fail the other tries quickly.
	$LF
]div
[div class=p 
	"High Scores:
	$LF
]div
[ul 
	[li 
		" Half Pipe: score > 10000
		$LF
	]li
	[li 
		" Foot Bag: score > 35000
		$LF
	]li
	[li 
		" Surfing: score > 5.5
		$LF
	]li
	[li 
		" Skating: score > 1010
		$LF
	]li
	[li 
		" BMX: score > 15000
		$LF
	]li
	[li 
		" Flying Disk: score > 777
		$LF
	]li
]ul
[div class=p 
	"Before the beginning of the first event, the player has to enter a name and choose a team, it doesn’t have any impact on the game except for 3 specifics name listed here: 
	[a href=https://gamefaqs.gamespot.com/sms/588043-california-games/cheats rel=noopener external nofollow 
		"https://gamefaqs.gamespot.com/sms/588043-california-games/cheats
	]a
	$LF
	"Just for fun, I choose “TASBOT” as a name and “Santa Cruz” for the team, so it will be displayed as “TASBOT SAN” at the top of the screen at each event.
	$LF
]div
[div class=p 
	"Links:
	$LF
]div
[ul 
	[li 
		" Speedrun Leaderboard: 
		[a href=https://www.speedrun.com/californiasms rel=noopener external nofollow 
			"https://www.speedrun.com/californiasms
		]a
		$LF
	]li
]ul
[h3 id=StageByStageComments 
	" Stage by stage comments
	$LF
]h3
[h4 id=HalfPipe 
	" Half Pipe
	$LF
]h4
[div class=p 
	"Going up and down across the half pipe, the goal is to do skateboard tricks with the right timing: hand plant, turns and aerial turns. The Skateboarder speed increases by pressing down while the skater is going down and pressing up while the skater is going up.
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Addr 
			]th
			[th 
				" Name 
			]th
			[th 
				" Details 
			]th
		]tr
		[tr 
			[td 
				" 0x0078 
			]td
			[td 
				" Speed 
			]td
			[td 
				" max at 180 
			]td
		]tr
		[tr 
			[td 
				" 0x0076 
			]td
			[td 
				" X position 
			]td
			[td 
				" between 22 and 234 
			]td
		]tr
		[tr 
			[td 
				" 0x0075 
			]td
			[td 
				" Y position 
			]td
			[td 
				" from -3 (252) to 169 (flat bottom) 
			]td
		]tr
	]tbody
]table
[div class=p 
	"The highest aerial turn gives 999 points (max), it’s only possible after reaching the highest speed (180). Despite the big number of points, it’s also not super fast: min 140 frames between two big aerial turns. The hand plant gives max 700 points but it has the great advantage to increase the skateboard speed faster and there are 96 frames between 2 hand plants.
	$LF
]div
[div class=p 
	"Fastest would be only hand plants, but with 700 points per trick, 15 hand plants are needed to reach 10 000+ points, overall it’s not faster. The strategy here is to do 5 hand plants to reach the max speed (180), then alternate between hand plants and big aerial turns to get the 999 while keeping a good speed. For the last trick, a smaller aerial turn will save some frames and reach a score just above 10 000.
	$LF
]div
[div class=p 
	"After that, we just need to fail the 2 other tries quickly by doing a too long right turn as soon as possible, holding down while going down will save some frame
	$LF
]div
[h4 id=FootBag 
	" Foot Bag
	$LF
]h4
[div class=p 
	"This event is about doing stunts with a bag (or a ball). There are 11 stunts in total, plus extra points for hitting the seagull and extra points for catching the ball after throwing it out of the screen. At the end, there are bonus points for the number of stunts, for instance 4 stunts will give 10 000 bonus points and 11 stunts (all) will give 66 000 bonus points.
	$LF
]div
[div class=p 
	"This is the only event with a game over only after the time is up… which is boring for a speedrun. That’s where it’s fun to see all the possible stunts without letting the ball touch the ground.
	$LF
]div
[div class=p 
	"Looks like there is some sort of RNG for the travel distance of the ball. When kicking the ball from one side, it goes up to the other side. the distance of where the ball will land would be different depending on the previous event (half pipe) and the inputs will be desynchronized.
	$LF
]div
[h4 id=Surfing 
	" Surfing
	$LF
]h4
[div class=p 
	"With 5 tries, surfing is about getting points by 3 types of tricks: turns, jumps and stays in the tube. Additional points will be given for staying on wave long, in order to get the maximum point, the surfer has to stay until the time is up. The player can only control going up (pressing left) or going down (pressing right)
	$LF
]div
[div class=p 
	"This is the only event where the score is only shown at the end of the event. I was able to figure out the point system and display the final score in real time with a LUA script. 
	$LF
]div
[div class=p 
	"The following table describes how the final score is calculated from the different tricks. Each trick has a point counter that will be converted to a score format: “[0-9].[0, 2, 4, 6, 8]”, for instance “2.4” or “5.8”
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Name
			]th
			[th 
				" Addr 
			]th
			[th 
				" Count inc 
			]th
			[th 
				" Point calculation 
			]th
		]tr
		[tr 
			[td 
				" Jump 
			]td
			[td 
				" 0x00A3 
			]td
			[td 
				" every landing jump and depending on the angle (+2, +3, …) 
			]td
			[td 
				" count/10 
			]td
		]tr
		[tr 
			[td 
				"Tube
			]td
			[td 
				"0x00A5
			]td
			[td 
				"every 128 frames while in the tube 
			]td
			[td 
				" IF count < 3 THEN count*0.6 ELSE 1.6 + (count-3) * 0.2 
			]td
		]tr
		[tr 
			[td 
				"Turn
			]td
			[td 
				"0x00A6
			]td
			[td 
				"every 8 frames while turning
			]td
			[td 
				" IF count < 160 THEN floor(count/32)*0.4 ELSE 1.8 + (floor(count/32)-5)*0.2) 
			]td
		]tr
		[tr 
			[td 
				" Stay 
			]td
			[td 
				" 0x00A2 
			]td
			[td 
				" every 201 frames 
			]td
			[td 
				" [4-7] → 0.1 ; [8-11] → 0.3 ; [12-15] → 0.6 ; [16-19] → 0.7 ; [20-21] → 1.0 
			]td
		]tr
	]tbody
]table
[div class=p 
	"At the end of the event, if the score decimal is odd, an extra 0.1 will be added to the final score. 
	$LF
	"In order to get a score of 5.6 fast, we need 22 jumps points (2.4) + 4 tube points (1.8) + 96 turn points (1.2) + 4 stay points (0.1) = 5.5 (+0.1) = 5.6
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Addr 
			]th
			[th 
				" Name 
			]th
			[th 
				" Detail 
			]th
		]tr
		[tr 
			[td 
				" 0x0063 
			]td
			[td 
				" State 
			]td
			[td 
				" 8 states (see table below) 
			]td
		]tr
		[tr 
			[td 
				" 0x006D 
			]td
			[td 
				" Angle 
			]td
			[td 
				" 16 angles: from 0 (horizontal right) to 8 (horizontal left) counter clockwise 
			]td
		]tr
		[tr 
			[td 
				" 0x0070 
			]td
			[td 
				" Speed 
			]td
			[td 
				" starts at 128, min 64, max 192 (2 bytes fixed point) 
			]td
		]tr
		[tr 
			[td 
				" 0X006B 
			]td
			[td 
				" Y position 
			]td
			[td 
				" inside wave from 50 to 174 
			]td
		]tr
	]tbody
]table
[div class=p 
	"Surfer State: 
	$LF
]div
[table 
	[tbody 
		[tr 
			[td 
				" 0 
			]td
			[td 
				" paddling 
			]td
		]tr
		[tr 
			[td 
				" 1 
			]td
			[td 
				" take off 
			]td
		]tr
		[tr 
			[td 
				" 2 
			]td
			[td 
				" in wave 
			]td
		]tr
		[tr 
			[td 
				" 3 
			]td
			[td 
				" leaving bottom 
			]td
		]tr
		[tr 
			[td 
				" 4 
			]td
			[td 
				" jumping 
			]td
		]tr
		[tr 
			[td 
				" 5 
			]td
			[td 
				" hit by waves 
			]td
		]tr
		[tr 
			[td 
				" 6 
			]td
			[td 
				" bad jump landing 
			]td
		]tr
		[tr 
			[td 
				" 7 
			]td
			[td 
				" out of screen 
			]td
		]tr
	]tbody
]table
[div class=p 
	"Starting by getting the tube points is best because the surfer has small enough speed to stay in the tube long enough. A full loop will put the surfer very quick inside the tube and doing some quick up and down help to control the speed to stay in the tube long enough and get all the turns points. 
	$LF
]div
[div class=p 
	"About the speed, looking at 0x070 as an unsigned 2 byte value, it increases by 1 every frame on a horizontal angle, -12 when going up and +4 when going down. Depending on the angles when going up or down, we can have control of the speed.
	$LF
]div
[div class=p 
	"For the jumps, doing small angles jumps is the fastest (angle 1 & 15), it’s faster as the speed is smaller.
	$LF
]div
[h4 id=Skating 
	" Skating
	$LF
]h4
[div class=p 
	"Skating is about reaching the finish line while avoiding all the different obstacles (trashes, sand, cracks, ...). By rapidly pressing up and down, the skater will gain more speed, she can also spin if the player presses left and jumps with the button 2. You get points for every obstacle passed (10, 20 or 30 points), jumping over will give 2x the points and a jump spin will give 4x the points.
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Addr 
			]th
			[th 
				" Name 
			]th
			[th 
				" Detail 
			]th
		]tr
		[tr 
			[td 
				" 0x006A 
			]td
			[td 
				" Speed 
			]td
			[td 
				" Start at 512, max = 952 (2 byte unsigned) 
			]td
		]tr
		[tr 
			[td 
				" 0X0090 
			]td
			[td 
				" Y position 
			]td
			[td 
				" in track between 136 and 184 
			]td
		]tr
		[tr 
			[td 
				" 0X1F00 
			]td
			[td 
				" Collision flag 
			]td
			[td 
				" 1 when hit obstacle 
			]td
		]tr
	]tbody
]table
[div class=p 
	"Doing 5 frames up and 5 frames down (or other way around) is faster. After each jump, the speed decreases, the up and down inputs can be started 2 frames before landing. The strategy here is to do a spin jump for all obstacles and make sure to have enough up & down between jumps to keep enough speed. Only one obstacle doesn’t have a jump because the next obstacle is too close, it’s not worst to slow down. After reaching 1010, we just need to fall and get 20 points at the same time.
	$LF
]div
[div class=p 
	"The only RNG in this event is the ball bouncing around the track. This ball luck can be changed by pressing the button 1 (or 2) one frame later on the event intro screen.
	$LF
]div
[h4 id=Bmx 
	" BMX
	$LF
]h4
[div class=p 
	"Similar to skating: BMX is about reaching the end line while avoiding obstacles (tree trunk, barrel, rock). There are different size of bumps along the track for the biker to do different jumps & tricks. The points would depend on how big is the jump or how long the key is hold for the tricks:
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Trick 
			]th
			[th 
				" Min points 
			]th
			[th 
				" Max points 
			]th
		]tr
		[tr 
			[td 
				" Wheeling (holding + left) 
			]td
			[td 
				" 100 
			]td
			[td 
				" 200 
			]td
		]tr
		[tr 
			[td 
				" Regular jump 
			]td
			[td 
				" 200 
			]td
			[td 
				" 400 
			]td
		]tr
		[tr 
			[td 
				" Table top (jump + up) 
			]td
			[td 
				" 500 
			]td
			[td 
				" 1000 
			]td
		]tr
		[tr 
			[td 
				" 360 turn (jump + down) 
			]td
			[td 
				" 1000 
			]td
			[td 
				" 2000 
			]td
		]tr
		[tr 
			[td 
				" Back flip (jump + left) 
			]td
			[td 
				" 1500 
			]td
			[td 
				" 3000 
			]td
		]tr
		[tr 
			[td 
				" Front flip (jump + right) 
			]td
			[td 
				" 3000 
			]td
			[td 
				" 6000 
			]td
		]tr
	]tbody
]table
[div class=p 
	"The biggest trick, the front flip, can only be done when the bump is big, so the right key can be held long enough to get the 6000 points. There are 2 big bumps pretty early at the beginning of the event where the front flip is possible, before those 2 bumps we just need to get 3100 points. 
	$LF
]div
[div class=p 
	"At the starting line, it’s possible to jump at the top of the ramp, we can then do a 360 turn to get 2000 points. When jumping on a flat surface, we have enough time for a small table top, 2 of them give 1000 points. For the 100 points remaining, we can do a wheeling right after landing the first front flip by holding the left key for 5 frames.
	$LF
]div
[div class=p 
	"After the 2nd front flip, we can do a back flip (or front) on a flat surface to get an instant game over (crash on the head).
	$LF
]div
[h4 id=FlyingDisk 
	" Flying disk
	$LF
]h4
[div class=p 
	"The last event and also the most difficult one is about throwing a disk and then catching it. One part is to choose the speed & angle of the disk, the other part is to control a catcher by running left or right and diving if necessary. Once passing the difficulty of figuring out how to throw the disk, it’s a different story to catch the disk! Depending on which direction the catcher runs or dives, the disk has to be at the right height of the catch’s hand.
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Addr 
			]th
			[th 
				" Name 
			]th
			[th 
				" Values 
			]th
		]tr
		[tr 
			[td 
				" 0x0078 
			]td
			[td 
				" Disk Y Position 
			]td
			[td 
				" initial position at 139 
			]td
		]tr
		[tr 
			[td 
				" 0x0079 
			]td
			[td 
				" Disk Speed 
			]td
			[td 
				" from 160 to 960 (2 bytes) 
			]td
		]tr
		[tr 
			[td 
				" 0x007B 
			]td
			[td 
				" Disk move up time count 
			]td
			[td 
				" increase every 2 frames, from 110 to 271, when reach 256, set angle flag to 0 
			]td
		]tr
		[tr 
			[td 
				" 0x007C 
			]td
			[td 
				" Disk angle flag 
			]td
			[td 
				" 255 go up & 0 go down 
			]td
		]tr
		[tr 
			[td 
				" 0X006E 
			]td
			[td 
				" Catcher X position 
			]td
			[td 
				" initial position at 1824 (2 bytes) 
			]td
		]tr
		[tr 
			[td 
				" 0X006A 
			]td
			[td 
				" Catcher state 
			]td
			[td 
				" 0 = stop; 1 = run; 2 = dive; 5 = catch 
			]td
		]tr
	]tbody
]table
[div class=p 
	"The Highest possible score is 490 in one try, which means minimum 2 tries are required to reach a score above 777. For this event we want the disk and the catcher to meet as early as possible, when the disk flies right and the catcher runs left. 
	$LF
]div
[div class=p 
	"When the catcher is running left, her speed is 3 px/frame and while diving (state = 2) her speed is 4 px/frame. For the disk, we need the fastest speed (960) with the lowest angle possible. If the disk move up time count (let’s simply call it angle) is above 218, the disk cannot be catched. I’ve tried 3 different speed while getting the lowest angle possible:
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Speed 
			]th
			[th 
				" Angle 
			]th
			[th 
				" Frame # 
			]th
		]tr
		[tr 
			[td 
				" 928 
			]td
			[td 
				" 197 
			]td
			[td 
				" 0 
			]td
		]tr
		[tr 
			[td 
				" 960 (bigger) 
			]td
			[td 
				" 197 
			]td
			[td 
				" +9 
			]td
		]tr
		[tr 
			[td 
				" 880 (smaller) 
			]td
			[td 
				" 200 (smaller) 
			]td
			[td 
				" +3 
			]td
		]tr
	]tbody
]table
[div class=p 
	"For the 3rd try, we can just throw the disk on the ground by pressing Left then right as fast as possible.
	$LF
]div
[h4 id=HighScoreBonus 
	" High Score Bonus
	$LF
]h4
[div class=p 
	"After beating an event’s highscore, the player has the chance to get an bonus after obtaining 3 identical cards:
	$LF
]div
[ul 
	[li 
		" 3 x Foot Bag Cards = Faster hackey-sack reflexes, ball and time go slower
		$LF
	]li
	[li 
		" 3 x Surfer Cards = New surfboard, faster speed
		$LF
	]li
	[li 
		" 3 x BMX Cards = New Bike, jump higher
		$LF
	]li
]ul
[div class=p 
	"None of those bonuses make the run faster so we need to lose the bonus game as fast as possible.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/arkiandruski 
		"arkiandruski
	]a
	": Judging..
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/arkiandruski 
		"arkiandruski
	]a
	": Replacing the file with one that removes 57 frames of input at the end.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/arkiandruski 
		"arkiandruski
	]a
	": The judges have had a discussion and we decided as laid out in 
	(__wikiLink|displaytext=Samsara's post|href=/Forum/Posts/505111)
	" that we don't want to accept a run that fails every event as fast as possible, and high scores are the next objective goal above that, so this run is acceptable as a fastest completion. With that in mind, I am accepting this run to Vault. 
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/EZGames69 
		"EZGames69
	]a
	": Processing
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Removing the branch, because this has been agreed to be the standard goal of this game. It's a situation when the any% flag and blank label both fit.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Set rerecord count to a more accurate estimate provided by the author.
]div
