9
[div class=p 
	"Summary: About 2.5 minutes faster than 
	(__wikiLink|displaytext=BZero's previous TAS|href=/1950S)
	" mostly due to various glitches (witch genie bottle skip, and Dink tambourine anywhere), vastly improved menuing, and careful use of "storing cursor movement" for efficiency. Other improvements involve lag reduction, and RNG manipulation in the final dungeon. Final time to last input is 30:59.69; if timed to last decisive action (last spell), it is 29:02.88.
	$LF
]div
[div class=p 
	"Youtube encode (720p60) with subtitle (text) commentary:
	$LF
	(youtube|v=zKpA4Lv0ruM)
	$LF
]div
[div class=p 
	"I'll keep it short. More comments can be found in the subtitle (text) commentary in the Youtube encode.
	$LF
]div
[div class=p 
	"King's Quest V is one of those well-known Sierra Adventure games back in 1990 that was (in)famous for having so many dead ends as well as some really awful puzzle solutions. If you are interested in learning more about King's Quest V in general, I would suggest watching 
	[a href=https://www.youtube.com/watch?v=ydC_YXcWoBw&list=PL5ACDE10D49E44AA3 rel=noopener external nofollow 
		"pawdugan's Let's Play of King's Quest V (PC version)
	]a
	". Let that Youtube video speak for the game. However this TAS is for the NES version, which was released around the same time, and functions somewhat differently from the PC version.
	$LF
]div
[div class=p 
	"Why did I TAS this? To put it simply, I got bored of not making TASes. And I wanted something to do. That's all.
	$LF
]div
[div class=p 
	"This game is actually not trivial to TAS. The two major reasons are because of lag reduction and optimization of cursor movement (the first two listed below).
	$LF
]div
[h3 id=General 
	" General
	$LF
]h3
[h4 id=LagReduction 
	" Lag reduction
	$LF
]h4
[div class=p 
	"The lag in this game is completely unpredictable. I did my best to reduce lag per screen.
	$LF
]div
[div class=p 
	"The game normally operates at 3 frames per cycle. However, some screens lag more than others, usually due to having more sprites on screen. And some lag in very weird ways, such has lagging only at every second cycle (such as the shore near the ocean later in the game).
	$LF
]div
[h4 id=CursorMovement 
	" Cursor movement
	$LF
]h4
[div class=p 
	"It is possible to "store" cursor movement from previous uses. As long as you keep moving the cursor in a single direction, it will keep doubling its speed at intervals (after a delay countdown) but once you move in a different direction or stop, the speed (but not the delay) will reset. So what you do with the cursor on one usage influences what you do on the next usage. It is tricky to optimize. This is where TAStudio definitely helped with this TAS.
	$LF
]div
[h4 id=MenuingTricks 
	" Menuing tricks
	$LF
]h4
[div class=p 
	"There are some shortcuts that speed up menuing:
	$LF
]div
[ul 
	[li 
		" You can press two different buttons at the same time and both will be applied.
		$LF
	]li
	[li 
		" Since the important icons on the main menu are near the bag icon, it is better to select these icons by pressing select and moving to them, rather than pressing B to select them. For the hand icon, it's 12 frames faster to select rather than press B three times. However you can't "charge up" the cursor with this method like you can by pressing B three times, but as far as I know, there is no instance where pressing B three times can make up for the 12-frame loss.
		$LF
	]li
	[li 
		" The only time it's faster to press B to select an icon is when using the eye or talk icons. The eye icon is never used in this TAS, and the talk icon is used only once, to set up the witch genie bottle skip glitch.
		$LF
	]li
	[li 
		" Some timers (that are necessary to wait through) tick down during menuing. So it is faster to do menuing and cursor manipulation during this time. There is one time where I use this to pre-select an item that I will use later, saving some time.
		$LF
	]li
]ul
[h3 id=AreaSpecific 
	" Area-specific
	$LF
]h3
[h4 id=SereniaRoute 
	" Serenia Route
	$LF
]h4
[div class=p 
	"I went through a number of routes for Serenia. It is best to reduce the overall amount of horizontal movement (note the screen is 2-3 times larger horizontally than it is vertically). So I went with:
	$LF
]div
[ul 
	[li 
		" Getting the boot first, before going to the temple. This ended up saving a huge amount of time.
		$LF
	]li
	[li 
		" Doing both the dog stick sequence and the haystack sequence right after seeing the Madame Mushka wagon (where you pay the gold coin). There are a few other candidates but this is the best time to do so.
		$LF
	]li
	[li 
		" After leaving the dark forest, going left first to get the tambourine, harp and marionette doll, like in BZero's TAS. The alternative, going to town first to get the hammer, ends up several seconds slower when the routes converge.
		$LF
	]li
	[li 
		" There are some places where it's faster to take extra screens. The two that I found are the screens before the Madame Mushka wagon (because of lag on the wagon screen, it is faster to go from below) and the screen to the left of the snake (it is faster to go down, right and up due to screen transitions).
		$LF
	]li
]ul
[h4 id=UsefulGlitches 
	" Useful glitches
	$LF
]h4
[div class=p 
	"There are some glitches (NES-version specific as far as I know) but I only know of two that save time:
	$LF
]div
[ul 
	[li 
		" Witch genie bottle skip: At the screen where the witch blocks you from entering the house, there is one very specific x-coordinate (135) that allows you to slip by the witch, without falling into the pit. Normally x-coordinate is an even number. However, by talking to the witch, this changes your x-coordinate to 105, making the glitch possible. You can get the emeralds, spinner and key this way.
		$LF
		[ul 
			[li 
				" However, the witch has to be gone in order to do the honeycomb and emeralds puzzle. So perform a save and restore and the game will think the witch has been defeated and erase her from existence. I choose to save and restore immediately after getting the heart from the tree door; the game puts you back where you entered the screen but saves all status flags, so this saves the walk back.
				$LF
			]li
		]ul
	]li
]ul
[ul 
	[li 
		" Dink tambourine anywhere: In the labyrinth in Mordack's Castle, you can use the tambourine anywhere to summon Dink and get the hairpin on that screen, instead of where Dink normally is. This saves a huge amount of time (around 50 seconds, IIRC). 
		(__wikiLink|displaytext=Thanks to Dan_ for reporting this glitch|href=/Forum/Posts/404349)
		".
		$LF
	]li
]ul
[h4 id=OtherGlitchesThatWerenTUsed 
	" Other glitches that weren't used
	$LF
]h4
[ul 
	[li 
		" It is possible to use the hammer to get a crystal, before defeating the yeti. However, the yeti disappears from existence shortly after and you cannot use the pie on it. The pie has to be used on the yeti to progress the story.
		$LF
	]li
	[li 
		" On the harpy island, it is possible to pick up the fishhook without using the harp, and save and restore to get rid of the harpies, but you still can't move unless you actually use the harp.
		$LF
	]li
	[li 
		" It is possible to enter Mordack's bedroom at the same time he appears to sleep. However this doesn't spawn the wand that you need to take.
		$LF
	]li
]ul
[div class=p 
	"I also tried to trap the witch with the genie bottle without the amulet, but wasn't able to. In fact I found a glitch where the witch turns you into a frog in the death cutscene where the genie normally traps you. Needless to say, it wasn't a useful glitch.
	$LF
]div
[h4 id=RngInMordackSCastle 
	" RNG in Mordack's castle
	$LF
]h4
[div class=p 
	"The next RNG value is determined by two variables: the current RNG value which only changes when used, and a counter which increments every frame. Combined with the lag, this results in a mostly unpredictable RNG.
	$LF
]div
[div class=p 
	"RNG is most applicable to Mordack's castle. Before Mordack goes to sleep, the behavior of rooms is determined by the RNG value:
	$LF
]div
[ul 
	[li 
		" 0-95: nothing
		$LF
	]li
	[li 
		" 96-165: blue monster
		$LF
	]li
	[li 
		" 166-215: cat Manannan 
		$LF
	]li
	[li 
		" 216-255: quick Mordack
		$LF
	]li
]ul
[div class=p 
	"You have to be caught by the blue monster so that should be manipulated in the first room, with a small random delay. After that, "nothing" is normally the best. However, during this TAS, it wasn't possible to manipulate it entirely, but there are some ways around it. Quick Mordack has a random appearance delay and it is sometimes possible to get through the room before he appears. Some rooms are short enough that you can get by even if cat Manannan is around. Blue monster is the worst (even if you can dodge it) because its appearance causes a lot of lag.
	$LF
]div
[div class=p 
	"Since RNG is also used during any dialog where a face is shown, I can manipulate the Mordack's castle RNG without having to wait a huge number of frames.
	$LF
]div
[h3 id=ComparisonTable 
	" Comparison table
	$LF
]h3
[div class=p 
	"Except for "input end", comparison points below are based on the transition of memory address 0x13 from 0 to 128 (which marks the loading of a new screen; this is one frame before the screen actually loads).
	$LF
]div
[div class=p 
	"There are some jumps in the comparison because of different routes (such as when in the run the dog-stick and haystack events are done). 
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				" Location 
			]th
			[th 
				"  Me 
			]th
			[th 
				" BZero 
			]th
			[th 
				" Total saved 
			]th
			[th 
				" Since last 
			]th
			[th 
				" Comment 
			]th
		]tr
		[tr 
			[td 
				" new game	
			]td
			[td 
				"1207	
			]td
			[td 
				"1208	
			]td
			[td 
				"1	
			]td
			[td 
				"1
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" leave town 
			]td
			[td 
				"2086	
			]td
			[td 
				"2098	
			]td
			[td 
				"12	
			]td
			[td 
				"11
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" temple	
			]td
			[td 
				"6993	
			]td
			[td 
				"7983	
			]td
			[td 
				"990	
			]td
			[td 
				"978
			]td
			[td 
				" different route
			]td
		]tr
		[tr 
			[td 
				" leave temple	
			]td
			[td 
				"8565	
			]td
			[td 
				"9903	
			]td
			[td 
				"1338	
			]td
			[td 
				"348
			]td
			[td 
				" drink from pond before hiding
			]td
		]tr
		[tr 
			[td 
				" leave camp	
			]td
			[td 
				"10552	
			]td
			[td 
				"12839	
			]td
			[td 
				"2287	
			]td
			[td 
				"949
			]td
			[td 
				" different route
			]td
		]tr
		[tr 
			[td 
				" temple door	
			]td
			[td 
				"11472	
			]td
			[td 
				"14148	
			]td
			[td 
				"2676	
			]td
			[td 
				"389
			]td
			[td 
				" don't need to drink from oasis
			]td
		]tr
		[tr 
			[td 
				" leave temple	
			]td
			[td 
				"13010	
			]td
			[td 
				"16001	
			]td
			[td 
				"2991	
			]td
			[td 
				"315
			]td
			[td 
				" not getting genie bottle
			]td
		]tr
		[tr 
			[td 
				" enter wagon	
			]td
			[td 
				"15417	
			]td
			[td 
				"18433	
			]td
			[td 
				"3016	
			]td
			[td 
				"25
			]td
			[td 
				"  extra screen transitions to save time
			]td
		]tr
		[tr 
			[td 
				" dark forest	
			]td
			[td 
				"20782	
			]td
			[td 
				"21186	
			]td
			[td 
				"404   
			]td
			[td 
				"-2612
			]td
			[td 
				" did dog and haystack now
			]td
		]tr
		[tr 
			[td 
				" after heart	
			]td
			[td 
				"24966	
			]td
			[td 
				"25718	
			]td
			[td 
				"752	
			]td
			[td 
				"348
			]td
			[td 
				" witch genie bottle skip
			]td
		]tr
		[tr 
			[td 
				" harp tree	
			]td
			[td 
				"32015	
			]td
			[td 
				"32785	
			]td
			[td 
				"770	
			]td
			[td 
				"18
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" gnomes	
			]td
			[td 
				"34405	
			]td
			[td 
				"35218	
			]td
			[td 
				"813	
			]td
			[td 
				"43
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" after cat/rat	
			]td
			[td 
				"37051	
			]td
			[td 
				"39317	
			]td
			[td 
				"2266	
			]td
			[td 
				"1453
			]td
			[td 
				" rejoin after BZero haystack
			]td
		]tr
		[tr 
			[td 
				" leave town	
			]td
			[td 
				"41598	
			]td
			[td 
				"43939	
			]td
			[td 
				"2341	
			]td
			[td 
				"75
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" escape inn	
			]td
			[td 
				"45064	
			]td
			[td 
				"47480	
			]td
			[td 
				"2416	
			]td
			[td 
				"75
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" snowy area	
			]td
			[td 
				"46901	
			]td
			[td 
				"49444	
			]td
			[td 
				"2543	
			]td
			[td 
				"127
			]td
			[td 
				" extra screen transitions to save time
			]td
		]tr
		[tr 
			[td 
				" ice queen	
			]td
			[td 
				"52978	
			]td
			[td 
				"55633	
			]td
			[td 
				"2655	
			]td
			[td 
				"112
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" after yeti	
			]td
			[td 
				"57389	
			]td
			[td 
				"60193	
			]td
			[td 
				"2804	
			]td
			[td 
				"149
			]td
			[td 
				" optimal position to pie the yeti
			]td
		]tr
		[tr 
			[td 
				" after roc nest	
			]td
			[td 
				"62690	
			]td
			[td 
				"65477	
			]td
			[td 
				"2787	
			]td
			[td 
				"-17
			]td
			[td 
				" pre-select honeycomb
			]td
		]tr
		[tr 
			[td 
				" start boat	
			]td
			[td 
				"64580	
			]td
			[td 
				"67719	
			]td
			[td 
				"3139	
			]td
			[td 
				"352
			]td
			[td 
				" from pre-selecting honeycomb
			]td
		]tr
		[tr 
			[td 
				" leave harpy island	
			]td
			[td 
				"69768	
			]td
			[td 
				"72973	
			]td
			[td 
				"3205	
			]td
			[td 
				"66
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" mordack's island	
			]td
			[td 
				"77508	
			]td
			[td 
				"80763	
			]td
			[td 
				"3255	
			]td
			[td 
				"50
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" in maze	
			]td
			[td 
				"79665	
			]td
			[td 
				"83250	
			]td
			[td 
				"3585	
			]td
			[td 
				"330
			]td
			[td 
				" skip the fish
			]td
		]tr
		[tr 
			[td 
				" leave maze 1	
			]td
			[td 
				"82047	
			]td
			[td 
				"88572	
			]td
			[td 
				"6525	
			]td
			[td 
				"2940
			]td
			[td 
				" dink tambourine anywhere
			]td
		]tr
		[tr 
			[td 
				" cassima	
			]td
			[td 
				"82142	
			]td
			[td 
				"88946	
			]td
			[td 
				"6804	
			]td
			[td 
				"279
			]td
			[td 
				" skip the peas
			]td
		]tr
		[tr 
			[td 
				" in dungeon	
			]td
			[td 
				"83890	
			]td
			[td 
				"90783	
			]td
			[td 
				"6893	
			]td
			[td 
				"89
			]td
			[td 
				" luck manipulation
			]td
		]tr
		[tr 
			[td 
				" leave maze 2	
			]td
			[td 
				"86693	
			]td
			[td 
				"94059	
			]td
			[td 
				"7366	
			]td
			[td 
				"473
			]td
			[td 
				" don't follow cassima
			]td
		]tr
		[tr 
			[td 
				" in library	
			]td
			[td 
				"88048	
			]td
			[td 
				"96725	
			]td
			[td 
				"8677	
			]td
			[td 
				"1311
			]td
			[td 
				" luck manip/skip cat and monster
			]td
		]tr
		[tr 
			[td 
				" machine	
			]td
			[td 
				"93080	
			]td
			[td 
				"101772	
			]td
			[td 
				"8692	
			]td
			[td 
				"15
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" after machine	
			]td
			[td 
				"99333	
			]td
			[td 
				"108126	
			]td
			[td 
				"8793	
			]td
			[td 
				"101
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" final spell	
			]td
			[td 
				"104784	
			]td
			[td 
				"113675	
			]td
			[td 
				"8891	
			]td
			[td 
				"98
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				" input end	
			]td
			[td 
				"111765	
			]td
			[td 
				"120656	
			]td
			[td 
				"8891	
			]td
			[td 
				"0
			]td
			[td 
				" 
			]td
		]tr
	]tbody
]table
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/arkiandruski 
		"arkiandruski
	]a
	": Judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/arkiandruski 
		"arkiandruski
	]a
	": Everything looks good here. Nice improvements. Accepting as an improvement to 
	(__wikiLink|href=/2134M|implicitdisplaytext=2134M)
	".
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Pub.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/adelikat 
		"adelikat
	]a
	": Rom hash does not match the known good dump but syncs on it, catalogged as good dump.
]div
