6
[h3 id=Introduction 
	"Introduction
	$LF
]h3
[div class=p 
	"Drancia Saga is a 2016 arcade style action game developed by 
	[a href=http://www.skipmore.com/ rel=noopener external nofollow 
		"Skipmore
	]a
	" and Urara-Works, and published by Flyhigh Works in Japan and Circle Entertainment internationally. When looking into this game I found an interesting history. The game first started as a 
	[a href=https://web.archive.org/web/20200908081506/http://www.skipmore.com/freegames/drancia/drancia_j.html rel=noopener external nofollow 
		"Flash game
	]a
	" with even simpler controls. This version got a 
	[a href=http://www.skipmore.com/app/linernotes/app_043.html rel=noopener external nofollow 
		"smartphone remake
	]a
	" in 2014 with a extra enhancements and characters. This version later got 
	[a href=http://www.skipmore.com/sp/drancia/ rel=noopener external nofollow 
		"ported to the 3DS
	]a
	" with the microtransactions removed with some special bonus characters if you have 
	[a href=https://www.nintendo.co.uk/Games/Nintendo-3DS-download-software/Drancia-Saga-1227009.html rel=noopener external nofollow 
		"certain other games
	]a
	" installed on the 3DS.
	$LF
]div
[div class=p 
	"I first found this game close to the end of the 3DS eShop's life from 
	[a href=https://cohost.org/gosokkyu rel=noopener external nofollow 
		"gosokkyu
	]a
	". I found it a fun game that allows for 1 hour sessions to play out. It's a simple game to play but I found it quite engaging. Since Citra didn't have an input roll editor to work with I felt that this game wasn't too hard to try making a TAS for. As it turns out, it definitely wasn't easy despite only really needing 4 inputs (left, right, A button, X button) to work with.
	$LF
]div
[h3 id=RunNotes 
	"Run notes
	$LF
]h3
[ul 
	[li 
		"Emulator used: Citra Nightly 1863
		$LF
	]li
	[li 
		"Heavy RNG manipulation
		$LF
	]li
	[li 
		"Avoids time-saving damage to get a full combo
		$LF
	]li
	[li 
		"Completes 2 loops of the game for the true ending and final results screen
		$LF
	]li
]ul
[h3 id=ImportantSyncSettings 
	"Important sync settings
	$LF
]h3
[div class=p 
	"To ensure the input file plays back correctly, make sure to always delete the save data folder before playback as this affects game sync!
	$LF
]div
[div class=p 
	[b 
		"Citra configuration used for production
	]b
	$LF
]div
[div class= 
	[div class= 
		[ul class=nav nav-tabs role=tablist 
			[li class=nav-item 
				[a class=active nav-link data-bs-toggle=tab href=#tabs-1806-0 
					"General
				]a
			]li
			[li class=nav-item 
				[a class=nav-link data-bs-toggle=tab href=#tabs-1806-1 
					"System
				]a
			]li
			[li class=nav-item 
				[a class=nav-link data-bs-toggle=tab href=#tabs-1806-2 
					"Graphics
				]a
			]li
			[li class=nav-item 
				[a class=nav-link data-bs-toggle=tab href=#tabs-1806-3 
					"Audio
				]a
			]li
		]ul
	]div
	[div class=tab-content 
		[div class=tab-pane fade active show id=tabs-1806-0 
			[table 
				[tbody 
					[tr 
						[th 
							"General
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Region
						]td
						[td 
							"Auto-select
						]td
					]tr
				]tbody
			]table
		]div
		[div class=tab-pane fade id=tabs-1806-1 
			[table 
				[tbody 
					[tr 
						[th 
							"System
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Enable New 3DS mode
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Username
						]td
						[td 
							"CITRA
						]td
					]tr
					[tr 
						[td 
							"Birthday
						]td
						[td 
							"March 25
						]td
					]tr
					[tr 
						[td 
							"Language
						]td
						[td 
							"English
						]td
					]tr
					[tr 
						[td 
							"Sound output mode
						]td
						[td 
							"Stereo
						]td
					]tr
					[tr 
						[td 
							"Country
						]td
						[td 
							"United States
						]td
					]tr
					[tr 
						[td 
							"Clock
						]td
						[td 
							"Fixed Time
							[br 
							]br
							"2017-05-18, 12:00:00
						]td
					]tr
					[tr 
						[td 
							"Play Coins
						]td
						[td 
							"42
						]td
					]tr
					[tr 
						[td 
							"Console ID
						]td
						[td 
							"0x16AB0002CB9AA65D
						]td
					]tr
					[tr 
						[td 
							"Enable 3GX plugin loader
						]td
						[td 
							"false
						]td
					]tr
					[tr 
						[td 
							"Allow games to change plugin loader state
						]td
						[td 
							"true
						]td
					]tr
				]tbody
			]table
		]div
		[div class=tab-pane fade id=tabs-1806-2 
			[table 
				[tbody 
					[tr 
						[th 
							"Enhancements
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Internal Resolution
						]td
						[td 
							"Native (400x240)
						]td
					]tr
					[tr 
						[td 
							"Enable Linear Filtering
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Post-Processing Shader
						]td
						[td 
							"none (builtin)
						]td
					]tr
					[tr 
						[td 
							"Texture Filter
						]td
						[td 
							"Linear (Default)
						]td
					]tr
					[tr 
						[td 
							"Stereoscopic 3D Mode
						]td
						[td 
							"Off
						]td
					]tr
					[tr 
						[td 
							"Depth
						]td
						[td 
							"0%
						]td
					]tr
					[tr 
						[td 
							"Eye to Render in Monoscopic Mode
						]td
						[td 
							"Left Eye (default)
						]td
					]tr
					[tr 
						[td 
							"Screen Layout
						]td
						[td 
							"Default
						]td
					]tr
					[tr 
						[td 
							"Swap Screens
						]td
						[td 
							"false
						]td
					]tr
					[tr 
						[td 
							"Rotate Screens Upright
						]td
						[td 
							"false
						]td
					]tr
					[tr 
						[td 
							"Large Screen Proportion
						]td
						[td 
							"4.00
						]td
					]tr
					[tr 
						[td 
							"Use Custom Textures
						]td
						[td 
							"false
						]td
					]tr
					[tr 
						[td 
							"Dump Textures
						]td
						[td 
							"false
						]td
					]tr
					[tr 
						[th 
							"Advanced
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Enable Hardware Renderer
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Enable Hardware Shader
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Accurate Multiplication
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Enable Shader JIT
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Use Disk Shader Cache
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Enable VSync
						]td
						[td 
							"true
						]td
					]tr
				]tbody
			]table
		]div
		[div class=tab-pane fade id=tabs-1806-3 
			[table 
				[tbody 
					[tr 
						[th 
							"Audio
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Emulation
						]td
						[td 
							"HLE (fast)
						]td
					]tr
					[tr 
						[td 
							"Output Engine
						]td
						[td 
							"auto
						]td
					]tr
					[tr 
						[td 
							"Enable audio stretching
						]td
						[td 
							"true
						]td
					]tr
					[tr 
						[td 
							"Audio Device
						]td
						[td 
							"auto
						]td
					]tr
					[tr 
						[th 
							"Microphone
						]th
						[th 
							" 
						]th
					]tr
					[tr 
						[td 
							"Input type
						]td
						[td 
							"None
						]td
					]tr
					[tr 
						[td 
							"Input Device
						]td
						[td 
							"Default
						]td
					]tr
				]tbody
			]table
		]div
	]div
]div
[h3 id=MechanicsAndTechniques 
	"Mechanics and techniques
	$LF
]h3
[dl 
	[dt 
		"Leveling up, stats and character choice
	]dt
	[dd 
		" Each character has a level up grid with various stat spreads. What the grid contains is character dependent, but the path through the grid randomizes with each playthrough. First, let's look at the various possible rewards for leveling up.
		$LF
	]dd
]dl
[div class=p 
	[b 
		"Attack
	]b
	": For the first 4 levels of attack, it increases the length and width of the attacking hitbox of a character. Obviously having a larger weapon makes it easier to hit enemies sooner when moving into them. More interestingly, at level 5 attack the character gains a fairy that mimics the character's movement and also hurts enemies. Level 6 attack grants a second fairy follower for more hitboxes. This helps a lot since it allows for me to set up some movement and move away to take care of other enemies while the fairies move in to take out enemies that would appear in that spot. This increase in active hitboxes is an incredible boost in speeding up gameplay.
	$LF
]div
[div class=p 
	[b 
		"Defense
	]b
	": This decreases damage taken by enemies and hazards. As this TAS avoids damage as an entertainment tradeoff, this stat isn't all that useful. Even then the opportunities where damage boosting to take out enemies quicker wouldn't really warrant that much extra defense.
	$LF
]div
[div class=p 
	[b 
		"Speed
	]b
	": This increases horizontal movement speed. 4 levels of speed is practical enough to take out most enemies at the quickest opportunities. Anything beyond that is fairly uncontrollable in real time play, especially if it requires tight dodging.
	$LF
]div
[div class=p 
	[b 
		"Heart
	]b
	": This affects how much health is recovered when obtaining gold. This is also a defensive stat that's ignored in this TAS as damage is intentionally avoided for entertainment. It's also a little more practical while taking out regular enemies and useless during boss fights.
	$LF
]div
[div class=p 
	[b 
		"Magic
	]b
	": This grants the ability to use spells for every level of magic by pressing the B button. This can be refilled by gaining another level of any sort. The spell type varies by character but as the animation takes time this is ignored in the TAS for speeding through. It would be more helpful for a score attack since it can allow for getting extra enemy kills past the quota even if it won't roll past that for the purposes of later levels.
	$LF
]div
[div class=p 
	[b 
		"Food
	]b
	": This grants a full heal. That's all it's for which is helpful in a pinch for real time play but isn't important for this TAS.
	$LF
]div
[div class=p 
	[b 
		"Nothing
	]b
	": Some of the weaker unlockable characters don't actually have a full level up grid, generally because they're the weaker enemies in the game. These at least do refill magic when filled, assuming said character even has magic to use.
	$LF
]div
[div class=p 
	"The game normally starts with 5 characters: swordsman, paladin, dwarf, witch, and bear. There are bonus characters that can be available by having other games installed on the 3DS ranging from reasonable such as the Mysterious Girl from Fairune and Witch from Witch & Hero to the strange such as the biker from URBAN TRIAL FREESTYLE™. Citra for whatever reason assumes all these characters are unlocked despite not actually having those games installed which is a minor bug as it's technically still a valid game starting state. The unlockable characters requires gems from playing the game, and a majority of them wouldn't have a good stat spread to work with. Even for the ones with good stat spreads they require a lot of gems.
	$LF
]div
[div class=p 
	"From all of that, the best choice for this TAS is the paladin as she gets 4 levels of speed and 6 levels of attack. The speed is good enough to handle most situations and the two fairy followers make short work of a lot of enemies.
	$LF
]div
[dl 
	[dt 
		"Enemy spawns and RNG manipulation
	]dt
	[dd 
		" Each area has a different roster of enemies and different spawning requirements. Said spawn requirements is the enemy kill counter at the top of the screen. Each enemy type can also have different conditions on when and where they'll spawn on screen. Some are dependent on screen position while others are dependent on when other enemies are killed. This means there are points where I don't intentionally kill enemies as soon as possible or position myself farther to affect a different enemy to appear in a more ideal place and/or time. This makes for an interesting TAS challenge but not having an input roll to work with makes this much harder to check for.
		$LF
	]dd
]dl
[dl 
	[dt 
		"Areas and progression
	]dt
	[dd 
		" Each area of the game has an enemy kill quota to meet and a boss encounter once it's been met. The number of enemies needed to clear each area is calculated by this formula:
		$LF
	]dd
]dl
[pre 
	"Area quota = minimum(90+10*(area number), 200)
	$LF
]pre
[div class=p 
	"Both loops consist of the same 8 areas in order but the area number increases, affecting the quota. This quota starts at 100 and caps out at 200. Each area has their own enemy roster, hazards, and bosses to contend with.
	$LF
]div
[div class=p 
	"The second loop introduces the ancient king who wanders around the area until the boss appears. Contact with him causes knockback and is liable to combo the player into oblivion in really bad positions.
	$LF
]div
[div class=p 
	[b 
		"Area 1/9 - Mistolia
	]b
	$LF
]div
[div class=p 
	"For the bonus characters from other games this area is changed out with an area from their respective game. This one is pretty straightforward with no stage hazards. The boss is the Dragon, who's pretty simple since they can be hit before they breathe fire.
	$LF
]div
[div class=p 
	[b 
		"Area 2/10 - Chloa's Woods
	]b
	$LF
]div
[div class=p 
	"This area introduces the maneater, whose spit lingers on the ground and causes knockback on contact. The spit is incredibly nasty due to that. This area also introduces the death helmets dropping from above. Their later variant will be a problem later. The area boss is the Treant who's pretty easy to beat, though way later did I realize the boss goes up faster if hit on the first frame, losing time on the second loop.
	$LF
]div
[div class=p 
	[b 
		"Area 3/11 - Cave of Swords
	]b
	$LF
]div
[div class=p 
	"This area introduces stage hazards. In this particular one, the falling stalactites are the hazards to avoid. The area boss is the Golem, where it's a waiting game for the vulnerability period. Hitting early only matters on the last hit, though.
	$LF
]div
[div class=p 
	[b 
		"Area 4/12 - Red Hot Reghelm
	]b
	$LF
]div
[div class=p 
	"The stage hazard in this area is a rain of fireballs. When a fireball lands, it creates a fire that causes knockback on contact. The foreground lava on the bottom also obscures the lava slimes climbing up from below which made it a bit harder to figure out the best places to down stab. The area boss is the Necromancer, whose lightning attack is incredibly hard to dodge with a high speed stat.
	$LF
]div
[div class=p 
	[b 
		"Are 5/13 - Killicot, the Frozen Land
	]b
	$LF
]div
[div class=p 
	"This area doesn't actually have stage hazards to worry about. This makes this a bit easier to handle the enemies in. The area boss is the Snow Worm, who is the only boss with a distinctively different strategy between loops. On the first loop, the third hit is performed as soon as possible by jumping to the top left. The second loop instead performs the third hit near the upper middle as the boss invulnerability ends when the Snow Worm reaches that part. This lets the fourth hit land immediately.
	$LF
]div
[div class=p 
	[b 
		"Area 6/14 - Lutecia Wetlands
	]b
	$LF
]div
[div class=p 
	"I personally don't like this area, simply because my 2 loop 1 credit clears tend to die here. The stage hazard in this area is the water spouts that cause a long knockback animation and can't be jumped over. This knockback can keep juggling the player. The death plants, the cousins of maneaters, come in with their lingering spit to add more area denial to the stage. To top it all off the death spikes, the upgraded death helmets, require two hits with the second hit usually needing to be a downstab. Otherwise hitting a death spike from the side flips them back upright. The area boss is the Giant Crab, who can be hit early by timing a down stab from above rather than waiting on the boss to raise their claw.
	$LF
]div
[div class=p 
	[b 
		"Area 7/15 - The Heavenly Marienol Ruins
	]b
	$LF
]div
[div class=p 
	"Surprisingly, this area is devoid of stage hazards. It's just the enemies to worry about. The area boss is the Fairies, which is also a fair amount of waiting but otherwise is straightforward.
	$LF
]div
[div class=p 
	[b 
		"Area 8/16 - El Dorado Clone City
	]b
	$LF
]div
[div class=p 
	"The final area has giant falling swords for stage hazards. They cover a large chunk of the screen for area denial but at least doesn't cause knockback on contact. This stage also has the golden spikes, which are the gold variant of death spikes. The first boss of this area is Drancia, whose sword rain attack aims at the player's position. Positioning isn't a problem for that attack since the vertical speed is always constant so no time is lost by bad positioning. The second and final boss is the Emerald Tablet, who doesn't gain any extra health between loops but takes more hits than the other bosses regardless. The second loop has the inputs end early by dashing away since the fairy follower gets the last hit in.
	$LF
]div
[h3 id=PossibleImprovements 
	"Possible improvements
	$LF
]h3
[ul 
	[li 
		"Known improvements
		$LF
		[ul 
			[li 
				"As stated earlier, the second Treant fight can be done much faster by getting the first frame hits rather than doing a little messing around.
				$LF
			]li
			[li 
				"About halfway into loop 2 did I realize that grabbing the boss trophies from perfect boss fights early ends the stage faster. The game doesn't advance until those trophies are obtained.
				$LF
			]li
		]ul
	]li
	[li 
		"By virtue of using traditional TASing methods of savestates and loading states, having an input roll would make it easier to check for better enemy spawn RNG manipulation.
		$LF
	]li
]ul
[h3 id=NoteToPublishers 
	"Note to publishers
	$LF
]h3
[div class=p 
	"I have an 
	(__wikiLink|displaytext=extended input file|href=/UserFiles/Info/638456472027785611)
	" that goes to the results screen after the credits.
	$LF
]div
[h3 id=SuggestedScreenshot 
	"Suggested screenshot
	$LF
]h3
[div class=p 
	"I don't have exact frames but the down stab on the Giant Crab is something I just found cool to do in the TAS.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/eien86 
		"eien86
	]a
	": Claiming for judging.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/eien86 
		"eien86
	]a
	": Now this is a pretty entertaining little arcade RPG.
	$LF
]div
[div class=p 
	"Execution overall is tight and the enemies are killed as fast as possible. In terms of upgrades, the author goes for attack/magic/speed, which seems the optimal approach given minimal damage is ever taken. The author indicates the avoidance of damage is due to entertainment purposes, as some boosting might be possible otherwise. I believe this is a reasonable trade-off, as I suspect this movie is very close to optimal regardless.
	$LF
]div
[div class=p 
	"RNG apparently plays a factor in enemy behavior, but this is only dealt with with good execution and not manipulated in depth (mainly because of the emulator's lack of input re-recording capabilities, a là TAStudio). RNG also determines the upgrade tree, which is set at random at the beginning. The author seems to have chosen a seed that leads to the most attack and speed (contributing to optimization). 
	$LF
]div
[div class=p 
	"The author provides a 
	(__wikiLink|displaytext=movie|href=/UserFiles/Info/638456472027785611)
	" with extra inputs after the end for encoding.
	$LF
]div
[div class=p 
	"Accepting to standard.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Publishing.
]div
