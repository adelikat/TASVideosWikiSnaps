14
[div class=p 
	"Slick with his gangs of students and evil bosses holds River City captive and Ryan's girlfriend hostage. Only our hero can stop him now!... But first, he's got some shopping to do!
	$LF
]div
[hr 
]hr
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: FCEUX 2.2.3
		$LF
	]li
	[li 
		" Takes damage and uses death to save time
		$LF
	]li
	[li 
		" Acquires Boat Shoes
		$LF
	]li
	[li 
		" Uses easiest difficulty
		$LF
	]li
	[li 
		" Genre: Fighting
		$LF
	]li
]ul
[hr 
]hr
[h3 id=AboutGoalChoice 
	" About goal choice
	$LF
]h3
[div class=p 
	"River City Ransom was originally released for Famicom/NES in Japan 1989 as Downtown Nekketsu Story, one of the first titles in the Kunio-kun series, and was ported to multiple consoles, including: X68000, and PC Engine. This TAS was performed on the original US port for NES to remain consistent with earlier publications and to make it easier to understand for the general audience, despite the NES games being functionally identical and also saving approximately two seconds from quicker Japanese text. The game difficulty has been set to Novice rather than Advanced in accordance with previous publications, as the harder difficulty results in longer and repetitive encounters, which is neither interesting nor entertaining.
	$LF
]div
[div class=p 
	"Previous publications have taken advantage of L+R inputs, especially to quickly perform a death warp and commence the required back-tracking to defeat Blade in Sherman Park. However, the route in this TAS requires a later death warp (after purchasing Boat Shoes) which can be achieved fastest by reducing Ryan's Stamina to 0 and running into a wall. I was unable to find any other opportunity where L+R would save time, so I opted to exclude all L+R inputs. Note that the damage required for a death warp without L+R is the only time that Ryan receives damage, including the events that take place after the final input.
	$LF
]div
[div class=p 
	"Finally, it must be noted that this route is likely sub-optimal and that the route used in the predecessor publication combined with time saves from improved fights and lag reduction will yield an even faster completion.
	$LF
]div
[hr 
]hr
[h3 id=TechniquesAndGlitches 
	" Techniques and glitches
	$LF
]h3
[ul 
	[li 
		" 
		[b 
			"Damage
		]b
		" is a function of the relevant attack stat (Punch, Kick, Weapon, Throw), speed (stationary/walking, 
		[em 
			"Dash
		]em
		"/running), state (
		[em 
			"Grounded
		]em
		", 
		[em 
			"Floating
		]em
		", aerial), attack type (standard, finisher, weapon strike, weapon throw), and the defender's Strength stat. There are 12 
		[em 
			"Damage tiers
		]em
		" from walking grounded standard attack (lowest) to 
		[em 
			"Run-jump
		]em
		" weapon throw (highest). Some tiers are associated with multiple combinations, e.g. stationary floating uppercut (finisher) = 
		[em 
			"Small-jump
		]em
		" standard attack. Each weapon type belongs to one of three separate strike and throw tiers.
		$LF
	]li
	[li 
		" 
		[b 
			"Will power (WP)
		]b
		" is a stat that rejuvenates a downed character once their Stamina (HP) stat reaches 0. If HP == 0 and WP > 31 then HP = WP / 4 , WP -= HP else rip e.g. Otis (WP42) → 32WP10HP → 24WP8HP. On Advanced Difficulty some gangs have WP > 31; on Novice only Simon (WP63) has WP > 54. Ryan has WP15 without powerups, maximum for all characters is WP63.
		$LF
	]li
	[li 
		" 
		[b 
			"Step counter
		]b
		" at $04DA increments while Ryan continues to walk or run. If Ryan is jumping while running and 
		[em 
			"Step counter
		]em
		" > 15 then Ryan will perform a 
		[em 
			"High-jump
		]em
		". 
		[em 
			"Step counter
		]em
		" is only reset shortly (but not immediately) after the beginning of walk/run animations and is not reset by small adjustments, jumping, or loading zones.
		$LF
	]li
	[li 
		" 
		[b 
			"Grounded state
		]b
		" is the weakest of the three states and uses the intended damage formula for ground attacks.
		$LF
	]li
	[li 
		" 
		[b 
			"Floating state
		]b
		" is activated after landing from a 
		[em 
			"High-jump
		]em
		" and remains through loading zones until Ryan next leaves the ground by hopping, jumping, or falling. Each subsequent attack deals one 
		[em 
			"Damage tier
		]em
		" above 
		[em 
			"Grounded
		]em
		". This is an extremely useful technique in RTA as each of the three punches in a Stone Hands attack deals this extra 1-2 
		[em 
			"Damage
		]em
		", saving numerous boss cycles over the duration of the run.
		$LF
	]li
	[li 
		" 
		[b 
			"Small-jump
		]b
		" occurs when A+B is pressed while Ryan is stationary or walking; attacks belong to at least the 3rd lowest 
		[em 
			"Damage tier
		]em
		". Ryan travels faster while running than any possible jump, however a 
		[em 
			"Small-jump
		]em
		" will cause minimal cooldown upon landing.
		$LF
	]li
	[li 
		" 
		[b 
			"Run-jump
		]b
		" is performed when 
		[em 
			"Step counter
		]em
		" < 16 and Ryan jumps while running; attacks belong to at least the 7th lowest 
		[em 
			"Damage tier
		]em
		". The trajectory can be changed slightly by pressing and holding A or B before jumping (cancelling an attack) and movement/attacks performed mid-air. The cooldown upon landing will depend on Ryan's Agility stat, and how many frames A or B was held. Ryan can also enter the 
		[em 
			"Run-jump
		]em
		" state by running off a ledge.
		$LF
	]li
	[li 
		" 
		[b 
			"High-jump
		]b
		" is a 
		[em 
			"Run-jump
		]em
		" while 
		[em 
			"Step counter
		]em
		" > 15.
		$LF
	]li
	[li 
		" 
		[b 
			"Long-jump
		]b
		" will slightly lose height but gain distance, and the initial lunge forward may also spawn bosses a few frames earlier. 
		[em 
			"Long-jump
		]em
		" requires increased Agility, and is performed by pressing either A or B for a single frame before 
		[em 
			"Run-jump
		]em
		" or 
		[em 
			"High-jump
		]em
		", immediately followed by a held punch, kick, or weapon strike.
		$LF
	]li
	[li 
		" 
		[b 
			"Dash
		]b
		" makes Ryan run by pressing L or R twice in quick succession; 
		[em 
			"Dash
		]em
		" (and running) attacks belong to at least the 5th lowest 
		[em 
			"Damage tier
		]em
		". 
		[em 
			"Step counter
		]em
		" will not be reset if a 
		[em 
			"Dash
		]em
		" is quickly followed by an input that stops running.
		$LF
	]li
	[li 
		" 
		[b 
			"Re-dash
		]b
		" is a variant of 
		[em 
			"Dash
		]em
		" that only requires one L or R input, saving 4 frames. 
		[em 
			"Re-dash
		]em
		" can only be performed after a 
		[em 
			"Dash
		]em
		" that doesn't reset the 
		[em 
			"Step counter
		]em
		", and can be chained together to perform further 
		[em 
			"Re-dash
		]em
		" attacks.
		$LF
	]li
	[li 
		" 
		[b 
			"Global timer
		]b
		" at $052B determines which of the 8 configurations is selected for initial spawn points of gang members. In most cases where a boss needs to be defeated, it is faster to wait in the previous Room to manipulate a desirable pattern.
		$LF
	]li
	[li 
		" 
		[b 
			"Crate/Trashcan
		]b
		" (all best tier except thrown Trashcan) will damage one character when thrown or pushed, and then again on the frame that it comes to rest. It will deal the same 
		[em 
			"Damage
		]em
		" as the last time it was thrown. Once at rest, it can be pushed along the floor with a kick, uppercut, or Chain strike. Note that the pushed speed is dependent on the 
		[em 
			"Damage
		]em
		" of the pushing attack, which is often different to the stored value.
		$LF
	]li
	[li 
		" 
		[b 
			"Duplicated damage
		]b
		" occurs when a defender takes damage from two sources on consecutive frames, resulting in unintended duplication of either or both attacks. This doesn't seem to be possible with all attacks, but is used when 
		[em 
			"Crate/Trashcan
		]em
		" comes to rest in boss fights, as best demostrated by the Otis fight (Room 29).
		$LF
	]li
	[li 
		" 
		[b 
			"Boat Shoes
		]b
		" boosts Ryan's Kick and Agility stats which increases walking and running speed by 25% and allows Ryan to jump farther, but cooldown is slightly extended.
		$LF
	]li
	[li 
		" 
		[b 
			"Death warp
		]b
		" sends Ryan to the previous mall in order to reduce the time spent back-tracking to defeat Blade.
		$LF
	]li
]ul
[hr 
]hr
[h3 id=RoomByRoomComments 
	" Room by room comments
	$LF
]h3
[table 
	[tbody 
		[tr 
			[th 
				"Rooms
				[br 
				]br
				"$0042
			]th
			[th 
				"Room Names
			]th
			[th 
				"Frames
				[br 
				]br
				"(Rooms)
			]th
			[th 
				"Frames
				[br 
				]br
				"(Total)
			]th
			[th 
				"Comments
			]th
		]tr
		[tr 
			[td 
				"0-3,
				[br 
				]br
				"5-7,
				[br 
				]br
				"9-10
			]td
			[td 
				"Cross Town High
				[br 
				]br
				"Sticksville I,II&III
				[br 
				]br
				"Grotto Mall
				[br 
				]br
				"Waterfront Mall
				[br 
				]br
				"Capitol Ave. Bridge
				[br 
				]br
				"Downtown I
				[br 
				]br
				"W.S.L. Co. Warehouse I
			]td
			[td 
				"70
			]td
			[td 
				"70
			]td
			[td 
				"The first nine rooms have been grouped together as they are repetitive. The first mandatory encounter is Rocko in Room 11,
				[br 
				]br
				"and Ryan must bring a 
				[em 
					"Crate/Trashcan
				]em
				" to quickly defeat him. All time saves are due to lag reduction from RNG manipulation.
			]td
		]tr
		[tr 
			[td 
				"11
			]td
			[td 
				"W.S.L. Co. Warehouse II
			]td
			[td 
				"145
			]td
			[td 
				"215
			]td
			[td 
				"Most boss rooms require 4 gang members to be defeated before the boss appears. Only two enemies may appear on screen at
				[br 
				]br
				"any given time, and will not spawn until the coin disappears or is collected. The 
				[em 
					"Step counter
				]em
				" stored from the previous room
				[br 
				]br
				"allows for an immediate 
				[em 
					"High-jump
				]em
				" to quickly dispatch of the first two Home Boys. Collecting the $0.75 coin spawns a Home
				[br 
				]br
				"Boy upstairs where he attempts to approach Ryan by hopping down but lands on the ledge of a stationary tyre, allowing him to
				[br 
				]br
				"to vanquished with a single hit. The final two coins are collected and Rocko 
				[em 
					"WP31
				]em
				" is defeated. The routes diverge here as Ryan
				[br 
				]br
				"collects Rocko's coin for a total of $25.25 and continues to Flatirons Mall to acquire 
				[em 
					"Boat Shoes
				]em
				".
				$LF
			]td
		]tr
		[tr 
			[td 
				"12-15
			]td
			[td 
				"W.S.L. Co. Warehouse III
				[br 
				]br
				"Armstrong Thru-way I,II&III
			]td
			[td 
				"-24
			]td
			[td 
				"191
			]td
			[td 
				"Note that this segment is compared with the equivalent segment from the predecessor publication, beginning at Frame 8896.
				[br 
				]br
				[em 
					"Floating state
				]em
				" is enabled by performing a 
				[em 
					"High-jump
				]em
				" on the final frame of Room 14 and maintained for the remainder of the
				[br 
				]br
				"segment. The lost frames are due to the slower weapon (Chain strikes) and waiting to collect Turk's $2.50 for a total of $31.75.
			]td
		]tr
		[tr 
			[td 
				"16
			]td
			[td 
				"Downtown II
			]td
			[td 
				"75
			]td
			[td 
				"266
			]td
			[td 
				"Note that this segment is compared with the equivalent segment from the predecessor publication, beginning at Frame 10003.
				[br 
				]br
				[em 
					"Floating state
				]em
				" is still active from the previous segment, and is maintained for the remainder of the Room. Despite collecting
				[br 
				]br
				"Mojo's coin, 75 frames were saved from improving fights.
			]td
		]tr
	]tbody
]table
[div class=p 
	"It isn't particularly insightful to compare the remainder of the TAS with the most recent publication due to gameplay differences caused by 
	[em 
		"Boat Shoes
	]em
	".
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Rooms
				[br 
				]br
				"$0042
			]th
			[th 
				"Room Names
			]th
			[th 
				"Room
				[br 
				]br
				"Entry
			]th
			[th 
				"Comments
			]th
		]tr
		[tr 
			[td 
				"17-18,
				[br 
				]br
				"18-16
			]td
			[td 
				"Flatirons Mall I&II
				[br 
				]br
				"Downtown II
			]td
			[td 
				"7484
			]td
			[td 
				[em 
					"Boat Shoes
				]em
				" are equipped for $36.95 with $0.30 to spare. Incidentally, exiting the Belongings menu can only be buffered on the (USA) port, saving one frame
				[br 
				]br
				"which is the only known occasion where (J) is disadvantaged. 
				[em 
					"Death warp
				]em
				" to Waterfront Mall is not faster with L+R shenanigans.
			]td
		]tr
		[tr 
			[td 
				"6,5,
				[br 
				]br
				"3,4
			]td
			[td 
				"Waterfront Mall
				[br 
				]br
				"Sticksville II&I
				[br 
				]br
				"Sherman Park
			]td
			[td 
				"9385
			]td
			[td 
				"Blade only appears after Rocko has been defeated, so the back-tracking to defeat him is required in order to spawn Thor. Money is no longer required but the event
				[br 
				]br
				"flag is not raised until frames before his coin appears.
			]td
		]tr
		[tr 
			[td 
				"3,
				[br 
				]br
				"5-7,
				[br 
				]br
				"9-19
			]td
			[td 
				"Sticksville I&II
				[br 
				]br
				"Waterfront Mall
				[br 
				]br
				"Capitol Ave. Bridge
				[br 
				]br
				"Downtown I,II&III
				[br 
				]br
				"W.S.L. Co. Warehouse I,II&III
				[br 
				]br
				"Armstrong Thru-way I,II&III
				[br 
				]br
				"Flatirons Mall I&II
			]td
			[td 
				"10390
			]td
			[td 
				"There is no need to engage any enemies until Thor, so lag reduction was the primary focus. We continue avoiding all lag frames (since 
				[em 
					"Death warp
				]em
				") until Room 10
				[br 
				]br
				"with 20 lag frames. An empty Room is always followed by a Room with the native gang, but Room 11 is the laggiest Room in this segment. Only 4 more lag frames
				[br 
				]br
				"are conceded for the remainder of the segment, all in Room 16.
			]td
		]tr
		[tr 
			[td 
				"20-22
			]td
			[td 
				"Vacant 3rd Wheel Factory I,II&III
			]td
			[td 
				"13422
			]td
			[td 
				"Ryan is reunited with his 
				[em 
					"Crate
				]em
				" in empty Room 20; future Rooms that can spawn gangs will never be empty. Room 21 is occupied by native gang Squids,
				[br 
				]br
				"causing 11 lag frames. 
				[em 
					"Long-jump
				]em
				" in Room 21 demonstrates the extra distance reached. The companion cube is a tool to be used and discarded; 
				[em 
					"Boat Shoes
				]em
				" might
				[br 
				]br
				"be required to perform this precise 
				[em 
					"High-jump
				]em
				" and 
				[em 
					"Long-jump
				]em
				" in Room 22.
			]td
		]tr
		[tr 
			[td 
				"23-28
			]td
			[td 
				"Downtown IV
				[br 
				]br
				"OAK Hill Mall I&II
				[br 
				]br
				"Burb Village I&II
				[br 
				]br
				"River City High I
			]td
			[td 
				"14682
			]td
			[td 
				[em 
					"Trashcan
				]em
				" is conveniently available in Room 23. Ivan 
				[em 
					"WP48
				]em
				" has a high Throw stat so his running 
				[em 
					"Trashcan
				]em
				" throw deals 41 
				[em 
					"Damage
				]em
				" and will knock him down
				[br 
				]br
				"whether or not he is in the stun animation.
			]td
		]tr
		[tr 
			[td 
				"29
			]td
			[td 
				[em 
					"River City High II
				]em
			]td
			[td 
				"16369
			]td
			[td 
				"Otis 
				[em 
					"WP42
				]em
				" spawns too close to the wall to significantly benefit from manipulating him to throw 
				[em 
					"Trashcan
				]em
				", but 
				[em 
					"Duplicated damage
				]em
				" deals a whopping 95 
				[em 
					"Damage
				]em
				" in
				[br 
				]br
				"the first two volleys. 
				[em 
					"Long-jump
				]em
				" is used to quickly conquer the gym equipment. 8 lag frames.
			]td
		]tr
		[tr 
			[td 
				"30-32
			]td
			[td 
				[em 
					"River City High III,IV&V
				]em
			]td
			[td 
				"17571
			]td
			[td 
				"After ascending the stairs and clearing the gangs, Andy 
				[em 
					"WP49
				]em
				" is lured into a running 
				[em 
					"Trashcan
				]em
				" throw at Randy 
				[em 
					"WP50
				]em
				", dealing 35 
				[em 
					"Damage
				]em
				" which is enough to
				[br 
				]br
				"knock either Dragon Twin down without being in the stun animation. 16 lag frames.
			]td
		]tr
		[tr 
			[td 
				"34
			]td
			[td 
				[em 
					"River City High VII
				]em
			]td
			[td 
				"18891
			]td
			[td 
				"By far the biggest time save in this run is the final Room with 736 frames saved by exploiting Simon's AI. Basically, enemies at close range will reposition if
				[br 
				]br
				"their Z-coordinate is > 5 difference to Ryan, otherwise they will attack, however, attacks will only connect if Z-difference < 5. Ryan enters the Room at Z=68 and
				[br 
				]br
				"simultaneously moves up to 70 while beginning his final 
				[em 
					"Dash
				]em
				". Select is pressed as an audio cue to indicate final input. When Simon finishes his monologue, he
				[br 
				]br
				"runs towards Ryan from Z=80 to Z=75. With a Z-difference of 5, Simon is now stuck in a continuous but unsuccessful endeavour to hit Ryan, eventually throwing
				[br 
				]br
				"weapons and embarrassing himself. This series of events seems to be relatively easy to replicate for any future TAS, as long as Simon doesn't inadvertently change
				[br 
				]br
				" his Z-coordinate by jumping on the 
				[em 
					"Crate/Trashcan
				]em
				", or getting stuck walking backwards between Ryan and the wall. Apart from finding a way to 
				[em 
					"Re-dash
				]em
				" upon
				[br 
				]br
				"entry, I feel confident claiming that this room is solved at 7 frames - the final input at 18897 occurs before the fade-in begins.
				$LF
			]td
		]tr
	]tbody
]table
[hr 
]hr
[h3 id=OtherComments 
	" Other comments
	$LF
]h3
[div class=p 
	"One minor timesave has since been brought to my attention where the 
	[em 
		"Death warp
	]em
	" can be achieved faster by entering the Belongings menu once Ryan's corpse disappears, saving about one second. As the optimal route does not involve any shopping (or pause menu), it is unlikely that this timesave will be demonstrated in any future TAS unless it is required to perform a sequence break. The optimal route should be able to achieve a final time of 4:5X or perhaps slightly lower.
	$LF
]div
[hr 
]hr
[h3 id=Credits 
	" Credits
	$LF
]h3
[ul 
	[li 
		" Shoutouts to 
		[a class=intlink href=/Users/Profile/Chamale 
			"Chamale
		]a
		" for producing a high-quality TAS that gave me competitive segments with which I could assess my progress
		$LF
	]li
	[li 
		" Thank you xxEzraBxxx and Spikestuff for higher quality temporary encodes!
		$LF
	]li
	[li 
		" Special thanks to yelsraek for inspiring me to optimise this bizarre route
		$LF
	]li
]ul
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": Judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": File replaced with a 65 frames improvement.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": Accepting as improvement over 
	(__wikiLink|href=/2553M|implicitdisplaytext=2553M)
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Pub.
]div
