6
[div class=p 
	"DISCLAIMER: This goes does not, in fact, contain fairies.
	$LF
]div
[h3 id=Introduction 
	"Introduction
	$LF
]h3
[div class=p 
	"The Fairyland Story was first an arcade game developed by Taito and released worldwide in July 1985. Ptolemy the witch is tasked with retrieving the stolen holy gem from Dracolisk. Ptolemy's magic turns her foes into cakes that can be crushed or used for crushing. This MSX port by Hot-B was released in 1987 with some different levels but is otherwise mostly faithful to the arcade game as an MSX port can be.
	$LF
]div
[div class=p 
	"I started this TAS because of a different, unreleased port got dumped. An incomplete prototype build of the unreleased NES version of The Fairyland Story was found and dumped in June 2022. That made me curious about trying out the prototype, which while mean was also pretty fun to play. I then got interested in seeing how fast the game could be done but I certainly wasn't expecting having to manage hidden, esoteric mechanics.
	$LF
]div
[div class=p 
	"This TAS also functions as a test run of the MSXHawk core. From what I can gather, this is the first completed TAS done on the core to be submitted to the site. While the core doesn't quite detect when the game lags yet, that's not a big issue since the game's internal directional input check is done about every 3 frames anyways.
	$LF
]div
[h3 id=RunNotes 
	"Run notes
	$LF
]h3
[ul 
	[li 
		"Emulator used: BizHawk 2.8
		$LF
	]li
	[li 
		"MSXHawk core
		$LF
	]li
	[li 
		"Foregoes warps
		$LF
	]li
	[li 
		"Displays the dangers of cakes and gravity
		$LF
	]li
	[li 
		"Gathers lots of lethal literature
		$LF
	]li
]ul
[h3 id=MechanicsAndTechniques 
	"Mechanics and techniques
	$LF
]h3
[div class=p 
	[b 
		"What makes this warpless?
	]b
	$LF
]div
[div class=p 
	"This is warpless because I specifically avoid spawning the Mystical Feather. The Mystical Feather lets Ptolemy skip 3-5 rounds, as well as speeding up any transition screens that happen to be passed. I wanted to show off all the stages the game has to offer, which has its own distinct item routing.
	$LF
]div
[div class=p 
	[b 
		"Ptolemy's magic attack
	]b
	$LF
]div
[div class=p 
	"Ptolemy can shoot a short magic wave that turns enemies into cakes. Having the cake fall from a high enough point destroys the cake which can also squish anything else below, including Ptolemy. Cakes can also be destroyed by repeatedly shooting more magic at it until it crumbles, though that doesn't work on the white bearded enemies. Using rapid magic shots or using gravity to destroy cakes is dependent on the situation. Generally, dropping cakes will be faster.
	$LF
]div
[div class=p 
	"Sometimes enemies aren't killed immediately since they can be used as platforms. This is required for a number of rounds to complete stages, both intentionally and unintentionally. There are a lot of round softlocks that can happen if approached wrong forcing Ptolemy to wait for Horned, the time-up devil, to take her out.
	$LF
]div
[div class=p 
	[b 
		"Enemy movement
	]b
	$LF
]div
[div class=p 
	"Each enemy in a require has specific movement patterns that have varied manipulation conditions. Player screen position and remaining enemies in a round are the biggest factors in what determines their movement. Some rounds require very specific movement to complete, legitimately or otherwise.
	$LF
]div
[div class=p 
	[b 
		"Airborne enemy jumping
	]b
	$LF
]div
[div class=p 
	"Ptolemy can stand on enemy heads and use them as a platform. When the enemy is jumping this detection is a bit wonkier, usually in the enemy's favor. Thus timed jumps are used whenever it's both possible and helpful to get on top of an airborne enemy. This gives a very small frame window, usually a couple at best, where Ptolemy can jump off the enemy to reach places that normally take more time to reach.
	$LF
]div
[div class=p 
	[b 
		"Neutral jump ledge climb
	]b
	$LF
]div
[div class=p 
	"Jumping vertically allows for getting onto ledges by holding left or right towards a platform. This can also be used for platforms above Ptolemy which lets her enter a grounded state sooner. Doing this lets her perform another jump sooner, which aids in vertical speed ascension.
	$LF
]div
[div class=p 
	[b 
		"Reaching platforms directly below
	]b
	$LF
]div
[div class=p 
	"Walking off a platform comes in two forms, depending on how long the direction towards the ledge is held. If held short enough, Ptolemy won't hop off and instead go straight down, Sometimes this can result in allowing for the opposite direction to be pressed and let her land on the platform directly below which might otherwise be unreachable via hopping off the ledge. This is helpful for some movement through a round for navigation and enemy manipulation.
	$LF
]div
[div class=p 
	[b 
		"Item and experience mechanics
	]b
	$LF
]div
[div class=p 
	"GoldS of The Cutting Room Floor has a detailed write-up about the item mechanics for the arcade version here: 
	[a href=https://tcrf.net/Notes:The_Fairyland_Story_(Arcade) rel=noopener external nofollow 
		"https://tcrf.net/Notes:The_Fairyland_Story_(Arcade)
	]a
	$LF
]div
[div class=p 
	"The MSX version faithfully ports over the entire item mechanics including spawning rules. It's so faithful that I'd say read that page I linked since it does a fantastic job explaining how it works better than I ever could. I didn't quite take full advantage of this until about 35% through the TAS and adjusting those might mess with setting up item spawns later in the run. 
	$LF
]div
[div class=p 
	"Generally the early game requires a lot more RNG manipulation via varied player inputs to give favorable items when they help. Once the experience value is high enough the need to manipulate is reduced with either minor input changes or simply not killing enemies to get the Book of Death spawns when needed.
	$LF
]div
[div class=p 
	"A lot of the warpless routing revolved around being mindful of the step counter to get a Book of Death to clear otherwise problematic rounds that take a fair amount of time to complete. This is why there are a number of rounds where movement is reduced to a minimum since that makes the item spawn in another round.
	$LF
]div
[div class=p 
	"As for viewable info that helps: the only point of RAM info that I bothered to find was where the experience is tracked. It is at address 
	[code 
		"0xE000
	]code
	" in RAM.
	$LF
]div
[div class=p 
	[b 
		"Last surviving enemy mechanics
	]b
	$LF
]div
[div class=p 
	"When there's a single enemy left in a round they will despawn automatically after a set amount of time. While this can be helpful for real time play, this takes too long to be helpful in a TAS. There's also seems to be a side effect of resetting the step counter for item spawning. Thus for rounds where the intended solution is to take out all but one enemy in a stage grabbing a Book of Death to clear out the stage is much faster.
	$LF
]div
[div class=p 
	[b 
		"Moon events
	]b
	$LF
]div
[div class=p 
	"Roughly every 10-20 minutes the moon shows up. When it shows up all enemies turn into cakes. While this is meant to be a helpful mechanic to allow Ptolemy to destroy enemies easily, this can be detrimental in stages where using them as platforms is a hard requirement. Two moon evens happens in this run, one helpful for cleanup and one that straight up forced a different strategy or spawning a Book of Death due to not allowing enemies to move to a place where Ptolemy can reach them.
	$LF
]div
[div class=p 
	[b 
		"Rounds 99 and 101 - The Dracolisk fights
	]b
	$LF
]div
[div class=p 
	"The fight with Dracolisk consists of hitting them in the belly with a number of magic spells. Guides out there say that, at least for the first fight, 13 spell shots are needed. I did it in fewer since there seems to be some recovery mechanic that goes on but can be punched through with rapid enough shots. I assume that the 13 spell count is the maximum number of shots needed for more methodical play. Also worth noting that damage seems to carry over between lives.
	$LF
]div
[div class=p 
	[b 
		"Round 100 - The door puzzle
	]b
	$LF
]div
[div class=p 
	"The door has to be entered to clear the stage. At the same time the flag to make the door usable is tied to breaking the ceiling above it by dropping 2 cakes. This means that while it's possible to use one of the skeletons to sneak into the door area it's unusable since the flag hasn't been set.
	$LF
]div
[h3 id=PossibleImprovements 
	"Possible improvements
	$LF
]h3
[ul 
	[li 
		"Starting from the start to fully utilize item mechanics for the first 30-40 stages of the game
		$LF
	]li
	[li 
		"Finding a better item route planning throughout the game to bypass different rounds via the Book of Death
		$LF
	]li
	[li 
		"Better movement and enemy AI manipulation for individual stages
		$LF
	]li
]ul
[h3 id=SpecialThanks 
	"Special thanks
	$LF
]h3
[ul 
	[li 
		"TepidSnake, writer of the website Gaming Hell. They have an incredibly good write-up of The Fairyland Story here: 
		[a href=http://gaminghell.co.uk/TheFairylandStory.html rel=noopener external nofollow 
			"http://gaminghell.co.uk/TheFairylandStory.html
		]a
		$LF
	]li
	[li 
		"GoldS for breaking down the full item and experience system of the arcade version, which also applies to the MSX version.
		$LF
	]li
	[li 
		"ZAC SOFT for their Japanese guide of the arcade version. Their guide also shows that the neutral jump ledge climb is an intended mechanic, which a hard requirement to complete round 95 in the arcade version. You can view their guide here: 
		[a href=http://www10.plala.or.jp/bb/zac/fs_main.html rel=noopener external nofollow 
			"http://www10.plala.or.jp/bb/zac/fs_main.html
		]a
		$LF
	]li
	[li 
		"Alyosha, for developing the MSXHawk core. While while the core's still in development it worked great for the creation of this TAS.
		$LF
	]li
	[li 
		"Forest of Illusion, Gaming Alexandria, and Hard4Games for finding the NES prototype that took me down this road in the first place. Maybe someday the lot check version will be found and I could tackle that.
		$LF
	]li
]ul
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Claiming for judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": The goal makes sense as we can see from 
	[a href=https://strategywiki.org/wiki/The_Fairyland_Story/Gameplay#Powerups rel=noopener external nofollow 
		"item descriptions
	]a
	": even though the warp item spawns randomly, skipping levels in the most efficient way via spawn manipulation and routing is very clearly different from not skipping any levels. And indeed none of the levels is skipped in this run.
	$LF
]div
[div class=p 
	"I don't know what to question 
	(__wikiLink|displaytext=regarding BIOS|href=/Forum/Posts/516572)
	". The run only requires what the Bizhawk log calls 
	[code 
		"MSX+bios_basic_jpn
	]code
	", and there are no machine options in the sync settings, only a USA/Japan selector.
	$LF
]div
[div class=p 
	"The run itself looks good too, accepting.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/despoa 
		"despoa
	]a
	": Processing...
]div
