23
[div class=p 
	"Undertale is an RPG created by Toby Fox in 2015. There are 3 main endings: True Pacifist, Neutral, and Genocide. This TAS will complete the True Pacifist Ending, as it is the most interesting route to play and speedrun. The game is known for its bullet-hell like battle system, and amazing story.
	$LF
]div
[div class=p 
	"Note: For the TAS to sync, you need to disable "Prevent writing to disk" and enable Runtime > Time tracking > clock_gettime().
	$LF
]div
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: libTAS v1.3.4
		$LF
	]li
	[li 
		" Plays on version 1.001
		$LF
	]li
	[li 
		" Reaches the True Pacifist Ending
		$LF
	]li
	[li 
		" Avoids taking damage, unless it saves time.
		$LF
	]li
]ul
[h3 id=Comments 
	" Comments
	$LF
]h3
[div class=p 
	"This TAS Was a lot of fun to make, because of the very large amount of glitches and tricks that can be used to speed things up. the basic route is very simple, since it is for the most part just moving straight forward through the game. However, the individual tricks were quite difficult to figure out and get optimized. In order to get the Pacifist ending, you have to beat the game without killing anyone, complete all of the dates, and complete true lab. You also have to complete the Neutral ending before getting the Pacifist ending.
	$LF
]div
[h3 id=TricksUsed 
	" Tricks Used
	$LF
]h3
[h4 id=WallHumping 
	" Wall Humping
	$LF
]h4
[div class=p 
	"If you hold up and down while against an above wall, you will perform a glitchy walk, during which you will oscillate between moving up and down every frame. This is mostly just a visual glitch, however if you attempt to wall hump in an area where you are unable to move vertically, you will be able to walk at double speed.
	$LF
]div
[h4 id=MenuBuffering 
	" Menu Buffering
	$LF
]h4
[div class=p 
	"If you open the menu and trigger a cutscene at the same time, the cutscene will be delayed until after you close the menu. This is only really useful if combined with the punch card exploit.
	$LF
]div
[h4 id=PunchCardExploit 
	" Punch Card Exploit
	$LF
]h4
[div class=p 
	"When you read the punch card, during the first frame the punch card is open, you will be able to move or perform an action. This allows for 3 main ways of getting back control during cutscenes:
	$LF
]div
[div class=p 
	"1. Normal Punch Card Exploit (PCE)
	$LF
]div
[div class=p 
	"This is done by menu buffering into a cutscene, then reading the Punch Card. The cutscene will start while the punch card is open, and you can then close the card to gain control during the cutscene.
	$LF
]div
[div class=p 
	"2. PCE Slide
	$LF
]div
[div class=p 
	"This is done by moving onto the cutscene trigger while opening the punch card, instead of menu buffering onto it. This is used on triggers that can't be buffered onto, most notably loading zones.
	$LF
]div
[div class=p 
	"3. Storage (also known as overflow, however there is another trick that is also called overflow, so I wont be calling this that to prevent confusion
	$LF
]div
[div class=p 
	"This is done by opening the punch card, then interacting with something on the next frame. The cutscene or text that is caused by the interaction will play under the punch card, and you can close the punch card to move while it's playing. This is not possible in newer versions of the game due to an input handling bug, which is why we play on v1.001. Text Storage can also be canceled to regain control during other cutscenes, and cutscene storage can do the same if the cutscene happens to end while the other cutscene is playing.
	$LF
]div
[h4 id=WrongWarp 
	" Wrong Warp
	$LF
]h4
[div class=p 
	"Wrong warps are done by somehow gaining control during a room transition. When done properly, you will be placed at the origin point of the next room. The issue is that it is not enough to simply PCE Slide the trigger, because you will still be inside the trigger, and the game will stop you from moving again. There are 2 ways around this. 1: just waiting until the last possible frame to close the punch card, since the game won't have time to stop you. 2: walk into a wall while walking into the trigger. For some reason, that lets you trigger the loading zone one pixel away from it, meaning you are no longer inside of the trigger. Wrong warps can also be done using storage instead of the punch card
	$LF
]div
[h4 id=Overflow 
	" Overflow
	$LF
]h4
[div class=p 
	"This trick is very simple, and lets you do a lot of weird things. This trick is done by getting storage on a piece of text that can normally only be seen once, or a yes/no prompt, then talking to it multiple times before the first text is cleared. The game gets really confused and decides to play a completely different piece of text. This can be used to get items early (Not used in this TAS), shorten text (Used on Alphys' text at the end of True Lab), or just crash the game.
	$LF
]div
[h4 id=AttackManipulation 
	" Attack Manipulation
	$LF
]h4
[div class=p 
	"For enemies with random attack patterns their attack is controlled by RNG and the frame count (There might be another factor we don't know about, but for the sake of this TAS, this is all we needed.) This means that by changing exactly when the enemy turn starts, you can control what attack they give. This is used VERY heavily during the Toriel fight.
	$LF
]div
[h3 id=AreaByAreaComments 
	" Area by Area comments
	$LF
]h3
[h4 id=Ruins 
	" The Ruins
	$LF
]h4
[div class=p 
	"Not much to talk about at the beginning of the ruins. In the room with the 2 switches, you can gain control during Toriel's text by hitting the second switch and immediately reading the sign to the left of it. In the room with the 3 rocks, you only have to move the 3rd rock. Normally, the 3rd rock would move back off of the button when you walk to the right and you would have to go move him again, however, by turning around as fast as possible after it starts moving off the plate, you can talk to it before you are supposed to, allowing you to overflow the rock and just walk across the spikes as if they weren't there. I pick up the pie in Toriel's house, it will save a few seconds during the Asgore and Asriel fights. I manipulate Toriel to give the fastest possible attacks, using the monster candy I picked up to heal.
	$LF
]div
[h4 id=Snowdin 
	" Snowdin
	$LF
]h4
[div class=p 
	"I pick up the tough glove at the start of Snowdin. Equipping the tough glove gives you the stick, which can be used to speed up all of the dog fights. In the room with the Dogamy and Dogaressa fight, I do a skip called dogi skip. This is done by getting a random encounter and triggering the cutscene at the same time, allowing you to flee the encounter and walk past the fight. By hitting the switch on the ice puzzle on a pixel perfect spot, You can slide past the bridge cutscene, saving a few seconds. I save to get my health back before the Greater Dog fight, during which I run into the attack to cancel it. During the Papyrus fight, if you let him capture you 3 times, he will give up on fighting you. This is faster than actually fighting him. The Papyrus date is fairly self explanatory.
	$LF
]div
[h4 id=Waterfall 
	" Waterfall
	$LF
]h4
[div class=p 
	"Nothing special at the beginning of waterfall. About half way through it, I buy the punch card from the Nice Cream man. This is where the glitches really start. I move the punch card to the first inventory slot using the box, to cut down on menuing. There is an invisible wall in the next rom stopping us from PCEing Papyrus' call. I PCE the Onionsan cutscene. Unfortunately, we still have to read his text, but it still saves a few seconds. I PCE both of the monster kid encounters, and wall hump in the next room to walk at double speed. By getting storage on monster kid in the next room, I get controll while he boosts me up, giving me double speed and noclip. I PCE the beginning of the spears 2 cutscene. Spears 2 and Mad Dummy are both very straight forward. After Mad Dummy, I PCE Napstablook's cutscene and use it to Wrong Warp into the next room. In the room with the "Behind you" flower, I get storage on the flower, then dismiss the text and open the PC at the same time. This gives me control during Undyne's speech. I do this again to the end of her text to get control during the next cutscene, then walk to the left while waiting for the cutscene to end, cutting down on a few frames of walking. This trick is called "FlowerFlow" (short for Flower overflow). I PCE monster kid's text in the next room and do a blind wrong warp into the next room. Then, I do a trick called "Onedyne". This is done by PCEing both of Undyne's cutscenes, then Wrong Warping into the next room. This skips a cutscene and half of the Undyne fight. In the next room, by stopping on a specific tile, Undyne will get stuck after this phase of the fight, skipping one more quarter of the fight. I get hit during the fight for a future skip. In the first room oh Hotlands, I PCE Undyne's cutscene. since Undyne never dried out (Which normally happens during this cutscene), I can still get the True Pacifist ending without having to water her.
	$LF
]div
[h4 id=Hotlands 
	" Hotlands
	$LF
]h4
[div class=p 
	"I PCE the lab cutscene at the beginning, then do a blind wrong warp into the next room. There are invisible walls stopping you from skipping Alphys' texts. I get out of bounds in the first room with vents by PCEing the vent, then moving down left, to reach the burnt pan room faster. I PCE the vent in the burnt pan room to get through it a bit faster. I PCE all 3 vents in the next room to get up very fast. I also use the last one to wrong warp into the next room. Since I have low health, I can PCE the lasers in the next room, and alphys will disable them afterwards. PCEing the laser allows you to move during Alphys' call. I use the call to wrong warp into the next room. In the room after that, I PCE the vent to fly through the door. Then, I PCE the vents in the next room to get double speed. In the next room I get storage on the refrigerator and then open the PC again, then use it to get control during the cooking show cutscene. This confuses the game into letting me move after clearing Alphys' text, letting me skip the jetpack section as well. This skip disables the menu, so I have to take the elevator back to the beginning of hotlands to enable it again. By getting storage on the elevator, you can just walk out of it and be at the next floor. In the room with the 3 switches, PCEing on the conveyor belt will cancel Alphys' call, letting you hit the 3rd switch early. This glitches out Alphys' next call, and makes a very loud noise. In the next room, I PCE the second vent to skip the puzzle. I PCE the Royal Guards fight which also gives me double speed for a bit because of the cutscene. In the next room, I PCE the news show, and use Mettaton's text to regain control on the vent and get out of bounds and skip the news show. This disables the menu again. In the north-south puzzle room, I PCE the vents to quickly get out of bounds and walk behind the locked door, skipping both puzzles. I PCE the text from the first spider in the Spider Muffet fight room. This skips all of the text, as well as the entire fight. I PCE the musical in the next room to save some time, and crush Mettaton's dreams once again. This skip also disables the menu. After enabling the menu again, I head up to the Core
	$LF
]div
[h4 id=Core 
	" The Core
	$LF
]h4
[div class=p 
	"I PCE Alphys' call in the left room to skip the Madjick fight. In the next room, I PCE Alphys' last call. The calls in the next room cannot be skipped. In the next room, I PCE the first call, mash it away so that Alphys disables the lasers, then PCE the second call. In the puzzle room, I get storage on the puzzle 3 times, which gives me enough bullets to completely skip the puzzle. Then, I very quickly get back to the start of core using wrong warps, and take the elevator to the Mettaton fight. This strategy of reaching the fight is called "Snowiey Core" (Named after speerunner SnowieY101), and is a few seconds faster than taking the bridge like normal. I PCE the Mettaton fight to skip it, then PCE Alphys' cutscene and take the elevator up to New Home
	$LF
]div
[h4 id=NewHome 
	" New Home
	$LF
]h4
[div class=p 
	"I speed up the beginning of new home a lot with some wrong warps. When I reach the hallway in Asgore's house, I get storage on a flower and use it to get control during the first encounter, allowing me to reach the key faster. From there, I walk into the room to the right, then wrong warp back into the hallway to get back very fast. I PCE Slide the second encounter, then walk into Asriel's room to completely skip it. In the room with the fireplace, I get storage on the chair and PCE slide the encounter at the same time. This lets you get painfully close to skipping the encounter, and save a few frames over just walking into it normally. I skip one of the downstairs encounters by wrong warping past it. The rest of new home is normal.
	$LF
]div
[h4 id=NeutralEnding 
	" Neutral Ending
	$LF
]h4
[div class=p 
	"I PCE sans's judgement, then wrong warp up to the Asgore fight. I eat the pie during the first turn, which will save a turn of fighting. You can kill Asgore and Flowey and the game will not care. The Flowey fight is also fairly simple. I restart a few times to skip cutscenes, because the game autosaves a lot during the fight. After entering the doorway after the Flowey fight, I restart the game.
	$LF
]div
[h4 id=Dates 
	" The Dates
	$LF
]h4
[div class=p 
	"Both of the dates are fairly simple. During the Alphys date, you can skip the "DATING START" and "DATING STOP" messages if you mash fast enough (You can't skip the first one though).
	$LF
]div
[h4 id=TrueLab 
	" True Lab
	$LF
]h4
[div class=p 
	"At the beginning of True Lab, I go in to the main room then up left to the memory head fight. Then, I head into the red door and then go over to the dog amalgamate fight. I get storage on the switch, then talk to the sign, and dismiss the sign text when the fight is about to start, letting me walk to the left and skip the fight. The rest of True Lab up to the Reaper Bird fight is straight forward. In the Snowdrake's Mom room, you can wall hump above the refrigerators to walk at double speed. I PCE the Reaper Bird fight, go into the room on the right, And but the turn on the blue switch. Then, I Wrong warp back to the bed room and walk over to the main room, then enter the middle door. In the room with the power switch, I Overflow the switch, which changes all of Alphys' text to "La, La. Time to wake up and SMELL the pain". It also gives me back control during the cutscene. I have to wait for the cutscene to finish before I leave the room, or the power will not turn back on and the game will be softlocked. From there, I enter the elevator, leave True Lab, take the other elevator to judgement hall, then wrong warp up to the Asriel fight.
	$LF
]div
[h4 id=AsrielFightAndFinale 
	" Asriel Fight and Finale
	$LF
]h4
[div class=p 
	"You cannot progress the fight during the first part of the music. The fight itself is fairly simple. During the SAVE section, I use the Pie while Saving Toriel and Asgore to skip 3 turns. After the fight, I choose to not comfort Asriel, as it is 25 seconds faster. After Toriel is finished talking after the fight, the game will autosave, so I restart to get to the end of the room quickly. I wrong warp into the next room, then enter the doorway, mash everyones text, and beat the game.
	$LF
]div
[h3 id=OtherComments 
	" Other comments
	$LF
]h3
[div class=p 
	"I have another input file that also completes the special credits (meant for encoding), which can be downloaded here: 
	(__wikiLink|href=/Userfiles/Info/56558181669172094|implicitdisplaytext=userfiles/info/56558181669172094)
	$LF
]div
[div class=p 
	"And the file with the libTAS sync notes in annotations: 
	(__wikiLink|href=/Userfiles/Info/56571536257473576|implicitdisplaytext=userfiles/info/56571536257473576)
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": Judging.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/ThunderAxe31 
		"ThunderAxe31
	]a
	": Un-claiming.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": Judging
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": Replacing file with one that has sync notes in annotations.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": Synced just fine for me once I actually figured out how to Linux.
	$LF
]div
[div class=p 
	"Optimization seems acceptable for the most part. There was an improvement pointed out in the youtube comments that one could get hit sooner by Flowey in the opening fight by being in the upper left corner, but it only saves some frames. I wouldn't be surprised if there would be an even faster method of getting hit by manipulating the flight path of the leftmost pellet to give it more Y-speed but at best that would save a few more frames and then head to the upper left corner but that would only save a few more frames.
	$LF
]div
[div class=p 
	"As somebody who hasn't actually played Undertale, this TAS was a bit hard to follow, but even I could tell there were tons of exploits and the like. The audience seemed to enjoy it as well.
	$LF
]div
[div class=p 
	"True Pacifist Ending is the term most people know this ending by and I see no reason to change it. It is essentially the Best Ending. Neutral ending is technically contained within this movie, but there could be some routing differences with a standalone TAS and is potentially also acceptable. Genocide ending is radically different from the other two routes from my understanding and could be acceptable provided audience feedback is good.
	$LF
]div
[div class=p 
	"Accepting to Moons.
	$LF
]div
[div class=p 
	"Note to the publisher: I created a different version of the movie with extended input that contains annotations: 
	[a class=intlink href=/Userfiles/Info/57861332313341599 
		"Userfile
	]a
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Pub.
]div
