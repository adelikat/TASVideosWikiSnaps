8
[div class=p 
	"Karnaaj Rally is a 2002 top-down racing game for the GBA developed by Paragon 5/Infinite Dreams Inc and published by Jaleco Entertainment. A port was made for some early phones using "UIQ3" Operating Systems based on Symbian OS, of which little is known. The game is primarily known for its confoundingly weird box art, but was actually well praised by critics generally. The racing physics are rewardingly tight and well suited to showcase the advantages of TAS over RTA gameplay.
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://images.launchbox-app.com/d0c418e8-46e7-4a47-a914-ec3b62df7f17.jpg 
	]img
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://images.launchbox-app.com/b6783811-bdcd-4a5a-8001-18240ad18b16.jpg 
	]img
	$LF
]div
[div class=p 
	"This TAS completes the game's 4 seasons of increasingly more complex tracks and faster carts, as well as a bonus race against a mysterious challenger, in 43 minutes 36 seconds. The RTA records do not complete the 4th season for unknown reasons. The record for RTA is 40:23, and the TAS completes these first three seasons in 28:34. Existing longplay footage is nearly an hour longer through all four seasons, but it intentionally plays all races.
	$LF
]div
[div class=p 
	"To start, this TAS has a complex routing problem from the start that needed to be worked out. Karnaaj has cheat codes in the form of secret names that you can use for your character. I originally wanted to do this TAS to showcase the "Leppa" mode, in which play as your race sponsor Mr Leppa, creating some surreal dialogue scenes where he talks to prehistoric or cyberpunk versions of himself depending on the character portrait chosen and race season. The problem I discovered with this mode is that while the secret Caleppa cart you get in Leppa mode is blazingly fast in the first two seasons, it falls off in season 3 and becomes nearly impossible to use effectively as the opponent racers have much faster carts. A season 1 only TAS would be fastest in Leppa mode, but here we want to get the game's natural credits roll at the challenge race after season 4.
	$LF
]div
[div class=p 
	"Leppa Talking to Himself when using the Leppa name
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://imgur.com/LbeZzk3.png 
	]img
	$LF
]div
[div class=p 
	"Another note is that you can warp to seasons with use of naming LIGA-I, LIGA-II, and LIGA-III respectively for seasons 2/3/4. It's possible therefore that the fastest run to the challenge race and credits roll could skip the first 3 seasons with the LIGA-III name, but I didn't want to use a custom name/cheat code that -only- skips sections of content.
	$LF
]div
[div class=p 
	"At the start we pick Normal difficulty because the fastest cars are not available in Easy difficulty (which probably makes it harder???). I also picked X for fun, though A would be a couple frames faster because you can press up to get to the end button. We then have another brief speed/entertainment tradeoff to pick one of the more insane character portraits which also allows us to scroll through many of them and see some of the game's wild art style. Here I've dropped the remaining character portraits not seen during this portion of the TAS.
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://imgur.com/xAdPh8Z.png 
	]img
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://imgur.com/KVS8tCZ.png 
	]img
	$LF
]div
[div class=p 
	"Between races you can upgrade your engine (increases top speed) and tires (increases turn rate), repair damage, and purchase weapon refills. These are mostly unnecessary in TAS except the engine and possibly tire upgrades. I purchased the tire upgrades when available in this TAS, but it will take additional research to see if it is any slower in practice to skip those upgrades. The tire upgrades allow you to turn better before going into a powerslide, but the powerslide is actually quite useful as it lets you turn faster in return for decelerating, so it's very complicated to tell the exact racing lines to take and whether the tire upgrades are needed. I also repair damage once before the challenge fight at the end, but this is also likely unnecessary and could be eliminated in the rewrite. The weapon purchases may also be relevant depending on how much they are needed for finishing place manipulation, but rockets can also be grabbed as random items around the track, so using mines sparingly is probably all that's needed there. You can also buy armor but that appears entirely unneeded in TAS.
	$LF
]div
[div class=p 
	"Another mechanic that adds to the route complexity is the betting system. Each round before a race you can make a bet of varying difficulty. Bets range from picking the exact placement order, to picking yourself to win, to picking the winner regardless of if it's you, to betting that someone will have to abort early due taking full damage. In at least one race I place a bet to afford an engine upgrade more quickly after the next race, but in a rewrite this could be harder to take advantage of due to prioritizing skipping slower races and the difficulty of aligning a bet that's possible to win with a race skip.
	$LF
]div
[div class=p 
	"This comes to the biggest gap in my learning throughout the course of the TAS: the 4 way tie season advancement.
	$LF
]div
[div class=p 
	"Each of the 4 seasons of Karnaaj has 6/8/10/12 races respectively, with 3/4/5/6 unique tracks - each run twice, once forwards and once backwards. At the end of a race the cars are placed 1st/2nd/3rd/4th for 3/2/1/0 season points respectively. For anyone behind the player at the time they cross the finish line, there is a bug that places them in order of how close to the finish line they are within their -current lap-, not accounting for who has the most laps completed, the discovery of which made it easier to manipulate the place finishings. At the end of each season you advance to the next season if you are the points leader or are tied with the points leader.
	$LF
]div
[div class=p 
	"This mechanic means that if you perfectly manipulate car places, you can immediately abort a race to advance to the next one, then win in the opposite order and end up at 3/3/3/3 across the field repeatedly until 9/9/9/9, 12/12/12/12, 15/15/15/15, and 18/18/18/18 points. Doing it in the other order is more complicated to work out to even placements, because the finishing places in aborted races always end up as the order in which the -previous- race was placed, with you moved to the bottom. This gives the game a natural catch-up mechanic fighting against keeping the points even, but which can be ignored by either starting the pattern on aborting the first race, or by doing win->abort->win with other cars placed in the reverse order->abort. I managed this for the 4th season, but a rewrite could in theory abort 3 additional races by being that precise for the first 3 seasons as well. It becomes easier to manipulate opponent car placements in later seasons as it becomes easier to lap opponents and then shoot some of them with rockets, or shoot them at crossroads to help reorder the cars.
	$LF
]div
[h4 id=RaceSplitsBreakdown 
	"Race splits breakdown
	$LF
]h4
[div class=p 
	"The game displays a time of 1 minute and 30.63 seconds as 1:30:63 for some reason
	$LF
]div
[div class=p 
	"Season 1 (Prehistoric Theme)
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Race Name
			]th
			[th 
				"TAS Time
			]th
			[th 
				"Notes
			]th
		]tr
		[tr 
			[td 
				"Circle of Raptors
			]td
			[td 
				"1:30:63
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Jurassic Path
			]td
			[td 
				"1:33:61
			]td
			[td 
				"at frame 9782 we run over a lizard for a speed/entertainment tradeoff. These environment mobs (later birds and then -people- in season 4!!) explode in a pile of blood when run over, which especially for the people later seems very not in line with the game's E for everyone rating!
			]td
		]tr
		[tr 
			[td 
				"Jurassic Path 2
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Circle of Raptors
			]td
			[td 
				"1:22:34
			]td
			[td 
				"faster from having a much upgraded car by this point
			]td
		]tr
		[tr 
			[td 
				"Jurassic Path
			]td
			[td 
				"1:29:61
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Jurassic Path 2
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
	]tbody
]table
[div class=p 
	"Season 2 (Prohibition Theme?)
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Race Name
			]th
			[th 
				"TAS Time
			]th
			[th 
				"Notes
			]th
		]tr
		[tr 
			[td 
				"Ancient Site
			]td
			[td 
				"2:04:15
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"White Fields
			]td
			[td 
				"2:03:23
			]td
			[td 
				"The snow tracks seem to have some sort of ground modifier that makes you powerslide more quickly, so many of these races are quit across the TAS because the powersliding actually slows things down. In Season 2 Bridges Jones is so long that it's worth doing White Fields instead.
			]td
		]tr
		[tr 
			[td 
				"Dust & Tears
			]td
			[td 
				"1:59:84
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Bridges Jones
			]td
			[td 
				"quit
			]td
			[td 
				"unfortunately we don't get to see "Bridges Jones" at all due to it being a much slower track, it has a section near the start or end depending on direction where the course splits into two wooden plank bridges.
			]td
		]tr
		[tr 
			[td 
				"Ancient Site
			]td
			[td 
				"1:54:71
			]td
			[td 
				"This race has a great ending due to a mine being placed near the finish line. You don't lose control of your car after the finish line so you can spin some donuts while the race fades out, but in this case the mine placement makes the spin much faster!
			]td
		]tr
		[tr 
			[td 
				"White Fields
			]td
			[td 
				"1:59:24
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Dust & Tears
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Bridges Jones
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
	]tbody
]table
[div class=p 
	"	
	$LF
	"Season 3 (Modern Theme)
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Race Name
			]th
			[th 
				"TAS Time
			]th
			[th 
				"Notes
			]th
		]tr
		[tr 
			[td 
				"Karnaaj 100
			]td
			[td 
				"1:25.94
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 200
			]td
			[td 
				"1:45:51
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Frozen Lake
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 500
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 700
			]td
			[td 
				"1:31:53
			]td
			[td 
				"This race has a crazy ending involving rockets and ramming the green car to ensure it places last. We have to delay passing the finish line until it's both across the line itself and behind the blue car, as if it were on the previous lap the bug would happen making the game think it's the furthest ahead
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 100
			]td
			[td 
				"quit
			]td
			[td 
				"we skip this race right now to quickly win a bet, but this is probably worth eliminating in a rewrite because of the larger value of skipping Karnaaj 500 and 200.
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 200
			]td
			[td 
				"1:38:94
			]td
			[td 
				"This race has a great moment on lap 4 where we shoot the green car with a rocket from across a parallel track to manipulate opponent placement
			]td
		]tr
		[tr 
			[td 
				"Frozen Lake
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 500
			]td
			[td 
				"1:44:42
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj 700
			]td
			[td 
				"1:26:72
			]td
			[td 
				" 
			]td
		]tr
	]tbody
]table
[div class=p 
	"Season 4 (Cyberpunk theme)
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Race Name
			]th
			[th 
				"TAS Time
			]th
			[th 
				"Notes
			]th
		]tr
		[tr 
			[td 
				"Airport
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Cold Winter
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Urban Streets
			]td
			[td 
				"1:45:35
			]td
			[td 
				"we quit the first two tracks immediately this season to make our money to upgrade our engine off the faster races at Urban Streets and Karnaaj City
			]td
		]tr
		[tr 
			[td 
				"Karnaaj City
			]td
			[td 
				"1:03:00
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Mad Curvy
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"8th Element
			]td
			[td 
				"1:55:02
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Airport
			]td
			[td 
				"1:56:60
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Cold Winter
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Urban Streets
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Karnaaj City
			]td
			[td 
				"1:02:01
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"Mad Curvy
			]td
			[td 
				"quit
			]td
			[td 
				" 
			]td
		]tr
		[tr 
			[td 
				"8th Element
			]td
			[td 
				"1:48:41
			]td
			[td 
				"This has a noscope rocket shot on the last lap which helps us ensure we get the full 4 way placement tie which the game regards as winning the season, advancing us to the bonus race!
			]td
		]tr
	]tbody
]table
[div class=p 
	[img class=embed mw-100 src=https://imgur.com/gcAyo7h.png 
	]img
	$LF
]div
[div class=p 
	"Secret Challenge Race (Named Lunar Spacestation in Quick Race mode): 3:31:62
	$LF
]div
[div class=p 
	[img class=embed mw-100 src=https://imgur.com/2FV6vhi.png 
	]img
	$LF
]div
[div class=p 
	"Then the credits roll! Beating the game like this unlocks a further 3 tracks that are not seen otherwise during any of the season play: Karnaaj 1000, Arena 1, and Arena 2.
	$LF
]div
[h4 id=RaceMechanics 
	"Race Mechanics
	$LF
]h4
[div class=p 
	"Once you get into the races, several gameplay mechanics make for some extraordinarily complex TAS routing. You have 4 mines you can lay behind your cart and 8 rockets, both of which you can restock between races, but you can also restock rockets from random drops (which can also be boost refills, repairs, or money). The game seems to have issues that make wall riding advantageous, because you don't decelerate from hitting objects side-on, so there are several points in the TAS that look sloppy because it is ultimately faster to slam into a wall, and likely many places where that technique should be explored further. Generally this is helpful where a turn is too tight and would need a powerslide which would otherwise decelerate you. This is most visible in a couple of the ends of races where the finishing time is more tightly manipulated. Boost seems to help you accelerate faster, which also means that the usage of turbo boost with the B button is likely best placed out of the end of turns.
	$LF
]div
[h4 id=OtherNotes 
	"Other notes
	$LF
]h4
[div class=p 
	"The game has some sort of checkpoint system preventing major in-race shortcuts, however it has never been explored thoroughly and there are likely still exploitable areas. Some of the tracks showcase minor skips such as shortcutting corners in Season 2 Ancient Site and skipping around both sides of a slalom through craters on the final challenge race, but even in the 2nd case none of these seem consistently repeatable without getting a "go back" warning.
	$LF
]div
[div class=p 
	"Karnaaj also has a similar weird button mashing effect to what I've observed previously in Pokémon TASing. There are points (specifically the end of races fading out before going to the time/placement overviews) where mashing can make the fadeout come a frame earlier, but no more than just that one frame. This makes me suspect some kind of frame rule going on, but the races themselves seem to fully utilize the GB framerate.
	$LF
]div
[div class=p 
	"Overall I'm very excited about this TAS. Having gone through the first half of it 3 times now trying various difficulties and game modes to find the fastest path, I'm ready to show a first submission that includes the 4 way tie optimization in at least one of the seasons and leave open the possibility for it to be optimized with that across the previous seasons and/or to remove the speed/entertainment tradeoffs for a true any% optimized time.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Darkman425 
		"Darkman425
	]a
	": Admittedly my knowledge of this game extends only as far as Seanbaby's EGM review back in the day of just the box art. Claiming this for judging so I can properly see what this game is about.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Darkman425 
		"Darkman425
	]a
	": The box is incredibly questionable but also incredibly Jaleco. The game is surprisingly alright considering that box art. The TAS is great with the careful race position manipulation and fast driving. Nice work!
	$LF
]div
[div class=p 
	"Accepting to Standard.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/fsvgm777 
		"fsvgm777
	]a
	": Processing. 
	[a class=intlink href=/Users/Profile/Dimon12321 
		"Dimon12321
	]a
	" is handling the encodes for this one.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/fsvgm777 
		"fsvgm777
	]a
	": Actually claim it for publication this time. Dimon is still handling the encodes forthis one.
]div
