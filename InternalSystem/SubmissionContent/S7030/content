26
[div class=p 
	"In this game, the Beanbean Kingdom pays a formal visit to the Mushroom Kingdom. However, that visit was a fluke and the main villain of this game, Cackletta, steals Princess Peach's voice and escapes. As an attempt to save their princess' voice, Mario and green 'stache (forced by Bowser) now team up to retrieve Peach's voice and save the Beanbean Kingdom in record time.
	$LF
]div
[div class=p 
	"Snodeca: Note for the ones publishing this: if possible, please don't just copy this text and please just make it better. I don't know how to word it better without plagiarizing from Wikipedia or something lol. Thanks!
	$LF
]div
[div class=p 
	"This movie is an improvement to 
	[a href=https://www.youtube.com/watch?v=9pneQhV_aYc rel=noopener external nofollow 
		"Mugg's 2012 TAS
	]a
	" by approximately 13 minutes and 10 seconds due to several new time saving glitches, along with better routing, RNG manipulating and the new inclusion of a particular, overpowered item.
	$LF
]div
[div class=p 
	"The flashing that are seen may not be that bad, however 
	[b 
		"if you are susceptible to seizures, beware that there is flashing past the 44 minute mark!
	]b
	$LF
]div
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Emulator used: BizHawk 2.4
		$LF
	]li
	[li 
		" Beats the game as fast as possible
		$LF
	]li
	[li 
		" RNG Manipulation
		$LF
	]li
	[li 
		" Abuses glitches to save time
		$LF
	]li
	[li 
		" Takes damage to save time
		$LF
	]li
]ul
[h3 id=RouteOverview 
	" Route Overview
	$LF
]h3
[div class=p 
	"The first 44 minutes of the run are played mostly as normal. We collect extra mushrooms (and other items to sell and get more mushrooms) throughout the run to power up the Mush Badge (see below). There is a small section of Hoohoo Mountain before Hoohooros skipped using a ledge clip. We unlock Splash Bros Advanced during the Dragohoho fight, which is extremely useful on Queen Bean. We also unlock pipes 1 and 4 for later use.
	$LF
]div
[div class=p 
	"Once we get access to a barrel in Chucklehuck Woods, we can start sequence breaking. We set up the Action Command Glitch by performing Barrel Storage, Sign Glitch, and Mini Mario Glitch. This gives high jump on Mario. We use this high jump to get a glitched hammer on Mario. This allows us to perform Luigi Hat Teleportation, which is the main method of going through walls and performing skips.
	$LF
]div
[div class=p 
	"We take pipe 5 to pipe 4 (Beanbean fields) and head to the east part of Teehee Valley. Then we teleport past rocks and past Trunkle to get to Fungitown early. The sole purpose of this section is to get the Mush Badge which saves an enormous amount of time in the remaining battles.
	$LF
]div
[div class=p 
	"Then we warp to pipe 4 from Fungitown and head to the south part of Teehee Valley. We teleport past the rock blocking the entrance, another rock in the first room, and a wall to access the place where Popple and Birdo capture Luigi much later in the game. Defeating Popple and Birdo triggers endgame. To get back to Beanbean castle, we teleport past the rock at the Teehee entrance again to leave, and also teleport past an invisible wall near the castle entrance.
	$LF
]div
[div class=p 
	"To get to Bowser's Castle we take pipe 3 to pipe 1 and walk through Stardust Fields. We perform Bowser's Castle Skip which skips straight to the final boss via the escape sequence. After defeating Cackletta we take the escape sequence normally to the final cutscene.
	$LF
]div
[h3 id=MushBadge 
	" Mush Badge
	$LF
]h3
[div class=p 
	"One of the biggest timesaves over Mugg's TAS is the use of the Mush Badge. This badge gives you an attack bonus based on how many mushrooms (including super, ultra, and max mushrooms) you have. This bonus is added on to the base damage. On the US version, each Mushroom and Super Mushroom increases the bonus by 51/256 points (the total is rounded down to an integer). Ultra and Max Mushrooms increase damage a little more but aren't used in this run. Also, the bonus damage is less on the Japanese version. This is one reason the US version is faster.
	$LF
]div
[div class=p 
	"The Mush Badge is especially broken when combined with Chopper Bros. This move is supposed to do many hits that do a small amount of damage, quickly decaying to 1 damage per hit. But the Mush Badge bonus is added to every hit, so the total damage is effectively multiplied by the Mush bonus. TAS can do 26 or 27 hits per attack depending on the enemy using autofire.
	$LF
]div
[div class=p 
	"By the Popple and Birdo fight, we have just enough mushrooms to do 9 damage per hit, which allows us to kill Birdo in 2 turns. By the final battle, we are doing 16 damage per hit, which means we can kill Bowletta with 2 uses of Chopper Bros and Cackletta's heart with 3.
	$LF
]div
[h3 id=BattleByBattleComments 
	" Battle by battle comments
	$LF
]h3
[h4 id=Bowser 
	" Bowser
	$LF
]h4
[div class=p 
	"The fight always ends after 5 hits no matter how much damage we do. The only way we can speed up the fight is by dodging every counterattack on the first possible frame and avoiding the tutorials.
	$LF
]div
[h4 id=Goomba1Tutorial 
	" Goomba #1 (Tutorial)
	$LF
]h4
[div class=p 
	"Lucky hits are disabled here. We can again speed up the fight by hitting every counterattack on the first possible frame.
	$LF
]div
[h4 id=Goomba2Tutorial 
	" Goomba #2 (Tutorial)
	$LF
]h4
[div class=p 
	"Before entering the battle we manipulated RNG to get a +3 on POW as soon as possible in the roulette level up. We will be only upgrading POW and Stache throughout this run since we will be extremely underleveled and we need to do as much damage to the bosses as we can.
	$LF
	"	
	$LF
]div
[h4 id=Fawful 
	" Fawful
	$LF
]h4
[div class=p 
	"Fawful’s helmet has 18 HP, Fawful himself has 12 HP. It’s faster for Fawful to attack Mario as much as possible since he is a few pixels closer to Fawful than Luigi, but we couldn’t manipulate that to occur every time without losing time overall.
	$LF
]div
[h4 id=FighterFly1 
	" Fighter Fly #1
	$LF
]h4
[div class=p 
	"In order to gain the 100 coins back in order to progress further it’s mandatory that we enter some enemy encounters. This is the first of 3 battles that we do in preparation for Tolstar. In this fight we want to do 3 splash bros before we run out of BP. The reason why we need to do 3 and not 2 is because, in order to get the Advanced version of Splash Bros, which is needed for this route, we have to perform 20 successful splash bros attacks. Since we avoid all random encounters except for these 3, we only fight bosses after these, and without doing them in those encounters we won’t have any other battles to do them in. You might have noticed that we wasted frames before entering the battle. This is to start with a good RNG seed which allows for 3 mushrooms to be dropped at the end of the battle, which is roughly a 1 in 400 odds scenario. Mushroom routing is a very important part of this TAS and we’ll explain why later.
	$LF
]div
[h4 id=FighterFlyTutorial 
	" Fighter Fly (Tutorial)
	$LF
]h4
[div class=p 
	"This tutorial conveniently refills our HP and BP after finishing it and lets us keep our total uses of Splash Bros. We said earlier that we need to use Splash Bros. 20 times. On the Japanese version, our total uses for Splash Bros. is reset to 0, meaning that we would have to do three battles after the tutorial rather than one before and two after. This is another reason why English is faster. The Splash Bros. in this tutorial counts towards our total uses, so that brings our total to 4 uses.
	$LF
]div
[h4 id=FighterFly2 
	" Fighter Fly #2
	$LF
]h4
[div class=p 
	"Fortunately for this battle we don’t have to waste much time at all to get the RNG seed that we need. This time we don’t get the same 3 mushroom drop as in the previous battle, instead we manipulated a lucky hit on this cannon to kill it in a single jump as well as a 2 mushroom drop at the end. We only do 1 splash bros in this fight to kill the last cannon because doing more than 1 loses time. 
	$LF
]div
[h4 id=FighterFly3 
	" Fighter Fly #3
	$LF
]h4
[div class=p 
	"We had to waste a significant amount of frames in order to get a good RNG seed for this last battle. Like in the first fight, we manipulate another 3 mushroom drop after the battle is over, as well as a pretty fast +3 POW upgrade. We take damage on every fly counterattack because doing that saves 1 frame each time which is very important for the fight against Tolstar because we only had 1 frame to spare to get the optimal RNG. 
	$LF
]div
[h4 id=Tolstar 
	" Tolstar
	$LF
]h4
[div class=p 
	"We had to consume a syrup before the battle begins to refill Mario’s BP so that he could do splash bros attacks against Tolstar. This favorably wasted the right amount of frames so that we could manipulate a very rare event to occur inside the battle; normally, when fighting Tolstar, there is a good chance every time she gets to counterattack that she spawns an additional textbox that indicates that the spikeball will jump higher. This loses many frames throughout the battle, but thankfully, the amount of textboxes that she spawns is random, thus we manipulated a battle with no additional textboxes, and that’s how we made up for the time spent manipulating RNG for the previous 3 fights.
	$LF
]div
[h4 id=Hoohooros 
	" Hoohooros
	$LF
]h4
[div class=p 
	"Now that we are out of Stardust Fields we will only be fighting bosses from now on. The items that they drop will always drop after the battle, meaning we don’t have to manipulate RNG to get mushroom drops anymore. However we still managed to get a good RNG seed for this battle for the pillars and Hoohooros to target Mario more often, which saves a few frames every time.
	$LF
]div
[h4 id=Dragohoho 
	" Dragohoho
	$LF
]h4
[div class=p 
	"This is the first bossfight where the POW stat of Mario really starts to matter, because if it’s any lower than 27, we would have to spend an additional turn killing Dragohoho, as well as sit through his attack and both of those lose close to 15 seconds. Second, we manage to get Splash Bros Advanced right at the end of the battle. This is the reason why we needed to do those extra splash bros in the earlier battles. We want to get Advanced before the Queen Bean boss fight so that we can significantly speed up the fight. Lastly, in order to kill Dragohoho in 3 turns, we also have to use Bounce Bros. Throughout this run we try to avoid using it because you unlock Bounce Bros Advanced after only 8 uses. The animation loses time and we don’t need its Advanced version so we try to use it as rarely as possible. In this fight we start giving Luigi stache, because having a higher stache gives a higher discount for when buying items later.
	$LF
]div
[h4 id=QueenBean 
	" Queen Bean
	$LF
]h4
[div class=p 
	"Normally to defeat this boss you have to take down her 2 arms and then you can use splash bros on her head. However, since we got Splash Bros Advanced, we are able to do damage to the head without taking down her arms because the Advanced version of the attack can damage spiky enemies, which saves a lot of time. POW also matters for this battle; since she has 120 HP, we are barely able to defeat her in 3 turns. As a fun fact, if we are short of Power in RTA speedruns, we deal 39 damage to Queen Bean. This allows Luigi, who deals 1 damage with the hammer, to kill Queen Bean.
	$LF
]div
[h4 id=PoppleRookie 
	" Popple & Rookie
	$LF
]h4
[div class=p 
	"If you kill Rookie first, Popple will run away from the battle. Thus, we aim only for Rookie. Luigi intentionally takes damage so that he dies on the last counterattack because we don’t need more level ups from him and they lose time. Getting Rookie to 40 HP or below will trigger a very slow cutscene of him showing his fire attack, but by dealing enough damage to leave him in 41 HP exactly, we skip that, that’s why we intentionally miss the 2nd bounce bros. After this battle POW becomes almost irrelevant, thus we start giving Mario stache as well.
	$LF
]div
[h4 id=Birdo 
	" Birdo
	$LF
]h4
[div class=p 
	"Like we said before, the damage dealt with the Mush Badge increases with the more mushrooms you have. Where the power of the Mush Badge really shines however is when using Chopper Bros. We collected just enough mushrooms to reach 9 mush damage that is applied on every hit, making what is normally a very long battle into a 2 cycle Birdo kill. The reason that this works is because the damage from the Mush Badge is applied after the calculation of the damage has been done, simply adding to the total damage. This means we, no matter what, always do at least 9 damage, because the minimum damage is 1 plus 8 from all the mushrooms that we have.
	$LF
	"We also manipulated Popple to target and kill Luigi at the end of the battle so that we skip his 4 level ups that he should have gotten, since Luigi’s stats become practically useless from now on.
	$LF
]div
[h4 id=Bowletta 
	" Bowletta
	$LF
]h4
[div class=p 
	"The first phase of the final boss, Bowletta, has 500 HP. Because her Speed stat is so large, she gets to attack first as soon as the battle begins. Therefore, we manipulated her to do 2 fire laser attacks, because they waste the least time of all the other attacks she can do. As in the previous battle, we use Mush Badge alongside Chopper Bros attacks which allows us to kill Bowletta in 2 cycles. We intentionally fail the jump from Luigi so that RNG doesn’t advance, otherwise we would’ve gotten a slower attack. On the last textbox we wait the right amount of frames to manipulate as many fast attacks for the true final boss of the game: Cackletta.
	$LF
]div
[h4 id=CacklettaSSoul 
	" Cackletta’s Soul
	$LF
]h4
[div class=p 
	"The hands have 80HP each and the head has 200 HP. Her head is the fastest of the 3, so it gets to attack first. In the first phase of the fight, her head can only do a hand spin attack, or an energy ball attack. However she can also choose to power up one of her body parts, and since this skips the head’s turn, we went with that. Since her hands and the heart have the same Speed stat, the game does 2 and then 1 RNG calls to determine who goes first. Even though we get a thunder ball attack, getting it before we do damage to the heart is faster than after. We want to get rid of the head first, since it can only give us slow attacks, then the left hand and lastly, the right hand. The attacks that we do with Luigi throughout the fight are to further manipulate RNG into giving us as many fast attacks as possible.
	$LF
	"We should also talk about the “phases” of Cackletta. After you reveal the heart, the game starts to do many health checks to determine inbetween what thresholds the heart’s HP is. Every 300 HP dealt, she gets a new attack and her attacks generally get longer. 
	$LF
	"Once the heart has been revealed, Cackletta does 4 attacks. If you defeat her hand in a counterattack, she actually does 8, so we want to defeat the hand by jumping on it. Failing the jump with Mario allows for the head to do an energy ball attack targetted at Luigi. This is crucial, because there is a strange mechanic with Luigi where he can destroy the energy ball in just 2 hammer dodges. This only works for Luigi because Mario has a shorter hammer dodging animation. We then deal damage to her heart with Chopper Bros., dealing about 400 damage. This brings her into the second phase, where she gets a new attack. Note that if you kill any of her body parts, she will revive them at the end of your turn and heal all to full health. Thus, we only aim for the heart and we avoid using knockback bros. 
	$LF
	"Dealing another 400 damage brings her into the third phase, where some of her attacks become significantly longer. Once reaching this phase, it becomes increasingly harder to manipulate fast attacks, but as you’ll see in a bit, we manage to get a really good phase 3. Since we can do the remaining 400 damage in 1 chopper bros, this means that we can completely skip the 4th and final phase of the fight, meaning the fight will end in phase 3 after Cackletta does her final attacks.
	$LF
]div
[h3 id=Tricks 
	" Tricks
	$LF
]h3
[h4 id=NpcBoosts 
	" NPC Boosts
	$LF
]h4
[div class=p 
	"Whenever you jump into an NPC’s hitbox the game will try to push you out of its hitbox. After being ejected you gain a small speed boost in the direction you were facing which saves a couple of frames. 
	$LF
]div
[h4 id=LedgeBoosting 
	" Ledge boosting
	$LF
]h4
[div class=p 
	"We can use ledges that end in a corner in order to boost Mario or Luigi forward, if you walk off the ledge diagonally and then move towards the corner. The speed that you get from the ledge boost is influenced by !! the angle of movement relative to the angle of the ledge and the distance to the ledge the frame before walking off it. 
	$LF
]div
[h4 id=InstantSwitching 
	" Instant Switching
	$LF
]h4
[div class=p 
	"If the bros are on the same pixel or the path between the bros is blocked by the corner of a wall, the switching will be finished immediately which saves a few frames per application.
	$LF
]div
[h3 id=Glitches 
	" Glitches
	$LF
]h3
[h4 id=JumpCourseSkip 
	" Jump Course Skip
	$LF
]h4
[div class=p 
	"A trigger zone near the exit normally stops the brothers after completing the Spin Jump & High Jump tutorial, but it can be bypassed by positioning the brothers next to it and using Spin Jump. If done correctly, the back brother will stand past the trigger zone. When switching the brothers around the corner, it will cause the front brother to stand past the trigger zone and be able to enter the loading zone to go to the next room.
	$LF
]div
[h4 id=TunnelClipping 
	" Tunnel clipping
	$LF
]h4
[div class=p 
	"The game prevents stacking under a ceiling that's too low to fit the stack. However, if Mario is less than 1 pixel under a ledge and Luigi is far enough to the right of Mario and close enough to the ledge, the game will allow them to stack under a ceiling that's too low. Now if they spin jump into the ledge, the game will try to move them to a place where they can fit. If there is a floor above them, they will be clipped up to that floor.
	$LF
	"This was found by mugg and was applied in Hoohoo Mountain by SolidifyGaming to save a full minute.
	$LF
]div
[h4 id=BarrelStorage 
	" Barrel Storage
	$LF
]h4
[div class=p 
	"There is a variable at $2440 and $2430 in IWRAM that keeps track of the action commands for Luigi and Mario respectively. Normally, when you break out of a barrel, without doing Barrel Storage, the game simply sets the third byte in $2440 to FF. But how it does that is pretty interesting; it copies the third byte to the first byte, and then it copies the fourth byte to the third byte. The first byte is the action command of Luigi when he is in front. When you're inside of the barrel, the third byte is usually 00, and when you're not inside the barrel the byte is FF instead. With barrel storage however, you are inside the barrel, but the third byte is set to FF. Now, if you break out of the barrel, like I said, the third byte gets copied to the first byte, meaning the first byte is now also FF, which means Luigi will have the blank action command on his A button.
	$LF
]div
[h4 id=SignGlitch 
	" Sign Glitch
	$LF
]h4
[div class=p 
	"Talking to the sign while in this state has interesting results. If we talk to the sign, the first byte is changed to 00. But again, the game handles this a bit differently; what is actually happening is the first byte is copied to the fourth byte, and then it sets the first byte to 00. A very important note to make is that the first byte is copied to the fourth byte 1 frame before the first byte is set to 00, which means even though the first byte is 00, the fourth byte is still FF. Because the fourth byte is FF, it will keep the action command of talking to the sign even if you get away from it. Now let's go back to the variable at $2430: the first byte there is set to 02, which means Mario should be talking to a sign, but he is in the back so you still have the normal Jump. However, after you switch, this byte is responsible for being able to change Luigi's action commands past the intended limit. We use Spin Jump on Mario but then immediately hop off. This gets us Spin Jump but on Luigi's B button after we switch. Using Spin Jump on Luigi sets the equivalent of $2430 of Luigi, but for Mario (at $2418). It sets it to $8204, which for Mario is apparently a value that works to make his action command id go up. We get ID 21 after we land, which is the "Emerge" action command. Finally, we use emerge, we switch twice and we can now leave the room. All of this was to get ID 3 for Mario's B button after leaving this room.
	$LF
]div
[h4 id=MiniMarioGlitch 
	" Mini Mario Glitch 
	$LF
]h4
[div class=p 
	"Luigi can use Hammer on Mario to flatten him. Small Mario walking through a tunnel will cause the brothers to get separated. When Luigi then approaches Mario, Mario will walk behind Luigi and Luigi will turn Mario back to big. However, if Luigi approaches Mario in a way that Mario does not need to walk behind Luigi at all, Luigi will forget to turn Mario back to big. This can be done by having Luigi jump twice, then aim at Mario and land precisely in front of him. In other words, small Mario is exactly behind Luigi at the time they are united again. Using actions such as flattening one of the bros, using Spin Jump, etc., determines the game to "fix" the command it's supposed to show; for example, the action command that we got for Mario earlier, an X, gets changed to "Hand" instead after Luigi flattens him. The byte at $2419 is set to 0B when in Mini Mario mode and remains unchanged when performing Mini Mario Glitch (just like Sign Glitch and the spin jump on Luigi), which is why we can get to ID 6. Now, if we use this action command, which is a Hammer that is fake, the game tries to fix it and makes it show the "real" action command we should have, a High Jump.  
	$LF
]div
[h4 id=LuigiHatTeleportation 
	" Luigi Hat Teleportation
	$LF
]h4
[div class=p 
	"Teleporting was discovered in order to go past walls both horizontally and vertically, since Barrel Clipping does not work on the English version the same way it does on the Japanese version. The first requirement for teleporting is having glitched movement; when you walk normally, both bros walk at 512 speed like we’ve said before. When you hammer Luigi, both bros walk at halved speed instead. However, if Mario high jumps on Luigi while he is underground, Mario will walk at normal speed again. This is done by using a glitched hammer on Luigi, so that you can change Mario’s action command to high jump while Luigi is underground.
	$LF
]div
[div class=p 
	"At this point Mario is moving faster than Luigi, so they eventually catch up to each other and reach the same position on a certain frame. On the next frame, Mario tries to follow Luigi as usual, but since they are in the same position, he ends up teleporting somewhere. To understand where Mario teleports to, we have to explain the "follow path".
	$LF
]div
[div class=p 
	"The follow path is a list of the most recent 256 x,y positions the front bro has been. On a frame of normal movement, each bro advances 8 indices on the follow path. The back bro goes to the position 8 indices ahead in the list, then the front bro moves 512 units, divides this movement into 8 64-unit intervals, and writes the endpoints of these intervals to the follow path. They stay 64 indices, or 8 frames apart, and the whole list is looped every 32 frames. When Luigi is underground, they walk at half speed so they only advance 4 indices per frame.
	$LF
]div
[div class=p 
	"The follow path is "reset" when you enter a loading zone, switch places, or use a bros move like dunking Luigi, spin jump, and high jump. This means the front bro is moved to index 64, back bro to index 0, and indices 1-64 are filled with 64 positions between them. Indices 65-256 are untouched, so you can store positions later in the follow path by resetting it.
	$LF
]div
[div class=p 
	"When you have glitched movement, Luigi advances by 4 indices while Mario advances by 8. The follow path is reset when doing the high jump to activate glitched movement. After 16 frames of movement, they both reach index 128. The next frame of walking, Mario goes to the position at index 136, which can be stored from earlier. Furthermore if Luigi jumps when you have glitched movement, he'll advance by 8 indices per frame like normal. So if you move for n frames in the air, they will coincide at entry 128+8n instead, and warp to entry 136+8n. In this way, we can warp to any entry (that's a multiple of 8) from 129 to 256. Entries 1-128 will always be overwritten before the teleport so are useless to teleport to.
	$LF
]div
[div class=p 
	"Mario doesn't warp to the exact position in the follow path: he only warps to the closest position that matches the lower 2 bytes of the follow path position. In other words he can't move more than 0x8000 units in any direction. Also, teleports will sometimes be blocked by walls - Mario will end up teleporting to the wall's position instead of going through it. However if the lower 2 bytes of the follow path position is exactly 0x8000 away, Mario's position will decrease and this "exact warp" always goes through walls.
	$LF
]div
[div class=p 
	"I'll give a summary of all the teleports we perform in this run. In the maze-like room in NW Beanbean, we switch to set entry 256 to a position that will correspond to just past the blocky stairs in the middle of the next room. Then we set entry 248 to a position near the black rocks. While walking to the loading zone, we switch a few times to avoid overwriting these positions. After getting glitched movement, we set 136 to a position that is 0x10000 away from just past the rocks. Then we jump to warp to entry 248, then warp to the entry 136 we just set up. Next we jump to warp to the 256 we set up before, now past the stairs. Then we can warp to 136 and then 256 again, this time 0x10000 further right, which is right under a mushroom block. We hit it with a high jump which also allows us to switch Luigi's command to emerge, to end the glitched movement.
	$LF
]div
[div class=p 
	"In the long room in Teehee, we set 256 to a position near the loading zone to the second maze room, and then switch twice to preserve it. In the next room we switch twice again to set 248 to a particular position past the first maze wall. Then we set up glitched movement while moving up enough to warp to this 248 position but 0x10000 lower Y. Next we warp to 136 followed by the 256 we set up before, and enter the loading zone. We need to have Luigi enter the loading zone since he's in front. This means Mario actually teleports a little bit past the loading zone, which can cause Mario to get stuck. If Mario is stuck when Luigi enters the loading zone, there's about a second when Mario can't move after entering the next room, so we avoid this. Before getting glitched movement in the next room, we are in a strange state where if Luigi jumps, the follow path is reset every frame. This means we can move far enough to warp to 256 again in this room, followed by a 136 warp past a rock.
	$LF
]div
[div class=p 
	"Just outside the Trunkle room, we set 256 to a particular position. After getting glitched movement, we set 136 Y to 0x10000 more than the Y of the bottom of the elevator, then warp to 256. Then we warp to 136. Mario actually gets sent high into the air after the first teleport, so Luigi emerges while Mario is falling.
	$LF
]div
[div class=p 
	"The next teleport chain is by far the longest, consisting of 26 teleports in a row. First we set 256 to a position that will be near the loading zone past the black rock in Teehee Valley room 1. Then we set 248 to a very particular position past the rock in front of the Teehee entrance. Then we switch a few times before setting up glitched movement in the next room. We first warp to 248 - we set 248 originally for a specific purpose but we can use it before then. We can't warp to 256 though, since that would overwrite the stored 248. Then we warp to 136, followed by 248 again, then 240 and then 136, right into the loading zone on the bridge. Normally you can't be underground on this bridge but there is a region near the loading zone you can warp to that allows you to be underground. In the next room, we are confined to this small region, so we can't move very far before warping to 240. We then warp to 232, 0x10000 further right than the small region on the bridge. The rest of the room is straightforward alternating between 136 and 240. In the final Beanbean room, we set 136 sufficiently far to the right, then warp to 248 but 0x10000 below the rock. Then we warp to 136, now on the right of the rock. Then we do an exact warp to 248, behind the rock, and emerge into the loading zone. By cancelling the emerge animation with the loading zone, Luigi stays underground, but Mario gets stuck.
	$LF
]div
[div class=p 
	"In the first room of Teehee Valley, we warp to 248, then 240, then to the 256 we set up back in Beanbean. This room is relatively straightforward but squeezing out the maximum possible distance on each of these three teleports to the NW was difficult. Before entering the loading zone we overwrite 240 but not 248, since it is in a good position to get past the wall in the next room. In the next room we set 136 sufficiently high and then warp to the 240 we set at the previous loading zone. We then warp 136, then 240, then 136, which is right next to a Super Mushroom block. We hit it and then do an exact warp to the 248 we set in the previous room, performing "big skip". Then we walk to the loading zone. The final room of this chain is straightforward, we just warp to 256, 136, 256, 136, and then emerge on the platform next to the pipe.
	$LF
]div
[div class=p 
	"There is a wall blocking the way to Birdo which RTA runs open by getting Firehand on Mario. It's slightly faster to just teleport past it. We set 256 as low as possible with doing any extra follow path resetting, and then warp to it, getting past the wall. Then we warp to 136 and emerge on the stairs.
	$LF
]div
[div class=p 
	"After Birdo, we set 136 while changing action commands. It turned out to be fastest to not go out of our way to set this value. We simply warp to 136 and then emerge to lose height.
	$LF
]div
[div class=p 
	"In Castle Town, we set 256 to a position that will correspond to just next to the loading zone to the castle. Then we set 248 to position just far enough left so that when we teleport to it, Luigi doesn't get stuck inside a wall. We then do an exact warp to 256, in the middle of the bridge to the castle, then warp to 136 and then 256. Then we emerge and avoid Mario getting stuck before entering the loading zone.
	$LF
]div
[h3 id=PotentialImprovements 
	" Potential Improvements
	$LF
]h3
[ul 
	[li 
		" Submission moves left on frame 43962. Tolstar's shade appears on frame 44589. By moving left on 43960 or 43961, Tolstar's shade can appear one frame earlier.
		$LF
	]li
	[li 
		" If the submission pressed A to jump at frame 66965, Tolstar's dialogue would start 1 frame earlier.
		$LF
	]li
	[li 
		" When doing Splash Bros, there is a short window of opportunity (often 1 or 2 frames) for Luigi to do his "B" action to speed up the move by one frame for most Splash Bros attacks that we do. If you want to see where we lose time more in depth you should check out 
		(__wikiLink|displaytext=this post by Mugg|href=/Forum/Posts/503774)
		". This saves up to 19 frames.
		$LF
	]li
	[li 
		" In battle, while defending against enemy attacks, if Mario or Luigi are not actionable by the time the enemy attack is over, the defense phase is dragged out and it takes longer for the next scene to start. This saves 17 to 23 frames.
		$LF
	]li
	[li 
		" The submission dropped to the ground of a yellow pipe at 48:18 in the video, which wastes 4 coins and a few frames.
		$LF
	]li
	[li 
		" 3 frames after Popple & Rookie 1 (Sub optimal switch; affects RNG, so we didn't change this).
		$LF
	]li
	[li 
		" ~5 frames after the first gate in Chucklehuck Woods from instant reuniting.
		$LF
	]li
	[li 
		" It was discovered 
		[b 
			"extremely
		]b
		" late in the TAS that you can, apparently, hit Cackletta 27 times instead of 26 times in one turn with Chopper Bros.; this makes it just enough so that we can actually skip a couple mushrooms, potentially saving up to a few seconds. We were practically already done with the TAS however and saving time anywhere before any fight would throw off the entire RNG, so we did not implement this time save. For most bosses, you can only hit 26 times, so we assumed the same for Cackletta.
		$LF
	]li
	[li 
		" Getting better RNG can save up to 1000 frames if everything was perfect. Alas, we can only dream.
		$LF
	]li
]ul
[div class=p 
	"Potato: I like frame 138271 for the thumbnail. 
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": Claiming for judgment
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Samsara 
		"Samsara
	]a
	": Snodeca has been added as a co-author.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": No flaws in sight with optimization.
	$LF
]div
[div class=p 
	"So most people really enjoyed this TAS. It's a very glitchy movie so it's not surprising. However, as somebody who has a bit more intimate knowledge of the game, I know that a lot of the visual glitchiness is purely that, visual. I'm a little disappointed with how much of the game is covered up by the glitched graphics, even with alternate encodes. I wish I could know exactly what walls are being skipped, etc. I still think it's an enjoyable TAS regardless, but visibility is a rather unfortunate drawback.
	$LF
]div
[div class=p 
	"Accepting to Moons.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Publishing.
]div
