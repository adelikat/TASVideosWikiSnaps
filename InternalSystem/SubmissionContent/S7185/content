12
[div class=p 
	"This is the (unreleased) Genesis version of Prince of Persia 2: The Shadow and the Flame. In this sequel, evil Jaffar returns as your doppelganger to steal the princess from you and accuse you of being the impostor. You have 75 minutes (IGT) to fight your way back to the palace to defeat him and save the princess. In this TAS, we use a combination of newly discovered skips and bot-based exploration to find the fastest way to finish the game.
	$LF
]div
[pre 
	$LF
]pre
[h3 id=GameObjectives 
	" Game objectives
	$LF
]h3
[ul 
	[li 
		" Cart Used: Prince of Persia 2 - The Shadow and The Flame (Beta) SHA1: ba63dc1e521bee68b4121b626061ebb203ac63c6
		$LF
	]li
	[li 
		" Patch: 
		[a href=http://www.romhacking.net/hacks/3755/ rel=noopener external nofollow 
			"http://www.romhacking.net/hacks/3755/
		]a
		$LF
	]li
	[li 
		" Emulator used: BizHawk 2.6.2 (x64) + Genplus-gx r874
		$LF
	]li
	[li 
		" Routing Bot: Jaffar2 
		[a href=https://github.com/SergioMartin86/jaffar2 rel=noopener external nofollow 
			"https://github.com/SergioMartin86/jaffar2
		]a
		" + BlastEm 
		[a href=https://www.retrodev.com/blastem/ rel=noopener external nofollow 
			"https://www.retrodev.com/blastem/
		]a
		$LF
	]li
	[li 
		" The objective of the run is to complete the game as fast as possible (real time)
		$LF
	]li
	[li 
		" We repeatedly take damage to skip screens or to go faster.
		$LF
	]li
	[li 
		" Restarts are used whenever it saves time (as opposed to continuing without reset).
		$LF
	]li
]ul
[h3 id=Comments 
	" Comments
	$LF
]h3
[div class=p 
	"This is the genesis version of Prince of Persia 2 (1996) that has never been officially released, but instead only recently surfaced/leaked. A patch had to be applied to fix a game-breaking bug that prevents the Kid from jumping on the horse. More information: 
	(__wikiLink|href=/Forum/Topics/22739|implicitdisplaytext=Forum/Topics/22739)
	".
	$LF
]div
[div class=p 
	"The motivation for this project was to apply bot-based exploration to the DOS Prince of Persia 2, after the success with the first game (
	(__wikiLink|href=/Forum/Topics/22659|implicitdisplaytext=Forum/Topics/22659)
	"). However, since there is no open-source DOS version of PoP2, I could not connect my exploration bot directly to it. Instead, I used this game as surrogate since (a) it is very close in dynamics to the DOS version, and (b) I can connect my route generating bot (Jaffar) to an emulator (BlastEm, in this case). 
	$LF
]div
[div class=p 
	"I ran the bot on parallel computers to find the best way to complete the community's established route. The number of states explored (re-record count) by the bot was: 29,387,141,175.
	$LF
]div
[div class=p 
	"After finishing this TAS, we realized that there are indeed several differences with respect to the DOS version. Most notably, the wide-wall skip used in the DOS TAS is not doable in this version. Also, cutscenes are not skippable, bloating the TAS runtime with end-level music.
	$LF
]div
[h3 id=StageByStageComments 
	" Stage by stage comments
	$LF
]h3
[div class=p 
	"Here we describe the notable skips/tricks used in each level:
	$LF
]div
[h4 id=Level1Docks 
	" Level 1: Docks
	$LF
]h4
[div class=p 
	"We use the restart command as soon as the checkpoint is met for a faster fall recovery.
	$LF
]div
[h4 id=Level2Beach 
	" Level 2: Beach
	$LF
]h4
[div class=p 
	"The bot found the fastest route which, incredibly, has the kid blatantly step on the trick tile (!)
	$LF
]div
[h4 id=Level3CavesI 
	" Level 3: Caves I
	$LF
]h4
[div class=p 
	"We use a walk-backwards-with-sword skip to teleport the potion room.
	$LF
]div
[h4 id=Level4CavesIi 
	" Level 4: Caves II
	$LF
]h4
[div class=p 
	"We use a walk-backwards-with-sword skip to teleport a few screens after grabbing the potion.
	$LF
]div
[h4 id=Level5CavesIii 
	" Level 5: Caves III
	$LF
]h4
[div class=p 
	"Here, the bot discovered a new route to obtain the potion where we climb using the fragile tiles. This route was previously thought as unfeasible. Unfortunately, since wide-wall clips are not possible in this version, we 
	$LF
]div
[h4 id=Level5CavesIii_2 
	" Level 5: Caves III
	$LF
]h4
[div class=p 
	"Here, the bot discovered a new route to obtain the potion where we climb using the fragile tiles. This route was previously thought as unfeasible.
	$LF
]div
[h4 id=Level6RuinsI 
	" Level 6: Ruins I
	$LF
]h4
[div class=p 
	"We use the medusa head to clip through a wall to skip a big chunk of the level. After that, the bot found a fast way to avoid the rest of the heads.
	$LF
]div
[h4 id=Level7RuinsIi 
	" Level 7: Ruins II
	$LF
]h4
[div class=p 
	"This is one of the most abused levels, where we use medusa heads repeatedly to clip through walls. The bot found the fastest way to do each of the clips. At the end of the level, a fast intra-wall clip is performed.
	$LF
]div
[h4 id=Level8RuinsIii 
	" Level 8: Ruins III
	$LF
]h4
[div class=p 
	"Here we used the bot to find the fastest way to skip all medusa heads. In the middle, we skip the big gates by using sword sheathing.
	$LF
]div
[h4 id=Level8RuinsIv 
	" Level 8: Ruins IV
	$LF
]h4
[div class=p 
	"Here the bot found the fastest way to get to the horse.
	$LF
]div
[h4 id=Level9TempleI 
	" Level 9: Temple I
	$LF
]h4
[div class=p 
	"Here the bot found the fastest way to get to the exit door. 
	$LF
]div
[h4 id=Level10TempleIi 
	" Level 10: Temple II
	$LF
]h4
[div class=p 
	"Here the bot found the fastest way to clip through the thin wall and get the potion. Later on, it performs a back-walking teleport to skip the group birdmen fight. Then it finds the way to solve the rest of the level, using the thin-wall skip again on the exit door opening tile screen.
	$LF
]div
[h4 id=Level11TempleIii 
	" Level 11: Temple III
	$LF
]h4
[div class=p 
	"Unfortunately, there are no big skips for this level, as opposed to DOS and SNES versions. However, the bot found the fastest ways to skip traps and birdmen. At the end of the level, it uses a thin-wall clip to save a few seconds.
	$LF
]div
[h4 id=Level13TempleIv 
	" Level 13: Temple IV
	$LF
]h4
[div class=p 
	"Here the bot found the fastest way to get to obtain the flame and exit the level. 
	$LF
]div
[h4 id=Level14JaffarSLabyrinth 
	" Level 14: Jaffar's Labyrinth
	$LF
]h4
[div class=p 
	"Here we use the flame conversion trick to enable flame-mode with fewer potions. In the end, we lure Jaffar to obtain a faster way to kill him.
	$LF
]div
[h3 id=OtherComments 
	" Other comments
	$LF
]h3
[div class=p 
	"I wish to thank Challenger and GMP whose help made this TAS much better than it would have otherwise been. Also thanks to PoP2 runners and routers: martin_petrvalsky, Samabam, Creditor (and many others who contributed to the current route). My next step is to use the lessons learned from Jaffar2 to achieve a (hopefully) sub-14 minute TAS for the DOS version of the game.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/CasualPokePlayer 
		"CasualPokePlayer
	]a
	": Claiming for judgement.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/CasualPokePlayer 
		"CasualPokePlayer
	]a
	": Replacing movie file with truncated version.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/CasualPokePlayer 
		"CasualPokePlayer
	]a
	": Nice job, optimization looks spot on and just as one would expect from such a botting effort.
	$LF
]div
[div class=p 
	"As for the question of whether this prototype is acceptable, this prototype is in fairly finished form and is decent quality. And while the official DOS release was submitted, this prototype is for a separate incompatible console, and there are differences between the two that cause fairly different tricks and routing, so having that release exist is not an issue. The ROM patch is fine too, as it fixes a game breaking bug, which we allow for broken prototypes when needed for game completion.
	$LF
]div
[div class=p 
	"Accepting.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/EZGames69 
		"EZGames69
	]a
	": Processing....
]div
