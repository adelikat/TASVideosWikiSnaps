8
[div class=p 
	"If you would play Tetris near a black hole, you would die.
	$LF
]div
[div class=p 
	"Welcome to this Tool-Assisted Superplay where gravity is very high yet the blocks still magically float on nothing. Luckily we're not playing Tetris for the realism, but instead for the graphics.
	$LF
]div
[h2 id=GameObjectives 
	" Game objectives
	$LF
]h2
[ul 
	[li 
		" Complete the hardest game mode "T.A. Death" by reaching level 999 as fast as possible
		$LF
	]li
	[li 
		" Get awarded some cool medals on the way
		$LF
	]li
	[li 
		" Achieve all the Grand Masters
		$LF
	]li
]ul
[h2 id=Comments 
	" Comments
	$LF
]h2
[div class=p 
	"This run is an improvement of 2.23 seconds or 134 frames over the 
	(__wikiLink|displaytext=previous|href=/3914M)
	" movie. It reaches an in game time of 
	[b 
		"02:40.40
	]b
	".
	$LF
]div
[div class=p 
	"In terms of optimization this game is very limited. No hold piece feature or RNG manipulation means you're stuck with a sequence of 725 pieces from the very beginning. I delayed the start to get a sequence which allows me to get the final 6th medal missing from the previous movie without losing frames. My initial run only saved 20 frames, and the next saved 30 frames, so I adjusted my program, tested a few days, and then let it run hours at a time. All in all I'm very pleased with 134 frames of improvement.
	$LF
]div
[div class=p 
	"I initially started working on this exactly because of the limited placement. It meant that I could reprogram the game myself and then try out some optimization techniques not possible in regular emulators. Most inputs of this run were generated by that program, and then assembled by myself, around 20 pieces at a time. Of course, the limitation rules (e.g. maximum of 4 overhangs) and the overall route were made by me, so this run is definitely not the brute forced best Tetris run that can exist. I also plan to release the reprogrammed game code, so that people planning to improve this submission have the option to work with it as well.
	$LF
]div
[div class=p 
	[img class=embedright mw-100 src=https://tetris.wiki/images/archive/b/b5/20210129035728%21Tgm_basic_ars_description.png 
	]img
	$LF
]div
[h2 id=Terminology 
	" Terminology
	$LF
]h2
[h3 id=Pieces 
	" Pieces
	$LF
]h3
[div class=p 
	"For easier communication, each of the 7 tetrominoes are assigned their own letter based on their shape. These are I, T, L, J, S, Z, O.
	$LF
]div
[h3 id=20g 
	" 20G
	$LF
]h3
[div class=p 
	"20G means that pieces fall 20 tiles per frame. Since that's basically the height of the entire field, it effectively means pieces drop to the ground immediately. This limits where you can move pieces depending on the field. You usually see people building a peak in the middle where the pieces spawn, so pieces can slide down both ways.
	$LF
]div
[div class=p 
	"The game mode "T.A. Death" has this enabled from the start until the end.
	$LF
]div
[h3 id=Level 
	" Level
	$LF
]h3
[div class=p 
	"A level is the current progress. It starts at 0 and increases per line clear and after a piece was placed. However a piece placement will not increase the level counter beyond a section border. They need to be passed with a line clear. So the counter will stop at 099, 199, 299, ..., 799, 899, 998 (<- note the one off), until you clear a line.
	$LF
]div
[h3 id=SingleDoubleTripleTetris 
	" Single/Double/Triple/Tetris
	$LF
]h3
[div class=p 
	"These are terms for clearing 1/2/3/4 lines with a single piece.
	$LF
]div
[h2 id=GameFeatures 
	" Game features
	$LF
]h2
[h3 id=Rotation 
	" Rotation
	$LF
]h3
[div class=p 
	"Rotations are always done first. They are even applied before the gravity in the first frame a piece spawns. You have button A and C to rotate counterclockwise and button B to rotate clockwise. This means counterclockwise rotations can happen 
	[em 
		"every
	]em
	" frame, where clockwise ones can only happen 
	[em 
		"every other
	]em
	" frame. The game has two checks whether rotations are possible: 1. The basic rotation, 2. Kicked rotations.
	$LF
]div
[div class=p 
	"The basic rotation is just that. The game tries to rotate and if blocks overlap, it fails.
	$LF
]div
[div class=p 
	"If the basic rotations fail the game checks so called "kicks" where the piece is not only rotated but also moved in one direction. The game tries to kick to the right and tests if no blocks overlap. If this fails it tries to kick to the left. If this also fails the whole rotation fails.
	$LF
]div
[div class=p 
	"There are several exceptions and special rules here. The I and O pieces will never kick. The L, J, and T pieces will not kick off their center column if the first overlap block is detected there. Also, the very first frame a block spawns it will try the basic rotation, but never kick.
	$LF
]div
[h3 id=Movement 
	" Movement
	$LF
]h3
[div class=p 
	"You can move to the left and to the right by using the corresponding buttons. Normally you would only be able to move in the same direction every other frame, since you have to release and repress, but this version of Tetris has a so called Delayed Auto Shift or DAS. Once charged up it will move the piece every frame. It can be charged during the time between a piece lock and the next spawn. Important to note is how the DAS counter is 1 byte and can overflow, so it needs to be reset occasionally to avoid sudden movement stops. This run uses placements without movement to reset the counter.
	$LF
]div
[div class=p 
	"Movement can't happen on the first frame a piece spawns. It also can't be combined with the lock input, so it can't happen on the last frame of a placement.
	$LF
]div
[h3 id=Lock 
	" Lock
	$LF
]h3
[div class=p 
	"Locking is done using the down button. It can't happen on the first frame. It also can't be combined with a movement input. If a row fills up it is removed and rows above will be moved down.
	$LF
]div
[h3 id=Losing 
	" Losing
	$LF
]h3
[div class=p 
	"On the first frame a piece spawns, if blocks overlap (after an optional basic rotation) you lose the game.
	$LF
]div
[h2 id=Medals 
	" Medals
	$LF
]h2
[h3 id=Medal 
	" <Medal>
	$LF
]h3
[div class=p 
	"<Requirement for bronze/silver/gold.>
	$LF
]div
[h3 id=AcAllClear 
	" AC (All Clear)
	$LF
]h3
[div class=p 
	"Completely empty the field 1/2/3 times.
	$LF
]div
[h3 id=StSectionTime 
	" ST (Section Time)
	$LF
]h3
[div class=p 
	"Complete a section (100 levels) within 52/45/42 seconds
	$LF
]div
[h3 id=SkSkill 
	" SK (Skill)
	$LF
]h3
[div class=p 
	"Clear a Tetris 5/10/17 times.
	$LF
]div
[h3 id=ReRecovery 
	" RE (Recovery)
	$LF
]h3
[div class=p 
	"Go from over 149 blocks to under 71 blocks 1/2/4 times.
	$LF
]div
[h3 id=RoRotation 
	" RO (Rotation)
	$LF
]h3
[div class=p 
	"Surpass 1.2 rotations per piece during levels 0-300/300-700/700-999
	$LF
]div
[h3 id=CoCombo 
	" CO (Combo)
	$LF
]h3
[div class=p 
	"Clear at least 2 lines 4/5/7 times in a row without a piece not clearing a line at all.
	$LF
]div
[h3 id=SecretGrade 
	" Secret Grade
	$LF
]h3
[div class=p 
	"A Secret Grade GM can be achieved by building a > pattern (right pointing angle bracket) with holes during the credits.
	$LF
]div
[h2 id=Timings 
	" Timings
	$LF
]h2
[div class=p 
	"Line clears usually take a few frames longer than simple piece placements.
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Level
			]th
			[th 
				"Piece placement
			]th
			[th 
				"Line clear
			]th
			[th 
				"Frames lost vs clearing a Tetris:
			]th
			[th 
				"Single
			]th
			[th 
				"Double
			]th
			[th 
				"Triple
			]th
			[th 
				"Tetris
			]th
		]tr
		[tr 
			[td 
				"0xx
			]td
			[td 
				"18
			]td
			[td 
				"26
			]td
			[td 
				" 
			]td
			[td 
				"6
			]td
			[td 
				"4
			]td
			[td 
				"2
			]td
			[td 
				"0
			]td
		]tr
		[tr 
			[td 
				"1xx
			]td
			[td 
				"14
			]td
			[td 
				"14
			]td
			[td 
				" 
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
		]tr
		[tr 
			[td 
				"2xx
			]td
			[td 
				"14
			]td
			[td 
				"14
			]td
			[td 
				" 
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
			[td 
				"0
			]td
		]tr
		[tr 
			[td 
				"3xx
			]td
			[td 
				"8
			]td
			[td 
				"14
			]td
			[td 
				" 
			]td
			[td 
				"4.5
			]td
			[td 
				"3
			]td
			[td 
				"1.5
			]td
			[td 
				"0
			]td
		]tr
		[tr 
			[td 
				"4xx
			]td
			[td 
				"7
			]td
			[td 
				"12
			]td
			[td 
				" 
			]td
			[td 
				"3.75
			]td
			[td 
				"2.5
			]td
			[td 
				"1.25
			]td
			[td 
				"0
			]td
		]tr
		[tr 
			[td 
				"5xx+
			]td
			[td 
				"6
			]td
			[td 
				"10
			]td
			[td 
				" 
			]td
			[td 
				"3
			]td
			[td 
				"2
			]td
			[td 
				"1
			]td
			[td 
				"0
			]td
		]tr
	]tbody
]table
[div class=p 
	"Important to note is how in 100-299 you don't lose any time clearing something else than a Tetris.
	$LF
]div
[h2 id=Techniques 
	" Techniques
	$LF
]h2
[h3 id=Planning 
	" Planning
	$LF
]h3
[div class=p 
	"In terms of Medals, ST (Section Time), SK (Skill), and RO (Rotation) will be gold basically automatically. The other three will be the actual challenge to achieve without losing time.
	$LF
]div
[h3 id=Route 
	" Route
	$LF
]h3
[div class=p 
	"First I made sure to delay frames at the start to give me a piece sequence where it is possible to completely empty a field twice with a Tetris for the AC (All Clear) medal. I tried for three times, but it seems there are only around 3000 possible seeds at all.
	$LF
]div
[div class=p 
	"Next, to reach the next section as soon as possible it's important to keep the amount of blocks low when approaching a section change. After all, more line clears mean higher levels and an earlier speedup from the next section.
	$LF
]div
[div class=p 
	"Once I reached section 100-299, no time will be lost from not clearing 4 lines at once, so this is the perfect time to aim for the CO (Combo) medal. So I built up the field with two empty columns and got a 7 combo of Doubles. Now is also a good time to finish the AC (All Clear) medal, since that's much easier without being restricted to Tetris clears.
	$LF
]div
[div class=p 
	"Now the only part left was the 4 recoveries for the RE (Recovery) medal. Of course, I also had to make sure to be low on blocks during the section changes, so I could only complete one recovery per section.
	$LF
]div
[div class=p 
	"At level 574 I was finally done with all the medals and could focus on getting to level 999 as fast as possible.
	$LF
]div
[div class=p 
	"After level 999 I could finally play around a bit and decided to immediately do another full clear of the field, as this sadly isn't possible simultaneously with reaching level 999 without losing time. The rest was getting the secret grade GM by building the required shape, and making sure to end with perfect timing, as losing would not give you the grade.
	$LF
]div
[h3 id=Kicking 
	" Kicking
	$LF
]h3
[div class=p 
	"Since kicking pieces moves them in one direction in addition to the movement, it can be used to save 1 or 2 frames of regular placement. 
	[b 
		"This is the most important optimization technique
	]b
	", where it's sometimes better to allow holes in the field to allow more kicking.
	$LF
]div
[h3 id=Placement 
	" Placement
	$LF
]h3
[div class=p 
	[img class=embed mw-100 src=https://i.imgur.com/6CNDpy2.png 
	]img
	$LF
]div
[div class=p 
	"This chart shows how many frames it takes the pieces on average (without kicks) to reach each of the 10 columns, as well as how fast a piece is against the column average with the greenest color.
	$LF
]div
[div class=p 
	"You can see how most pieces are left-aligned from the symmetrical O piece. This can also be seen in the rotation diagram. However, the I piece is right aligned, which is the reason the I piece holes are usually on the right side.
	$LF
]div
[h3 id=Optimizing 
	" Optimizing
	$LF
]h3
[div class=p 
	"Most of my workflow was using my program to brute force piece placements. However, without any overhang or hole rules it's only possible to brute force the next ~5 pieces. But always choosing the fastest placement will quickly lead to losing time later. My program was very useful with generating All Clears, or the secret grade pattern.
	$LF
]div
[div class=p 
	"The naive strategy of brute forcing the next few pieces, and then choosing the next one piece placement with the most occurrences lead to the initial 20 frames improvement. So then I changed it up and implemented a few weights so I can check more future pieces without brute forcing all of them (I might add more explanation here at a later point). This of course loses the optimality certainty but it also allowed me to complete this run in my lifetime, which was nice.
	$LF
]div
[h2 id=SpecialThanksTo 
	" Special Thanks to
	$LF
]h2
[ul 
	[li 
		" 
		[b 
			"Steelix100
		]b
		" for creating the previous run and giving me a very good comparison run.
		$LF
	]li
	[li 
		" The 
		[b 
			[a href=https://tetris.wiki/ rel=noopener external nofollow 
				"tetris wiki
			]a
		]b
		", which is a very good resource on how these games work.
		$LF
	]li
	[li 
		" 
		[b 
			"feos
		]b
		" and MAMEHawk, as BizHawk has an easier and more intuitive workflow, even if the MAME core isn't perfect yet.
		$LF
	]li
]ul
[h2 id=SuggestedScreenshot 
	" Suggested Screenshot
	$LF
]h2
[div class=p 
	[img class=embed mw-100 src=https://i.imgur.com/StzXo7b.png 
	]img
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": claiming for judging
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Memory 
		"Memory
	]a
	": Optimization is super good here.
	$LF
]div
[div class=p 
	"The sheer speed of the TAS here makes it extremely fun to watch. The audience whole-heartedly enjoyed the run and I did too.
	$LF
]div
[div class=p 
	"The fact that the medals are included makes this able to be considered both fastest and full completion. If a run that was faster than this was performed that didn't get all the medals, I admittedly am unsure whether or not it would be able to be considered as a new branch or not since it'd presumably be so similar. My first inclination is no but I am not sure.
	$LF
]div
[div class=p 
	"In any case, accepting to Moons as an improvement to 
	(__wikiLink|href=/3914M|implicitdisplaytext=3914M)
	".
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Publishing.
]div
