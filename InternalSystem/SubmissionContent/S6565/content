8
[div class=p 
	"This is a second attempt at this game. Included in these submission notes is the original submission information along with new information regarding game mechanics and some new thoughts regarding scores posted elsewhere on the web.
	$LF
]div
[h2 id=DecathlonForCommodore64 
	"Decathlon for Commodore 64
	$LF
]h2
[div class=p 
	"Compete through the 10 track & field events of Decathlon for the highest score.
	$LF
]div
[div class=p 
	"Anyone familiar with NES Track & Field will see similarities.
	$LF
]div
[h3 id=TasNotes 
	"TAS Notes
	$LF
]h3
[ul 
	[li 
		"BizHawk 2.3.2 (Rerecords are broken, so I set them to 0)
		$LF
	]li
	[li 
		"Game is a cartridge version
		$LF
	]li
	[li 
		"Uses NTSC Sync Settings (as the predecessor run should have done, but didn't)
		$LF
	]li
	[li 
		"Goal remains highest achievable score in the fastest time.
		$LF
		[ul 
			[li 
				"Unfortunately a wait is necessary for the CPU to finish running events which adds some time.  While a 2-player game would speed up race events, even scratching out non-timed events with player 2 would take longer than simply waiting for the CPU to finish races.
				$LF
			]li
		]ul
	]li
]ul
[h3 id=PertinentGameMechanics 
	"Pertinent Game Mechanics
	$LF
]h3
[div class=p 
	[b 
		"Running (for Time) Events
	]b
	[br 
	]br
	$LF
	"For running events (100m, 400m, 110m Hurdles, and 1500m) the speed value is stored in RAM address 0x74.  At race start, this value is set to 14h.  Then the following code is utilized each frame to determine speed of the runner.
	$LF
]div
[table 
	[tbody 
		[tr 
			[th 
				"Address
			]th
			[th 
				"Assembly Code
			]th
			[th 
				"Operand
			]th
			[th 
				"Effect/Notes
			]th
		]tr
		[tr 
			[td 
				"97FA
			]td
			[td 
				"A5 74
			]td
			[td 
				"LDA $74
			]td
			[td 
				"load current speed into accumulator
			]td
		]tr
		[tr 
			[td 
				"97FC
			]td
			[td 
				"ED 05 18
			]td
			[td 
				"SBC $1805
			]td
			[td 
				"subtract the value in $1805 (always subtracts 1 for our purposes)
			]td
		]tr
		[tr 
			[td 
				"97FF
			]td
			[td 
				"B0 02
			]td
			[td 
				"BCS $9803
			]td
			[td 
				"Conditional branch(always branches for our purposes)
			]td
		]tr
		[tr 
			[td 
				"9803
			]td
			[td 
				"85 74
			]td
			[td 
				"STA $74
			]td
			[td 
				"Save new speed value
			]td
		]tr
		[tr 
			[td 
				"9805
			]td
			[td 
				"A5 44
			]td
			[td 
				"LDA $44
			]td
			[td 
				"load controller direction pressed into accumulator
			]td
		]tr
		[tr 
			[td 
				"9807
			]td
			[td 
				"29 0C
			]td
			[td 
				"AND #$0C
			]td
			[td 
				"logical AND to accumulator
			]td
		]tr
		[tr 
			[td 
				"9809
			]td
			[td 
				"AA
			]td
			[td 
				"TAX
			]td
			[td 
				"data transfer to X register
			]td
		]tr
		[tr 
			[td 
				"980A
			]td
			[td 
				"C9 0C
			]td
			[td 
				"CMP #$0C
			]td
			[td 
				"compare direction pressed to neutral joystick position
			]td
		]tr
		[tr 
			[td 
				"980C
			]td
			[td 
				"F0 17
			]td
			[td 
				"BEQ $9825
			]td
			[td 
				"branch if no direction is pressed
			]td
		]tr
		[tr 
			[td 
				"980E
			]td
			[td 
				"C5 23
			]td
			[td 
				"CMP $23
			]td
			[td 
				"compare direction to previous frame's pressed direction
			]td
		]tr
		[tr 
			[td 
				"9810
			]td
			[td 
				"F0 13
			]td
			[td 
				"BEQ $9825
			]td
			[td 
				"branch if these are equal
			]td
		]tr
		[tr 
			[td 
				"9812
			]td
			[td 
				"A9 85
			]td
			[td 
				"LDA #$85
			]td
			[td 
				"load 85h into the accumulator
			]td
		]tr
		[tr 
			[td 
				"9814
			]td
			[td 
				"38
			]td
			[td 
				"SEC
			]td
			[td 
				"Set the Carry Flag
			]td
		]tr
		[tr 
			[td 
				"9815
			]td
			[td 
				"E5 74
			]td
			[td 
				"SBC $74
			]td
			[td 
				"subtract the current speed value
			]td
		]tr
		[tr 
			[td 
				"9817
			]td
			[td 
				"4A
			]td
			[td 
				"LSR A
			]td
			[td 
				"Logical Shift Right on the accumulator(effectively divides by 2 and rounds down to the nearest whole number)
			]td
		]tr
		[tr 
			[td 
				"9818
			]td
			[td 
				"4A
			]td
			[td 
				"LSR A
			]td
			[td 
				"Logical Shift Right on the accumulator(effectively divides by 2 and rounds down to the nearest whole number)
			]td
		]tr
		[tr 
			[td 
				"9819
			]td
			[td 
				"4A
			]td
			[td 
				"LSR A
			]td
			[td 
				"Logical Shift Right on the accumulator(effectively divides by 2 and rounds down to the nearest whole number)
			]td
		]tr
		[tr 
			[td 
				"981A
			]td
			[td 
				"18
			]td
			[td 
				"CLC
			]td
			[td 
				"Clear the Carry Flag
			]td
		]tr
		[tr 
			[td 
				"981B
			]td
			[td 
				"65 74
			]td
			[td 
				"ADC $74
			]td
			[td 
				"add current speed back in
			]td
		]tr
		[tr 
			[td 
				"981D
			]td
			[td 
				"C9 78
			]td
			[td 
				"CMP #$78
			]td
			[td 
				"compare the speed value to 78h
			]td
		]tr
		[tr 
			[td 
				"981F
			]td
			[td 
				"90 02
			]td
			[td 
				"BCC $9823
			]td
			[td 
				"branch if below 78h (if not, the code executed will directly set speed to 77h)
			]td
		]tr
		[tr 
			[td 
				"9823
			]td
			[td 
				"85 74
			]td
			[td 
				"STA $74
			]td
			[td 
				"store accumulator as new speed value
			]td
		]tr
	]tbody
]table
[div class=p 
	"Once speed equals 77h, the above calculation yields a value of 77h meaning it no longer increases.
	$LF
	"This code shows us that the maximum speed attainable is 77h and the fastest way to accomplish it is changing joystick direction every frame.
	$LF
	"As all running events start at 14h, this calculation means max speed is reached in 25 frames of the race starting and is then sustained through the race.
	[br 
	]br
	$LF
	"For the Hurdles, no speed is lost during jumps; but hitting a hurdle slows down the runner.
	$LF
]div
[div class=p 
	[b 
		"Jumping (for Height/Distance) Events)
	]b
	[br 
	]br
	$LF
	"For jumping events (Long Jump, High Jump, Pole Vault) the speed value is stored in RAM address 0xA2.  At race start, this value is set to 14h.  Then code equivalent to that above is utilized each frame to determine speed of the runner.
	$LF
]div
[div class=p 
	[em 
		"For Long Jump
	]em
	[br 
	]br
	$LF
	"Horizontal speed is sustained from running speed.  Vertical arc timing is not affected by horizontal speed, and always takes the same number of frames regardless of input.
	$LF
]div
[div class=p 
	[em 
		"For High Jump
	]em
	[br 
	]br
	$LF
	"Horizontal speed is based off running speed.  Vertical arc timing is not affected by horizontal speed, and always takes the same number of frames regardless of input.  The Y-value at the top of this arc is 73h (lower value = higher on the screen).  This is the highest the character can jump.  This Y-position of 73h is not sufficient to clear a 2.4m bar height regardless of horizontal speed; freezing the value at this peak of the arc will still impact the bar at 2.4m.  Therefore 2.2 is the maximum achievable.
	$LF
]div
[div class=p 
	[em 
		"For Pole Vault
	]em
	[br 
	]br
	$LF
	"Horizontal speed is based off the running speed a the point where the pole plants into the ground.  Upon planting the pole in the ground, the speed decreases by 7 every three frames.  Vertical elevation increases along a set sequence every 3 frames as well.  At the point of releasing the pole, horizontal speed is sustained through the remainder of the vault.  Vertical position changes along a set arc after the point of release (number of arc frames is unaffected by horizontal speed).  Thus, to succeed in pole vault, the combination of release point elevation and horizontal speed must be sufficient to clear the bar.
	[br 
	]br
	$LF
	"When attempting 4.8m, it is impossible to achieve a combination of release elevation and horizontal speed sufficient to clear the bar.
	$LF
	"At release points high enough in vertical relation to the bar, the horizontal speed has decreased too far to allow rapid enough horizontal movement to clear the bar.  Although releasing at an earlier point of elevation will yield faster horizontal speed, not enough elevation is achieved to clear the bar.  Thus the maximum achievable height is 4.6m
	[br 
	]br
	$LF
	"If 4.8m were able to be cleared,  the point value awarded would be 1005 (this award value can be seen for each attempt in RAM address 0x4c).
	[br 
	]br
	$LF
	"Based on my testing, it's impossible to achieve a score of at least 1000 to yield the trumpet fanfare.
	$LF
]div
[div class=p 
	[b 
		"Throwing Events
	]b
	[br 
	]br
	$LF
	"All three throwing events (Shot Put, Discus, Javelin) again store speed in 0xA2 and again use the above calculation to alter speed.  For Shotput and Discus, the starting value is 10h instead of 14h.  While this is a different start value, it doesn't affect the time it takes to reach a value of 77h (again 25 frames).
	[br 
	]br
	$LF
	"For all these events, horizontal throw speed is based on this value at the point of release.  Vertical arc always takes the same number of frames regardless of horizontal speed.  Further, the height of the vertical arc is always the same regardless of running/throw speed; meaning the height of throw can't be affected.
	[br 
	]br
	$LF
	"This essentially means that the only way to affect throw distance is via speed and release point (which this run always does on the last possible frame).  Max Speed + Last Possible Release Frame = Max Distance
	$LF
]div
[h3 id=RunByEvent 
	"Run by Event:
	$LF
]h3
[div class=p 
	"100 Meter Dash (Score 1435)
	$LF
]div
[ul 
	[li 
		"In-game time = 
		[b 
			"8.65 seconds
		]b
		$LF
	]li
	[li 
		"Actual world record = 9.58 seconds (Usain Bolt 2009)
		$LF
	]li
]ul
[div class=p 
	"Long Jump (Score 1284)
	$LF
]div
[ul 
	[li 
		"In-game distance = 
		[b 
			"9.37 meters
		]b
		$LF
	]li
	[li 
		"Actual world record = 8.95 meters (Mike Powell 1991)
		$LF
	]li
	[li 
		"Instant jumps on attempts 2 & 3 to minimize time spent (faster than running past scratch line).
		$LF
	]li
]ul
[div class=p 
	"Shot Put (Score 1260)
	$LF
]div
[ul 
	[li 
		"In-game distance = 
		[b 
			"23.57 meters
		]b
		$LF
	]li
	[li 
		"Actual World Record = 23.12 meters (Randy Barnes 1990)
		$LF
	]li
	[li 
		"Immediate weak throws on attempts 2 & 3 to minimize time (faster than running past scratch line).
		$LF
	]li
]ul
[div class=p 
	"High Jump (Score 1025)
	$LF
]div
[ul 
	[li 
		"Because there is no option to set initial height on the bar, multiple attempts that clear the bar are necessary for maximum score.
		$LF
	]li
	[li 
		"In-game max height cleared 2.2 meters
		$LF
		[ul 
			[li 
				"I was unable to clear 2.4 meters with any input combinations that I tried.  Three running scratches are done at 2.4m to move to next event (faster than immediate jumps--Either I erroneously did this event the other way in the previous submission, or it was an NTSC/PAL issue).
				$LF
			]li
		]ul
	]li
	[li 
		"Actual world record = 
		[b 
			"2.45 meters (Javier Sotomayor 1993)
		]b
		$LF
	]li
]ul
[div class=p 
	"400m (Score 1360)
	$LF
]div
[ul 
	[li 
		"In-game time = 
		[b 
			"38.90 seconds
		]b
		$LF
	]li
	[li 
		"Actual world record = 43.03 seconds (Wayde van Niekerk 2016)
		$LF
	]li
]ul
[div class=p 
	"110 Hurdles (Score 1259)
	$LF
]div
[ul 
	[li 
		"In-game time = 
		[b 
			"11.55 seconds
		]b
		$LF
	]li
	[li 
		"Actual world record = 12.80 seconds (Aries Merritt 2012)
		$LF
	]li
]ul
[div class=p 
	"Discus (Score 1239)
	$LF
]div
[ul 
	[li 
		"In-game distance = 71.55 meters
		$LF
	]li
	[li 
		"Actual World Record = 
		[b 
			"74.08 meters (Jürgen Schult 1986)
		]b
		$LF
	]li
	[li 
		"2 running scratches is faster than instant throws.
		$LF
	]li
]ul
[div class=p 
	"Pole Vault (Score 957)
	$LF
]div
[ul 
	[li 
		"Because there is no option to set initial height on the bar, multiple attempts that clear the bar are necessary for maximum score.
		$LF
	]li
	[li 
		"In-game height = 4.6 meters
		$LF
		[ul 
			[li 
				"I was unable to clear 4.8 meters with any input combinations that I tried.  Three running scratches at 4.8 meters are performed to end the event.
				$LF
			]li
		]ul
	]li
	[li 
		"Actual World Record = 
		[b 
			"6.16 meters (Renaud Lavillenie 2014)
		]b
		$LF
	]li
]ul
[div class=p 
	"Javelin Throw (Score 1210)
	$LF
]div
[ul 
	[li 
		"In-game distance = 100.96 meters
		$LF
	]li
	[li 
		"Actual World Records (before and after javelin specification changes of 1986 and 1991)= 
		[b 
			"104.80 meters (Uwe Hohn 1984)
		]b
		" &  98.48 meters (Jan Železný 1996)
		$LF
	]li
	[li 
		"Running scratches used for attempts 2 & 3 to end event.
		$LF
	]li
]ul
[div class=p 
	"1500m (Score 1065)
	$LF
]div
[ul 
	[li 
		"In-game time = 3:33.43
		$LF
	]li
	[li 
		"Actual World Record = 
		[b 
			"3:26.00 (Hicham El Guerrouj 1998)
		]b
		$LF
	]li
]ul
[div class=p 
	[b 
		"Total Score = 12,094 points
	]b
	$LF
]div
[ul 
	[li 
		"Actual World Record Score = 9,126 points (Kevin Mayer 2018)
		$LF
	]li
]ul
[h3 id=ScoringConsiderations 
	"Scoring Considerations
	$LF
]h3
[div class=p 
	"This TAS uses joystick inputs for the events.  According to 
	[a href=https://www.c64-wiki.com/wiki/Decathlon rel=noopener external nofollow 
		"https://www.c64-wiki.com/wiki/Decathlon
	]a
	" it is possible to achieve a higher total score using something referred to as a keyboard cheat.
	[br 
	]br
	$LF
	[code 
		""Playing with the keyboard a player can accelerate better by keeping the arrow keys pressed and thus hold high speeds."
	]code
	[br 
	]br
	$LF
	"The C64 cursor buttons (arrow keys) are not like the modern standardized layout, but instead contain all four directional movements on only two keys (shift is used to change direction).  These cursor keys do not work for this game.  Actually no keys affected the running speed when I tested in BizHawk; so I'm unsure what keyboard inputs are being referenced by this website.  It is perhaps referring to joystick emulation on a modern keyboard, but this is only speculation.
	[br 
	]br
	$LF
	"If keyboard input did somehow make it possible to beat this submission's time, it would have to do so by somehow breaking the above noted mechanics.  Therefore, I'd guess that the cheat mentioned on that page is in relation to joystick emulation.
	[br 
	]br
	$LF
	"I'd also suggest that the score posted on that site using the "keyboard cheat" (which is much higher than this submission) may be explainable. 
	$LF
	"The final time and score of the 1500m as shown in the picture of this run doesn't mesh with this submission.  The picture shows a time of 3:33.60 with a score of 1071, yet this submission which achieves a faster time of 3:33.43 is only awarded 1065 points.  When altering the TAS to match the time of 3:33.60, the awarded points are only 1063.  This point value discrepancy makes me question the validity of the pictured run.  Explanations I can think of for this discrepancy are:
	[br 
	]br
	" 
	$LF
	[b 
		"1)
	]b
	"  Emulation Errors -- That break the known mechanics
	[br 
	]br
	$LF
	[b 
		"2)
	]b
	"  Version Difference -- Scores for running events in the version used for this submission (NTSC) start at a maximum value and decrease each frame until the player crosses the finish line.  If the amount of score decrease per frame was not adjusted for the framerate difference in a PAL version, the end score would be higher on a PAL version due to fewer frames occurring over the same real time frame.  Fewer frames means fewer score decreases yielding a greater end score.  This would constitute a programming oversight in the PAL release assuming timing per frame was corrected. This could explain the higher scores, but is only speculation until someone is able to test a PAL released version.
	[br 
	]br
	$LF
	[b 
		"3)
	]b
	"  Fabrication -- Sadly, this is also a possibility.
	$LF
]div
[h3 id=Records 
	"Records
	$LF
]h3
[div class=p 
	"In the TAS notes section, I boldfaced the better result between this TAS and the actual current world records.  While all of these actual records have been set since the game was made, 
	[em 
		"I find it interesting that the programmers didn't make it possible to beat records that existed before the game was published.
	]em
	" It was made in 1983 and released in 1984.  With the exception of Javelin Throw, all the events that have current world records which beat the TAS, also had records by the end of in 1983 that would have beat the TAS as well.
	$LF
]div
[ul 
	[li 
		"Records at the end of 1983
		$LF
		[ul 
			[li 
				"High Jump: 2.38 meters
				$LF
			]li
			[li 
				"Discus: 71.85 meters
				$LF
			]li
			[li 
				"Pole Vault: 5.83 meters
				$LF
			]li
			[li 
				"1500m: 3:30.77
				$LF
			]li
		]ul
	]li
]ul
[h3 id=PotentialQuestions 
	"Potential Questions
	$LF
]h3
[div class=p 
	[em 
		"Could this score be beaten regardless of time?
	]em
	[br 
	]br
	$LF
	"Two possibilities:
	[br 
	]br
	$LF
	"1 -- If someone were able to discover input variation 
	[b 
		"that would break the known mechanics
	]b
	" and allow for higher clearances of High Jump and Pole Vault, this score could be beaten.  I was unable to find any.  This would also result in increased TAS length.
	[br 
	]br
	$LF
	"2 -- A run using a PAL timed version (if one exists) that doesn't also correct for point loss variation in running events (as described above), may be able to achieve a higher score.
	$LF
]div
[div class=p 
	[em 
		"Could the TAS time be beaten regardless of score?
	]em
	[br 
	]br
	$LF
	"Absolutely.  Scratching out on all non-timed events would result in a faster TAS, but a much lower score.  FWIW this would be effectively not completing or 'losing' various events based on the rules of the sport.
	$LF
]div
[div class=p 
	[em 
		"Could the time be beaten with equal or higher score?
	]em
	[br 
	]br
	$LF
	"To my knowledge based on the the input permutations I've tried and the study of the game's code, I don't believe that this score could be achieved in less time...unless someone can find a way to speed up the CPU runner in running events.
	$LF
]div
[hr 
]hr
[div class=p 
	[a class=intlink href=/Users/Profile/feos 
		"feos
	]a
	": Awesome job with the research!
	$LF
]div
[div class=p 
	"The main problem with this goal for this game was 
	(__wikiLink|displaytext=this rule|href=/MovieRules#SportsGamesAreAllowedUnderRestrictions)
	":
	$LF
]div
[figure 
	[figcaption class=author 
		"Quoting Sports games are allowed under restrictions
	]figcaption
	[div class=p 
		"The game must have a meaningful ending point with meaningful completion criteria.
		$LF
	]div
	[ul 
		[li 
			" For example, many sports games have career, storyline, tournament or season modes that end with an ending or credit sequence. These would count as meaningful endings.
			$LF
		]li
		[li 
			" In sports that depend on a variety of environments or situations, such as golf, completion can be defined by clearing every environment or situation in the game.
			$LF
		]li
		[li 
			" TASes that only clear a single event without reaching a meaningful ending to the game are not eligible. 
			$LF
		]li
	]ul
]figure
[div class=p 
	"Aiming just for shortest time would be a super questionable goal, because the game doesn't react on your success or failure, only on getting 1000 points per event. You can fail in all non-running events and still advance through all of them by pressing the joystick button. In running events you have to complete the race to advance to the next event. Regardless of how you've reached the end of the game, there is a huge fanfare.
	$LF
]div
[div class=p 
	"We don't want to care about the internal rules of the original sports replicated here, so clearing the events by those rules wouldn't be enough to define any% completion. However, since 
	(__wikiLink|displaytext=max score has been allowed for Vault|href=/MovieRules#MaximumPoints)
	" for some cases, and this movie fits all the requirements, it can be considered a meaningful end goal for this game. Interestingly, any theoretical any% completion would mostly be contained in this movie.
	$LF
]div
[div class=p 
	"So even though this seems to be the only vaultable branch for this game, it's still valuable and also quite complete: there's nothing else sensible to aim for in this game.
	$LF
]div
[div class=p 
	"Accepting to Vault.
	$LF
]div
[div class=p 
	[a class=intlink href=/Users/Profile/Spikestuff 
		"Spikestuff
	]a
	": Pandora's Publication.
]div
