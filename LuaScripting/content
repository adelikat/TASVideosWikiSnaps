40
[div class=p 
	"Lua scripting is an extremely useful tool when TASing. Although some programming knowledge is required, the user has power over things like game screen display, inputs, and memory. The following are some common applications, though the possibilities are endless.
	$LF
]div
[ul 
	[li 
		"Displaying helpful information on screen.
		$LF
	]li
	[li 
		"Eliminating tedious repetition.
		$LF
	]li
	[li 
		"Creating specific circumstances for testing.
		$LF
	]li
	[li 
		"Brute forcing a solution.
		$LF
	]li
]ul
[div class=p 
	(__wikiLink|displaytext=Snes9x|href=/EmulatorResources/Snes9x)
	" was the first emulator modified to support Lua, back in 2008. Now, the following emulators support Lua: 
	(__wikiLink|displaytext=FCEU(X)|href=/EmulatorResources/FCEUX)
	", 
	(__wikiLink|href=/BizHawk|implicitdisplaytext=BizHawk)
	", 
	(__wikiLink|displaytext=lsnes|href=/EmulatorResources/Lsnes)
	", 
	(__wikiLink|displaytext=Snes9x|href=/EmulatorResources/Snes9x)
	", 
	(__wikiLink|displaytext=Gens|href=/EmulatorResources/Gens)
	", 
	(__wikiLink|displaytext=VBA|href=/EmulatorResources/VBA)
	", 
	(__wikiLink|displaytext=Final Burn Alpha|href=/EmulatorResources/Fbarr)
	", 
	(__wikiLink|displaytext=PCSX|href=/EmulatorResources/PCSX)
	", 
	(__wikiLink|displaytext=DeSmuME|href=/EmulatorResources/Desmume)
	", 
	(__wikiLink|displaytext=PCEjin|href=/EmulatorResources/Pcejin)
	", 
	(__wikiLink|displaytext=VBjin|href=/EmulatorResources/Vbjin)
	", 
	(__wikiLink|displaytext=JPC-RR|href=/EmulatorResources/JPC)
	", and 
	(__wikiLink|displaytext=MAME|href=/EmulatorResources/Mamerr)
	".
	$LF
]div
[div class=p 
	"In order to integrate Lua, a number of emulator-specific functions were created, which form the emulator-specific Lua API, enabling control of the emulator. However, one is not limited only to emulator-specific Lua functions. Anyone can use any function in the main Lua API, including file I/O. Thus the emulator can be scripted to communicate with, say, text files!
	$LF
]div
[h3 id=HowToRunALuaScript 
	" How to run a Lua script
	$LF
]h3
[div class=p 
	"To run a Lua script, copy the code and place it in a text editor. Name the file as "file.lua" or anything ending in "lua". When saving from Notepad in Windows, you need to put quotes around the name 
	[code 
		""file.lua"
	]code
	". 
	$LF
]div
[div class=p 
	"Then go to the emulator and run the Lua file. Some emulators have a Lua script window; the Lua script will automatically begin when you load it.
	$LF
]div
[h3 id=Basics 
	" Basics
	$LF
]h3
[div class=p 
	"To become familiar with Lua, check out the 
	[a href=http://www.lua.org/manual/5.4/ rel=noopener external nofollow 
		"Lua 5.4 manual
	]a
	". It covers how the Lua language works, and the main Lua API.
	$LF
]div
[div class=p 
	"In the emulator, it is desirable to have a main execution loop. The main execution loop can take one of two forms (-- means the rest of the line is a comment):
	$LF
]div
[pre 
	[code class=language-lua 
		$UNPRINTABLE TEXT!!!
	]code
]pre
[div class=p 
	"and
	$LF
]div
[pre 
	[code class=language-lua 
		$UNPRINTABLE TEXT!!!
	]code
]pre
[div class=p 
	"The second one is technically a function which is called whenever there is an update to the display (which is supposed to be every frame but is also called in some emulators
	[a id=r1 
	]a
	[sup 
		"[
		[a href=#1 
			"1
		]a
		"]
	]sup
	" during when the display is paused). The second form is required for DeSmuME since the first form is working in a different way than most other emulators (see 
	(__wikiLink|displaytext=this topic|href=/Forum/Topics/18798)
	" for more information).
	$LF
]div
[ul 
	[li 
		(__wikiLink|displaytext=Registers|href=/LuaScripting/Registers)
		" - run functions during specific events, includes advancing a frame, state save/load, etc.
		$LF
	]li
	[li 
		(__wikiLink|displaytext=Display|href=/LuaScripting/Display)
		" - drawing, memory observation, etc.
		$LF
	]li
	[li 
		(__wikiLink|displaytext=Macros|href=/LuaScripting/Macros)
		$LF
		[ul 
			[li 
				" 
				(__wikiLink|href=/LuaScripting/TableKeys|implicitdisplaytext=LuaScripting/TableKeys)
				" - controlling input, includes autohold and autofire)
				$LF
			]li
		]ul
	]li
	[li 
		(__wikiLink|displaytext=Memory Editing|href=/LuaScripting/MemoryEditing)
		$LF
	]li
]ul
[div class=p 
	(__wikiLink|href=/TODO|implicitdisplaytext=TODO)
	$LF
]div
[ul 
	[li 
		" To be covered
		$LF
		[ul 
			[li 
				" joypad.set
				$LF
			]li
			[li 
				" savestate.create , savestate.load , savestate.save
				$LF
			]li
			[li 
				" FCEU.pause  
				$LF
			]li
			[li 
				" FCEU.speedmode
				$LF
			]li
			[li 
				" io.write , io.output
				$LF
			]li
		]ul
	]li
]ul
[h3 id=UsingMhsForEmulatorsWithoutLuaEmbedded 
	"Using MHS for emulators without lua embedded
	$LF
]h3
[div class=p 
	[a href=http://memoryhacking.com/download.php rel=noopener external nofollow 
		"L. Spiro's Memory Hacking Software
	]a
	$LF
]div
[ul 
	[li 
		"To be covered
		$LF
		[ul 
			[li 
				"(Be sure to note that position values are most often floating point data types.)
				$LF
			]li
		]ul
	]li
]ul
[h3 id=MoreInformation 
	"More information
	$LF
]h3
[h4 id=SiteLinks 
	" Site Links
	$LF
]h4
[ul 
	[li 
		" 
		(__wikiLink|displaytext=Lua Functions for BizHawk emulator|href=/Bizhawk/LuaFunctions)
		$LF
	]li
	[li 
		" 
		(__wikiLink|displaytext=Lua Functions for lsnes emulator|href=/EmulatorResources/Lsnes/LuaFunctions)
		$LF
	]li
	[li 
		" 
		(__wikiLink|displaytext=Lua Functions for Snes9x emulator|href=/EmulatorResources/Snes9x/LuaFunctions)
		$LF
	]li
	[li 
		" Check out for some 
		(__wikiLink|displaytext=more complicated|href=/HomePages/Bisqwit/LuaFunctions)
		" Lua applications by 
		[a class=intlink href=/Users/Profile/Bisqwit 
			"Bisqwit
		]a
		".
		$LF
	]li
]ul
[h4 id=ExternalLinks 
	" External Links
	$LF
]h4
[ul 
	[li 
		" 
		[a href=https://github.com/TASEmulators/snes9x-rr/wiki/Lua-Functions rel=noopener external nofollow 
			"Snes9x Lua function library
		]a
		" (
		[a href=http://code.google.com/p/snes9x-rr/wiki/LuaScriptingFunctions rel=noopener external nofollow 
			"old archive
		]a
		")
		$LF
	]li
	[li 
		" 
		[a href=http://code.google.com/p/vba-rerecording/wiki/LuaScriptingFunctions rel=noopener external nofollow 
			"VBA Lua function library
		]a
		$LF
	]li
	[li 
		" 
		[a href=https://github.com/TASEmulators/mame-rr/wiki/Lua-scripting-functions rel=noopener external nofollow 
			"MAME Lua function library
		]a
		$LF
	]li
	[li 
		" 
		[a href=https://github.com/TASEmulators/gens-rerecording/blob/master/Gens-rr/src/luascript.cpp rel=noopener external nofollow 
			"Gens Lua function library
		]a
		" (TODO: make a proper wiki documenting the functions)
		$LF
	]li
	[li 
		" 
		[a href=http://dehacked.2y.net/snes9x-lua/ rel=noopener external nofollow 
			"DeHackEd's sample Lua scripts
		]a
		$LF
	]li
]ul
[hr 
]hr
[div class=p 
	"[
	[a id=1 
	]a
	[a href=#r1 
		"1
	]a
	"]
	": This is known to occur in FCEUX, PCSX, and DeSmuME.
]div
