2
[h4 id=Bizhawk29NowWithLua54 
	" BizHawk 2.9 now with Lua 5.4
	$LF
]h4
[div class=p 
	"Starting with BizHawk 2.9 which released on 2023-04-07 the Lua engine updated from Lua 5.1 to Lua 5.4. This page is meant to document some important or useful changes with examples.
	$LF
]div
[div class=p 
	"To check which version you are currently running, you can execute:
	$LF
]div
[pre 
	[code class=language-Lua 
		$UNPRINTABLE TEXT!!!
	]code
]pre
[hr 
]hr
[h4 id=64BitIntegers 
	" 64-bit integers
	$LF
]h4
[div class=p 
	"Previously, all numbers in Lua were double-precision floating-point numbers. But now integers can use the full 64-bit range for calculations.
	$LF
]div
[div class=p 
	"They also wrap around properly, so recreating big number arithmetic of games will not run into precision errors. This only works as long as you are careful to not go into decimal numbers.
	$LF
]div
[pre 
	[code class=language-Lua 
		$UNPRINTABLE TEXT!!!
	]code
]pre
[h4 id=FloorDivision 
	" Floor division (//)
	$LF
]h4
[div class=p 
	"A very useful new operator is the floor division e.g. 
	[code 
		"a // b
	]code
	" which had to be done manually with 
	[code 
		"math.floor(a / b)
	]code
	" previously.
	$LF
]div
[pre 
	[code class=language-Lua 
		$UNPRINTABLE TEXT!!!
	]code
]pre
[h4 id=BitwiseOperators 
	" Bitwise operators
	$LF
]h4
[div class=p 
	"Lua has now true bitwise operators without using the 
	[code 
		"bit
	]code
	" library.
	$LF
]div
[ul 
	[li 
		" 
		[code 
			"&
		]code
		": bitwise AND
		$LF
	]li
	[li 
		" 
		[code 
			"|
		]code
		": bitwise OR
		$LF
	]li
	[li 
		" 
		[code 
			"~
		]code
		": bitwise exclusive OR
		$LF
	]li
	[li 
		" 
		[code 
			">>
		]code
		": right shift
		$LF
	]li
	[li 
		" 
		[code 
			"<<
		]code
		": left shift
		$LF
	]li
	[li 
		" 
		[code 
			"~
		]code
		": unary bitwise NOT
		$LF
	]li
]ul
[hr 
]hr
[h4 id=FurtherReading 
	" Further reading
	$LF
]h4
[ul 
	[li 
		" BizHawk Lua Function Wiki Page: 
		(__wikiLink|href=/Bizhawk/LuaFunctions|implicitdisplaytext=Bizhawk/LuaFunctions)
		".
		$LF
	]li
	[li 
		" Open the in-program documentation by pressing F1 on the Lua Console, or click Help → Lua Function List.
		$LF
	]li
	[li 
		" For official Lua documentation, here are the links with the changes from 5.1 
		[a href=http://www.lua.org/manual/5.2/readme.html#changes rel=noopener external nofollow 
			"→ 5.2
		]a
		", 
		[a href=http://www.lua.org/manual/5.3/readme.html#changes rel=noopener external nofollow 
			"→ 5.3
		]a
		", 
		[a href=http://www.lua.org/manual/5.4/readme.html#changes rel=noopener external nofollow 
			"→ 5.4
		]a
		".
	]li
]ul
